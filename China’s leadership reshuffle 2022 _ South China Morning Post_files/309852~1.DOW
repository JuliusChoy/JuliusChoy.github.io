!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="99c0553d-87d3-4976-b641-62c394a100bb",e._sentryDebugIdIdentifier="sentry-dbid-99c0553d-87d3-4976-b641-62c394a100bb")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7914],{94413:(e,t,r)=>{var n,i=r(75417);self,e.exports=function(e){var t={5133:function(e){var t=1;function r(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}e.exports=function(e){return new Promise(function(n,i){var a=document.createElement("script"),s=e.url;if(e.params){var o=r(e.params);o&&(s+=(s.indexOf("?")>=0?"&":"?")+o)}function l(){a&&(a.onload=a.onreadystatechange=a.onerror=null,a.parentNode&&a.parentNode.removeChild(a),a=null)}a.async=!0;var c="axiosJsonpCallback"+t++,u=window[c],d=!1;window[c]=function(e){window[c]=u,d||n({data:e,status:200})};var f={_:(new Date).getTime()};f[e.callbackParamName||"callback"]=c,s+=(s.indexOf("?")>=0?"&":"?")+r(f),a.onload=a.onreadystatechange=function(){a.readyState&&!/loaded|complete/.test(a.readyState)||l()},a.onerror=function(){l(),i(Error("Network Error"))},e.cancelToken&&e.cancelToken.promise.then(function(e){a&&(d=!0,i(e))}),a.src=s,document.head.appendChild(a)})}},129:function(e,t,r){var n,i,a,s,o,l,c,u,d,f,p,h,x,b,g;n=r(2476),r(1716),r(5478),r(5516),r(9947),i=n.lib.BlockCipher,a=n.algo,s=[],o=[],l=[],c=[],u=[],d=[],f=[],p=[],h=[],x=[],function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,s[r]=i,o[i]=r;var a=e[r],b=e[a],g=e[b],m=257*e[i]^0x1010100*i;l[r]=m<<24|m>>>8,c[r]=m<<16|m>>>16,u[r]=m<<8|m>>>24,d[r]=m,m=0x1010101*g^65537*b^257*a^0x1010100*r,f[i]=m<<24|m>>>8,p[i]=m<<16|m>>>16,h[i]=m<<8|m>>>24,x[i]=m,r?(r=a^e[e[e[g^a]]],n^=e[e[n]]):r=n=1}}(),b=[0,1,2,4,8,16,32,64,128,27,54],g=a.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],a=0;a<n;a++)a<r?i[a]=t[a]:(c=i[a-1],a%r?r>6&&a%r==4&&(c=s[c>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c]):c=(s[(c=c<<8|c>>>24)>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c])^b[a/r|0]<<24,i[a]=i[a-r]^c);for(var o=this._invKeySchedule=[],l=0;l<n;l++){if(a=n-l,l%4)var c=i[a];else c=i[a-4];o[l]=l<4||a<=4?c:f[s[c>>>24]]^p[s[c>>>16&255]]^h[s[c>>>8&255]]^x[s[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,l,c,u,d,s)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,f,p,h,x,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,a,s,o){for(var l=this._nRounds,c=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],f=e[t+3]^r[3],p=4,h=1;h<l;h++){var x=n[c>>>24]^i[u>>>16&255]^a[d>>>8&255]^s[255&f]^r[p++],b=n[u>>>24]^i[d>>>16&255]^a[f>>>8&255]^s[255&c]^r[p++],g=n[d>>>24]^i[f>>>16&255]^a[c>>>8&255]^s[255&u]^r[p++],m=n[f>>>24]^i[c>>>16&255]^a[u>>>8&255]^s[255&d]^r[p++];c=x,u=b,d=g,f=m}x=(o[c>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&f])^r[p++],b=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[f>>>8&255]<<8|o[255&c])^r[p++],g=(o[d>>>24]<<24|o[f>>>16&255]<<16|o[c>>>8&255]<<8|o[255&u])^r[p++],m=(o[f>>>24]<<24|o[c>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^r[p++],e[t]=x,e[t+1]=b,e[t+2]=g,e[t+3]=m},keySize:8}),n.AES=i._createHelper(g),e.exports=n.AES},2770:function(e,t,r){var n;n=r(2476),r(1716),r(5478),r(5516),r(9947),function(){var e=n.lib.BlockCipher,t=n.algo;let r=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],i=[[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a],[0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7],[0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0],[0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6]];var a={pbox:[],sbox:[]};function s(e,t){let r=e.sbox[0][t>>24&255]+e.sbox[1][t>>16&255];return r^=e.sbox[2][t>>8&255],r+=e.sbox[3][255&t]}function o(e,t,r){let n,i=t,a=r;for(let t=0;t<16;++t)i^=e.pbox[t],a=s(e,i)^a,n=i,i=a,a=n;return n=i,i=a,a=n^e.pbox[16],{left:i^=e.pbox[17],right:a}}var l=t.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key;!function(e,t,n){for(let t=0;t<4;t++){e.sbox[t]=[];for(let r=0;r<256;r++)e.sbox[t][r]=i[t][r]}let a=0;for(let i=0;i<18;i++)e.pbox[i]=r[i]^t[a],++a>=n&&(a=0);let s=0,l=0,c=0;for(let t=0;t<18;t+=2)s=(c=o(e,s,l)).left,l=c.right,e.pbox[t]=s,e.pbox[t+1]=l;for(let t=0;t<4;t++)for(let r=0;r<256;r+=2)s=(c=o(e,s,l)).left,l=c.right,e.sbox[t][r]=s,e.sbox[t][r+1]=l}(a,e.words,e.sigBytes/4)}},encryptBlock:function(e,t){var r=o(a,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},decryptBlock:function(e,t){var r=function(e,t,r){let n,i=t,a=r;for(let t=17;t>1;--t)i^=e.pbox[t],a=s(e,i)^a,n=i,i=a,a=n;return n=i,i=a,a=n^e.pbox[1],{left:i^=e.pbox[0],right:a}}(a,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},blockSize:2,keySize:4,ivSize:2});n.Blowfish=e._createHelper(l)}(),e.exports=n.Blowfish},9947:function(e,t,r){var n,i,a,s,o,l,c,u,d,f,p,h,x,b,g,m,y,v;n=r(2476),r(5516),e.exports=void(n.lib.Cipher||(a=(i=n.lib).Base,s=i.WordArray,o=i.BufferedBlockAlgorithm,(l=n.enc).Utf8,c=l.Base64,u=n.algo.EvpKDF,d=i.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:m}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=n.mode={},p=i.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=f.CBC=function(){var e=p.extend();function t(e,t,r){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var a=0;a<r;a++)e[t+a]^=n[a]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,a=e.slice(r,r+i);n.decryptBlock(e,r),t.call(this,e,r,i),this._prevBlock=a}}),e}(),x=(n.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,a=[],o=0;o<n;o+=4)a.push(i);var l=s.create(a,n);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:h,padding:x}),reset:function(){d.reset.call(this);var e,t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),b=i.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?s.create([0x53616c74,0x65645f5f]).concat(r).concat(t):t).toString(c)},parse:function(e){var t,r=c.parse(e),n=r.words;return 0x53616c74==n[0]&&0x65645f5f==n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),b.create({ciphertext:r,salt:t})}},m=i.SerializableCipher=a.extend({cfg:a.extend({format:g}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),a=i.finalize(t),s=i.cfg;return b.create({ciphertext:a,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,r,n,i){if(n||(n=s.random(8)),i)a=u.create({keySize:t+r,hasher:i}).compute(e,n);else var a=u.create({keySize:t+r}).compute(e,n);var o=s.create(a.words.slice(t),4*r);return a.sigBytes=4*t,b.create({key:a,iv:o,salt:n})}},v=i.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=i.iv;var a=m.encrypt.call(this,e,t,i.key,n);return a.mixIn(i),a},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=i.iv,m.decrypt.call(this,e,t,i.key,n)}})))},2476:function(e,t,r){e.exports=function(e){if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(t=globalThis.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==r.g&&r.g.crypto&&(t=r.g.crypto),!t)try{t=r(7167)}catch(e){}var t,n=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},s=a.lib={},o=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a++){var s=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=s<<24-(n+a)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=0xffffffff<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new l.init(t,e)}}),c=a.enc={},u=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,a=n.sigBytes,s=this.blockSize,o=a/(4*s),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,u=e.min(4*c,a);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(i,d);r=i.splice(0,c),n.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(s.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}}),a.algo={});return a}(Math)},1716:function(e,t,r){var n,i;i=(n=r(2476)).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var s=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<r;o++)i.push(n.charAt(s>>>6*(3-o)&63));var l=n.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var a=0;a<r.length;a++)n[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var o=e.indexOf(s);-1!==o&&(t=o)}for(var l=t,c=n,u=[],d=0,f=0;f<l;f++)if(f%4){var p=c[e.charCodeAt(f-1)]<<f%4*2|c[e.charCodeAt(f)]>>>6-f%4*2;u[d>>>2]|=p<<24-d%4*8,d++}return i.create(u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=n.enc.Base64},7687:function(e,t,r){var n,i;i=(n=r(2476)).lib.WordArray,n.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var a=[],s=0;s<n;s+=3)for(var o=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,l=0;l<4&&s+.75*l<n;l++)a.push(i.charAt(o>>>6*(3-l)&63));var c=i.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e,t){void 0===t&&(t=!0);var r=e.length,n=t?this._safe_map:this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var s=0;s<n.length;s++)a[n.charCodeAt(s)]=s}var o=n.charAt(64);if(o){var l=e.indexOf(o);-1!==l&&(r=l)}for(var c=r,u=a,d=[],f=0,p=0;p<c;p++)if(p%4){var h=u[e.charCodeAt(p-1)]<<p%4*2|u[e.charCodeAt(p)]>>>6-p%4*2;d[f>>>2]|=h<<24-f%4*8,f++}return i.create(d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.exports=n.enc.Base64url},6729:function(e,t,r){var n;n=r(2476),function(){var e=n.lib.WordArray,t=n.enc;function r(e){return e<<8&0xff00ff00|e>>>8&0xff00ff}t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var a=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(a))}return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(n,2*r)}},t.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],a=0;a<n;a+=2){var s=r(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var n=t.length,i=[],a=0;a<n;a++)i[a>>>1]|=r(t.charCodeAt(a)<<16-a%2*16);return e.create(i,2*n)}}}(),e.exports=n.enc.Utf16},5516:function(e,t,r){var n,i,a,s,o,l,c;c=r(2476),r(1825),r(5979),i=(n=c.lib).Base,a=n.WordArray,o=(s=c.algo).MD5,l=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),s=a.create(),o=s.words,l=n.keySize,c=n.iterations;o.length<l;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var u=1;u<c;u++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*l,s}}),c.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)},e.exports=c.EvpKDF},635:function(e,t,r){var n,i,a;a=r(2476),r(9947),n=a.lib.CipherParams,i=a.enc.Hex,a.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return n.create({ciphertext:t})}},e.exports=a.format.Hex},5979:function(e,t,r){var n,i,a;i=(n=r(2476)).lib.Base,a=n.enc.Utf8,e.exports=void(n.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),o=i.words,l=s.words,c=0;c<r;c++)o[c]^=0x5c5c5c5c,l[c]^=0x36363636;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}))},7594:function(e,t,r){var n;n=r(2476),r(2478),r(4842),r(6729),r(1716),r(7687),r(5478),r(1825),r(9331),r(4174),r(6018),r(2963),r(6303),r(7442),r(5979),r(4673),r(5516),r(9947),r(2375),r(9141),r(6014),r(4867),r(5760),r(4223),r(4236),r(6600),r(4537),r(5513),r(635),r(129),r(4902),r(6123),r(4324),r(7126),r(2770),e.exports=n},4842:function(e,t,r){var n;n=r(2476),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=e[i]<<24-i%4*8;t.call(this,n,r)}else t.apply(this,arguments)}).prototype=e}}(),e.exports=n.lib.WordArray},5478:function(e,t,r){var n;n=r(2476),function(e){for(var t=n.lib,r=t.WordArray,i=t.Hasher,a=n.algo,s=[],o=0;o<64;o++)s[o]=0x100000000*e.abs(e.sin(o+1))|0;var l=a.MD5=i.extend({_doReset:function(){this._hash=new r.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=0xff00ff&(i<<8|i>>>24)|0xff00ff00&(i<<24|i>>>8)}var a=this._hash.words,o=e[t+0],l=e[t+1],p=e[t+2],h=e[t+3],x=e[t+4],b=e[t+5],g=e[t+6],m=e[t+7],y=e[t+8],v=e[t+9],w=e[t+10],P=e[t+11],C=e[t+12],S=e[t+13],_=e[t+14],k=e[t+15],A=a[0],E=a[1],T=a[2],D=a[3];A=c(A,E,T,D,o,7,s[0]),D=c(D,A,E,T,l,12,s[1]),T=c(T,D,A,E,p,17,s[2]),E=c(E,T,D,A,h,22,s[3]),A=c(A,E,T,D,x,7,s[4]),D=c(D,A,E,T,b,12,s[5]),T=c(T,D,A,E,g,17,s[6]),E=c(E,T,D,A,m,22,s[7]),A=c(A,E,T,D,y,7,s[8]),D=c(D,A,E,T,v,12,s[9]),T=c(T,D,A,E,w,17,s[10]),E=c(E,T,D,A,P,22,s[11]),A=c(A,E,T,D,C,7,s[12]),D=c(D,A,E,T,S,12,s[13]),T=c(T,D,A,E,_,17,s[14]),A=u(A,E=c(E,T,D,A,k,22,s[15]),T,D,l,5,s[16]),D=u(D,A,E,T,g,9,s[17]),T=u(T,D,A,E,P,14,s[18]),E=u(E,T,D,A,o,20,s[19]),A=u(A,E,T,D,b,5,s[20]),D=u(D,A,E,T,w,9,s[21]),T=u(T,D,A,E,k,14,s[22]),E=u(E,T,D,A,x,20,s[23]),A=u(A,E,T,D,v,5,s[24]),D=u(D,A,E,T,_,9,s[25]),T=u(T,D,A,E,h,14,s[26]),E=u(E,T,D,A,y,20,s[27]),A=u(A,E,T,D,S,5,s[28]),D=u(D,A,E,T,p,9,s[29]),T=u(T,D,A,E,m,14,s[30]),A=d(A,E=u(E,T,D,A,C,20,s[31]),T,D,b,4,s[32]),D=d(D,A,E,T,y,11,s[33]),T=d(T,D,A,E,P,16,s[34]),E=d(E,T,D,A,_,23,s[35]),A=d(A,E,T,D,l,4,s[36]),D=d(D,A,E,T,x,11,s[37]),T=d(T,D,A,E,m,16,s[38]),E=d(E,T,D,A,w,23,s[39]),A=d(A,E,T,D,S,4,s[40]),D=d(D,A,E,T,o,11,s[41]),T=d(T,D,A,E,h,16,s[42]),E=d(E,T,D,A,g,23,s[43]),A=d(A,E,T,D,v,4,s[44]),D=d(D,A,E,T,C,11,s[45]),T=d(T,D,A,E,k,16,s[46]),A=f(A,E=d(E,T,D,A,p,23,s[47]),T,D,o,6,s[48]),D=f(D,A,E,T,m,10,s[49]),T=f(T,D,A,E,_,15,s[50]),E=f(E,T,D,A,b,21,s[51]),A=f(A,E,T,D,C,6,s[52]),D=f(D,A,E,T,h,10,s[53]),T=f(T,D,A,E,w,15,s[54]),E=f(E,T,D,A,l,21,s[55]),A=f(A,E,T,D,y,6,s[56]),D=f(D,A,E,T,k,10,s[57]),T=f(T,D,A,E,g,15,s[58]),E=f(E,T,D,A,S,21,s[59]),A=f(A,E,T,D,x,6,s[60]),D=f(D,A,E,T,P,10,s[61]),T=f(T,D,A,E,p,15,s[62]),E=f(E,T,D,A,v,21,s[63]),a[0]=a[0]+A|0,a[1]=a[1]+E|0,a[2]=a[2]+T|0,a[3]=a[3]+D|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var a=e.floor(n/0x100000000);r[15+(i+64>>>9<<4)]=0xff00ff&(a<<8|a>>>24)|0xff00ff00&(a<<24|a>>>8),r[14+(i+64>>>9<<4)]=0xff00ff&(n<<8|n>>>24)|0xff00ff00&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,o=s.words,l=0;l<4;l++){var c=o[l];o[l]=0xff00ff&(c<<8|c>>>24)|0xff00ff00&(c<<24|c>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,r,n,i,a,s){var o=e+(t&r|~t&n)+i+s;return(o<<a|o>>>32-a)+t}function u(e,t,r,n,i,a,s){var o=e+(t&n|r&~n)+i+s;return(o<<a|o>>>32-a)+t}function d(e,t,r,n,i,a,s){var o=e+(t^r^n)+i+s;return(o<<a|o>>>32-a)+t}function f(e,t,r,n,i,a,s){var o=e+(r^(t|~n))+i+s;return(o<<a|o>>>32-a)+t}n.MD5=i._createHelper(l),n.HmacMD5=i._createHmacHelper(l)}(Math),e.exports=n.MD5},2375:function(e,t,r){var n;n=r(2476),r(9947),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,r,n){var i,a=this._iv;a?(i=a.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,a=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=a}}),e}(),e.exports=n.mode.CFB},6014:function(e,t,r){var n;n=r(2476),r(9947),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255&~(e>>24))e+=0x1000000;else{var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0+(t<<16)+(r<<8)+n}return e}var r=e.Encryptor=e.extend({processBlock:function(e,r){var n,i=this._cipher,a=i.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),0===((n=o)[0]=t(n[0]))&&(n[1]=t(n[1]));var l=o.slice(0);i.encryptBlock(l,0);for(var c=0;c<a;c++)e[r+c]^=l[c]}});return e.Decryptor=r,e}(),e.exports=n.mode.CTRGladman},9141:function(e,t,r){var n,i,a;a=r(2476),r(9947),a.mode.CTR=(i=(n=a.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var s=a.slice(0);r.encryptBlock(s,0),a[n-1]=a[n-1]+1|0;for(var o=0;o<n;o++)e[t+o]^=s[o]}}),n.Decryptor=i,n),e.exports=a.mode.CTR},5760:function(e,t,r){var n,i;i=r(2476),r(9947),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),e.exports=i.mode.ECB},4867:function(e,t,r){var n,i,a;a=r(2476),r(9947),a.mode.OFB=(i=(n=a.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var s=0;s<n;s++)e[t+s]^=a[s]}}),n.Decryptor=i,n),e.exports=a.mode.OFB},4223:function(e,t,r){var n;n=r(2476),r(9947),n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,a=r+i-1;e.clamp(),e.words[a>>>2]|=i<<24-a%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.exports=n.pad.Ansix923},4236:function(e,t,r){var n;n=r(2476),r(9947),n.pad.Iso10126={pad:function(e,t){var r=4*t,i=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.exports=n.pad.Iso10126},6600:function(e,t,r){var n;n=r(2476),r(9947),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([0x80000000],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},e.exports=n.pad.Iso97971},5513:function(e,t,r){var n;n=r(2476),r(9947),n.pad.NoPadding={pad:function(){},unpad:function(){}},e.exports=n.pad.NoPadding},4537:function(e,t,r){var n;n=r(2476),r(9947),n.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},e.exports=n.pad.ZeroPadding},4673:function(e,t,r){var n,i,a,s,o,l,c,u;u=r(2476),r(9331),r(5979),i=(n=u.lib).Base,a=n.WordArray,o=(s=u.algo).SHA256,l=s.HMAC,c=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=l.create(r.hasher,e),i=a.create(),s=a.create([1]),o=i.words,c=s.words,u=r.keySize,d=r.iterations;o.length<u;){var f=n.update(t).finalize(s);n.reset();for(var p=f.words,h=p.length,x=f,b=1;b<d;b++){x=n.finalize(x),n.reset();for(var g=x.words,m=0;m<h;m++)p[m]^=g[m]}i.concat(f),c[0]++}return i.sigBytes=4*u,i}}),u.PBKDF2=function(e,t,r){return c.create(r).compute(e,t)},e.exports=u.PBKDF2},7126:function(e,t,r){var n;n=r(2476),r(1716),r(5478),r(5516),r(9947),function(){var e=n.lib.StreamCipher,t=n.algo,r=[],i=[],a=[],s=t.RabbitLegacy=e.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,0xffff0000&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,0xffff0000&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,0xffff0000&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,0xffff0000&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)o.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var a=t.words,s=a[0],l=a[1],c=0xff00ff&(s<<8|s>>>24)|0xff00ff00&(s<<24|s>>>8),u=0xff00ff&(l<<8|l>>>24)|0xff00ff00&(l<<24|l>>>8),d=c>>>16|0xffff0000&u,f=u<<16|65535&c;for(n[0]^=c,n[1]^=d,n[2]^=u,n[3]^=f,n[4]^=c,n[5]^=d,n[6]^=u,n[7]^=f,i=0;i<4;i++)o.call(this)}},_doProcessBlock:function(e,t){var n=this._X;o.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=0xff00ff&(r[i]<<8|r[i]>>>24)|0xff00ff00&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+0x4d34d34d+this._b|0,t[1]=t[1]+0xd34d34d3+ +(t[0]>>>0<i[0]>>>0)|0,t[2]=t[2]+0x34d34d34+ +(t[1]>>>0<i[1]>>>0)|0,t[3]=t[3]+0x4d34d34d+ +(t[2]>>>0<i[2]>>>0)|0,t[4]=t[4]+0xd34d34d3+ +(t[3]>>>0<i[3]>>>0)|0,t[5]=t[5]+0x34d34d34+ +(t[4]>>>0<i[4]>>>0)|0,t[6]=t[6]+0x4d34d34d+ +(t[5]>>>0<i[5]>>>0)|0,t[7]=t[7]+0xd34d34d3+ +(t[6]>>>0<i[6]>>>0)|0,this._b=+(t[7]>>>0<i[7]>>>0),r=0;r<8;r++){var n=e[r]+t[r],s=65535&n,o=n>>>16,l=((s*s>>>17)+s*o>>>15)+o*o,c=((0xffff0000&n)*n|0)+((65535&n)*n|0);a[r]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}n.RabbitLegacy=e._createHelper(s)}(),e.exports=n.RabbitLegacy},4324:function(e,t,r){var n;n=r(2476),r(1716),r(5478),r(5516),r(9947),function(){var e=n.lib.StreamCipher,t=n.algo,r=[],i=[],a=[],s=t.Rabbit=e.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=0xff00ff&(e[r]<<8|e[r]>>>24)|0xff00ff00&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,0xffff0000&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,0xffff0000&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,0xffff0000&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,0xffff0000&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)o.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var a=t.words,s=a[0],l=a[1],c=0xff00ff&(s<<8|s>>>24)|0xff00ff00&(s<<24|s>>>8),u=0xff00ff&(l<<8|l>>>24)|0xff00ff00&(l<<24|l>>>8),d=c>>>16|0xffff0000&u,f=u<<16|65535&c;for(i[0]^=c,i[1]^=d,i[2]^=u,i[3]^=f,i[4]^=c,i[5]^=d,i[6]^=u,i[7]^=f,r=0;r<4;r++)o.call(this)}},_doProcessBlock:function(e,t){var n=this._X;o.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=0xff00ff&(r[i]<<8|r[i]>>>24)|0xff00ff00&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,r=0;r<8;r++)i[r]=t[r];for(t[0]=t[0]+0x4d34d34d+this._b|0,t[1]=t[1]+0xd34d34d3+ +(t[0]>>>0<i[0]>>>0)|0,t[2]=t[2]+0x34d34d34+ +(t[1]>>>0<i[1]>>>0)|0,t[3]=t[3]+0x4d34d34d+ +(t[2]>>>0<i[2]>>>0)|0,t[4]=t[4]+0xd34d34d3+ +(t[3]>>>0<i[3]>>>0)|0,t[5]=t[5]+0x34d34d34+ +(t[4]>>>0<i[4]>>>0)|0,t[6]=t[6]+0x4d34d34d+ +(t[5]>>>0<i[5]>>>0)|0,t[7]=t[7]+0xd34d34d3+ +(t[6]>>>0<i[6]>>>0)|0,this._b=+(t[7]>>>0<i[7]>>>0),r=0;r<8;r++){var n=e[r]+t[r],s=65535&n,o=n>>>16,l=((s*s>>>17)+s*o>>>15)+o*o,c=((0xffff0000&n)*n|0)+((65535&n)*n|0);a[r]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}n.Rabbit=e._createHelper(s)}(),e.exports=n.Rabbit},6123:function(e,t,r){var n;n=r(2476),r(1716),r(5478),r(5516),r(9947),function(){var e=n.lib.StreamCipher,t=n.algo,r=t.RC4=e.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var a=0;i<256;i++){var s=i%r,o=t[s>>>2]>>>24-s%4*8&255;a=(a+n[i]+o)%256;var l=n[i];n[i]=n[a],n[a]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[r],e[r]=a,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}n.RC4=e._createHelper(r);var a=t.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});n.RC4Drop=e._createHelper(a)}(),e.exports=n.RC4},7442:function(e,t,r){var n;n=r(2476),function(){var e=n.lib,t=e.WordArray,r=e.Hasher,i=n.algo,a=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=t.create([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),u=t.create([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),d=i.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var r,n,i,d,p,h,x,b,g=0;g<16;g++){var m=t+g,y=e[m];e[m]=0xff00ff&(y<<8|y>>>24)|0xff00ff00&(y<<24|y>>>8)}var v,w,P,C,S,_,k,A,E,T,D,R=this._hash.words,M=c.words,B=u.words,$=a.words,F=s.words,I=o.words,O=l.words;for(_=v=R[0],k=w=R[1],A=P=R[2],E=C=R[3],T=S=R[4],g=0;g<80;g+=1){D=(D=f(D=(v+e[t+$[g]]|0)+(g<16?(w^P^C)+M[0]:g<32?((r=w)&P|~r&C)+M[1]:g<48?((w|~P)^C)+M[2]:g<64?(n=w,i=P,(n&(d=C)|i&~d)+M[3]):(w^(P|~C))+M[4])|0,I[g]))+S|0,v=S,S=C,C=f(P,10),P=w,w=D,D=(D=f(D=(_+e[t+F[g]]|0)+(g<16?(k^(A|~E))+B[0]:g<32?(p=k,h=A,(p&(x=E)|h&~x)+B[1]):g<48?((k|~A)^E)+B[2]:g<64?((b=k)&A|~b&E)+B[3]:(k^A^E)+B[4])|0,O[g]))+T|0,_=T,T=E,E=f(A,10),A=k,k=D}D=R[1]+P+E|0,R[1]=R[2]+C+T|0,R[2]=R[3]+S+_|0,R[3]=R[4]+v+k|0,R[4]=R[0]+w+A|0,R[0]=D},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=0xff00ff&(r<<8|r>>>24)|0xff00ff00&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,a=i.words,s=0;s<5;s++){var o=a[s];a[s]=0xff00ff&(o<<8|o>>>24)|0xff00ff00&(o<<24|o>>>8)}return i},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t){return e<<t|e>>>32-t}n.RIPEMD160=r._createHelper(d),n.HmacRIPEMD160=r._createHmacHelper(d)}(Math),e.exports=n.RIPEMD160},1825:function(e,t,r){var n,i,a,s,o,l,c,u;a=(i=(n=u=r(2476)).lib).WordArray,s=i.Hasher,o=n.algo,l=[],c=o.SHA1=s.extend({_doReset:function(){this._hash=new a.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],s=r[3],o=r[4],c=0;c<80;c++){if(c<16)l[c]=0|e[t+c];else{var u=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=u<<1|u>>>31}var d=(n<<5|n>>>27)+o+l[c];d+=c<20?0x5a827999+(i&a|~i&s):c<40?0x6ed9eba1+(i^a^s):c<60?(i&a|i&s|a&s)-0x70e44324:(i^a^s)-0x359d3e2a,o=s,s=a,a=i<<30|i>>>2,i=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/0x100000000),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=s._createHelper(c),n.HmacSHA1=s._createHmacHelper(c),e.exports=u.SHA1},4174:function(e,t,r){var n,i,a,s,o;o=r(2476),r(9331),n=o.lib.WordArray,a=(i=o.algo).SHA256,s=i.SHA224=a.extend({_doReset:function(){this._hash=new n.init([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),o.SHA224=a._createHelper(s),o.HmacSHA224=a._createHmacHelper(s),e.exports=o.SHA224},9331:function(e,t,r){var n;n=r(2476),function(e){var t=n.lib,r=t.WordArray,i=t.Hasher,a=n.algo,s=[],o=[];function l(e){return 0x100000000*(e-(0|e))|0}for(var c=2,u=0;u<64;)(function(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0})(c)&&(u<8&&(s[u]=l(e.pow(c,.5))),o[u]=l(e.pow(c,1/3)),u++),c++;var d=[],f=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],p=0;p<64;p++){if(p<16)d[p]=0|e[t+p];else{var h=d[p-15],x=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,b=d[p-2],g=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;d[p]=x+d[p-7]+g+d[p-16]}var m=n&i^n&a^i&a,y=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=f+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&u)+o[p]+d[p];f=u,u=c,c=l,l=s+v|0,s=a,a=i,i=n,n=v+(y+m)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0,r[5]=r[5]+c|0,r[6]=r[6]+u|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/0x100000000),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(f),n.HmacSHA256=i._createHmacHelper(f)}(Math),e.exports=n.SHA256},6303:function(e,t,r){var n;n=r(2476),r(2478),function(e){var t=n.lib,r=t.WordArray,i=t.Hasher,a=n.x64.Word,s=n.algo,o=[],l=[],c=[];!function(){for(var e=1,t=0,r=0;r<24;r++){o[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,s=0;s<24;s++){for(var u=0,d=0,f=0;f<7;f++){if(1&i){var p=(1<<f)-1;p<32?d^=1<<p:u^=1<<p-32}128&i?i=i<<1^113:i<<=1}c[s]=a.create(u,d)}}();for(var u=[],d=0;d<25;d++)u[d]=a.create();var f=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var a=e[t+2*i],s=e[t+2*i+1];a=0xff00ff&(a<<8|a>>>24)|0xff00ff00&(a<<24|a>>>8),s=0xff00ff&(s<<8|s>>>24)|0xff00ff00&(s<<24|s>>>8),(E=r[i]).high^=s,E.low^=a}for(var d=0;d<24;d++){for(var f=0;f<5;f++){for(var p=0,h=0,x=0;x<5;x++)p^=(E=r[f+5*x]).high,h^=E.low;var b=u[f];b.high=p,b.low=h}for(f=0;f<5;f++){var g=u[(f+4)%5],m=u[(f+1)%5],y=m.high,v=m.low;for(p=g.high^(y<<1|v>>>31),h=g.low^(v<<1|y>>>31),x=0;x<5;x++)(E=r[f+5*x]).high^=p,E.low^=h}for(var w=1;w<25;w++){var P=(E=r[w]).high,C=E.low,S=o[w];S<32?(p=P<<S|C>>>32-S,h=C<<S|P>>>32-S):(p=C<<S-32|P>>>64-S,h=P<<S-32|C>>>64-S);var _=u[l[w]];_.high=p,_.low=h}var k=u[0],A=r[0];for(k.high=A.high,k.low=A.low,f=0;f<5;f++)for(x=0;x<5;x++){var E=r[w=f+5*x],T=u[w],D=u[(f+1)%5+5*x],R=u[(f+2)%5+5*x];E.high=T.high^~D.high&R.high,E.low=T.low^~D.low&R.low}E=r[0];var M=c[d];E.high^=M.high,E.low^=M.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,o=this.cfg.outputLength/8,l=o/8,c=[],u=0;u<l;u++){var d=s[u],f=d.high,p=d.low;f=0xff00ff&(f<<8|f>>>24)|0xff00ff00&(f<<24|f>>>8),p=0xff00ff&(p<<8|p>>>24)|0xff00ff00&(p<<24|p>>>8),c.push(p),c.push(f)}return new r.init(c,o)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});n.SHA3=i._createHelper(f),n.HmacSHA3=i._createHmacHelper(f)}(Math),e.exports=n.SHA3},2963:function(e,t,r){var n,i,a,s,o,l,c;c=r(2476),r(2478),r(6018),i=(n=c.x64).Word,a=n.WordArray,o=(s=c.algo).SHA512,l=s.SHA384=o.extend({_doReset:function(){this._hash=new a.init([new i.init(0xcbbb9d5d,0xc1059ed8),new i.init(0x629a292a,0x367cd507),new i.init(0x9159015a,0x3070dd17),new i.init(0x152fecd8,0xf70e5939),new i.init(0x67332667,0xffc00b31),new i.init(0x8eb44a87,0x68581511),new i.init(0xdb0c2e0d,0x64f98fa7),new i.init(0x47b5481d,0xbefa4fa4)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),c.SHA384=o._createHelper(l),c.HmacSHA384=o._createHmacHelper(l),e.exports=c.SHA384},6018:function(e,t,r){var n;n=r(2476),r(2478),function(){var e=n.lib.Hasher,t=n.x64,r=t.Word,i=t.WordArray,a=n.algo;function s(){return r.create.apply(r,arguments)}for(var o=[s(0x428a2f98,0xd728ae22),s(0x71374491,0x23ef65cd),s(0xb5c0fbcf,0xec4d3b2f),s(0xe9b5dba5,0x8189dbbc),s(0x3956c25b,0xf348b538),s(0x59f111f1,0xb605d019),s(0x923f82a4,0xaf194f9b),s(0xab1c5ed5,0xda6d8118),s(0xd807aa98,0xa3030242),s(0x12835b01,0x45706fbe),s(0x243185be,0x4ee4b28c),s(0x550c7dc3,0xd5ffb4e2),s(0x72be5d74,0xf27b896f),s(0x80deb1fe,0x3b1696b1),s(0x9bdc06a7,0x25c71235),s(0xc19bf174,0xcf692694),s(0xe49b69c1,0x9ef14ad2),s(0xefbe4786,0x384f25e3),s(0xfc19dc6,0x8b8cd5b5),s(0x240ca1cc,0x77ac9c65),s(0x2de92c6f,0x592b0275),s(0x4a7484aa,0x6ea6e483),s(0x5cb0a9dc,0xbd41fbd4),s(0x76f988da,0x831153b5),s(0x983e5152,0xee66dfab),s(0xa831c66d,0x2db43210),s(0xb00327c8,0x98fb213f),s(0xbf597fc7,0xbeef0ee4),s(0xc6e00bf3,0x3da88fc2),s(0xd5a79147,0x930aa725),s(0x6ca6351,0xe003826f),s(0x14292967,0xa0e6e70),s(0x27b70a85,0x46d22ffc),s(0x2e1b2138,0x5c26c926),s(0x4d2c6dfc,0x5ac42aed),s(0x53380d13,0x9d95b3df),s(0x650a7354,0x8baf63de),s(0x766a0abb,0x3c77b2a8),s(0x81c2c92e,0x47edaee6),s(0x92722c85,0x1482353b),s(0xa2bfe8a1,0x4cf10364),s(0xa81a664b,0xbc423001),s(0xc24b8b70,0xd0f89791),s(0xc76c51a3,0x654be30),s(0xd192e819,0xd6ef5218),s(0xd6990624,0x5565a910),s(0xf40e3585,0x5771202a),s(0x106aa070,0x32bbd1b8),s(0x19a4c116,0xb8d2d0c8),s(0x1e376c08,0x5141ab53),s(0x2748774c,0xdf8eeb99),s(0x34b0bcb5,0xe19b48a8),s(0x391c0cb3,0xc5c95a63),s(0x4ed8aa4a,0xe3418acb),s(0x5b9cca4f,0x7763e373),s(0x682e6ff3,0xd6b2b8a3),s(0x748f82ee,0x5defb2fc),s(0x78a5636f,0x43172f60),s(0x84c87814,0xa1f0ab72),s(0x8cc70208,0x1a6439ec),s(0x90befffa,0x23631e28),s(0xa4506ceb,0xde82bde9),s(0xbef9a3f7,0xb2c67915),s(0xc67178f2,0xe372532b),s(0xca273ece,0xea26619c),s(0xd186b8c7,0x21c0c207),s(0xeada7dd6,0xcde0eb1e),s(0xf57d4f7f,0xee6ed178),s(0x6f067aa,0x72176fba),s(0xa637dc5,0xa2c898a6),s(0x113f9804,0xbef90dae),s(0x1b710b35,0x131c471b),s(0x28db77f5,0x23047d84),s(0x32caab7b,0x40c72493),s(0x3c9ebe0a,0x15c9bebc),s(0x431d67c4,0x9c100d4c),s(0x4cc5d4be,0xcb3e42b6),s(0x597f299c,0xfc657e2a),s(0x5fcb6fab,0x3ad6faec),s(0x6c44198c,0x4a475817)],l=[],c=0;c<80;c++)l[c]=s();var u=a.SHA512=e.extend({_doReset:function(){this._hash=new i.init([new r.init(0x6a09e667,0xf3bcc908),new r.init(0xbb67ae85,0x84caa73b),new r.init(0x3c6ef372,0xfe94f82b),new r.init(0xa54ff53a,0x5f1d36f1),new r.init(0x510e527f,0xade682d1),new r.init(0x9b05688c,0x2b3e6c1f),new r.init(0x1f83d9ab,0xfb41bd6b),new r.init(0x5be0cd19,0x137e2179)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],s=r[3],c=r[4],u=r[5],d=r[6],f=r[7],p=n.high,h=n.low,x=i.high,b=i.low,g=a.high,m=a.low,y=s.high,v=s.low,w=c.high,P=c.low,C=u.high,S=u.low,_=d.high,k=d.low,A=f.high,E=f.low,T=p,D=h,R=x,M=b,B=g,$=m,F=y,I=v,O=w,L=P,U=C,N=S,j=_,H=k,W=A,Y=E,G=0;G<80;G++){var z,V,q=l[G];if(G<16)V=q.high=0|e[t+2*G],z=q.low=0|e[t+2*G+1];else{var K=l[G-15],J=K.high,X=K.low,Z=(J>>>1|X<<31)^(J>>>8|X<<24)^J>>>7,Q=(X>>>1|J<<31)^(X>>>8|J<<24)^(X>>>7|J<<25),ee=l[G-2],et=ee.high,er=ee.low,en=(et>>>19|er<<13)^(et<<3|er>>>29)^et>>>6,ei=(er>>>19|et<<13)^(er<<3|et>>>29)^(er>>>6|et<<26),ea=l[G-7],es=ea.high,eo=ea.low,el=l[G-16],ec=el.high,eu=el.low;q.high=V=(V=(V=Z+es+ +((z=Q+eo)>>>0<Q>>>0))+en+ +((z+=ei)>>>0<ei>>>0))+ec+ +((z+=eu)>>>0<eu>>>0),q.low=z}var ed,ef=O&U^~O&j,ep=L&N^~L&H,eh=T&R^T&B^R&B,ex=D&M^D&$^M&$,eb=(T>>>28|D<<4)^(T<<30|D>>>2)^(T<<25|D>>>7),eg=(D>>>28|T<<4)^(D<<30|T>>>2)^(D<<25|T>>>7),em=(O>>>14|L<<18)^(O>>>18|L<<14)^(O<<23|L>>>9),ey=(L>>>14|O<<18)^(L>>>18|O<<14)^(L<<23|O>>>9),ev=o[G],ew=ev.high,eP=ev.low,eC=W+em+ +((ed=Y+ey)>>>0<Y>>>0),eS=eg+ex;W=j,Y=H,j=U,H=N,U=O,N=L,O=F+(eC=(eC=(eC=eC+ef+ +((ed+=ep)>>>0<ep>>>0))+ew+ +((ed+=eP)>>>0<eP>>>0))+V+ +((ed+=z)>>>0<z>>>0))+ +((L=I+ed|0)>>>0<I>>>0)|0,F=B,I=$,B=R,$=M,R=T,M=D,T=eC+(eb+eh+ +(eS>>>0<eg>>>0))+ +((D=ed+eS|0)>>>0<ed>>>0)|0}h=n.low=h+D,n.high=p+T+ +(h>>>0<D>>>0),b=i.low=b+M,i.high=x+R+ +(b>>>0<M>>>0),m=a.low=m+$,a.high=g+B+ +(m>>>0<$>>>0),v=s.low=v+I,s.high=y+F+ +(v>>>0<I>>>0),P=c.low=P+L,c.high=w+O+ +(P>>>0<L>>>0),S=u.low=S+N,u.high=C+U+ +(S>>>0<N>>>0),k=d.low=k+H,d.high=_+j+ +(k>>>0<H>>>0),E=f.low=E+Y,f.high=A+W+ +(E>>>0<Y>>>0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/0x100000000),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=e._createHelper(u),n.HmacSHA512=e._createHmacHelper(u)}(),e.exports=n.SHA512},4902:function(e,t,r){var n;n=r(2476),r(1716),r(5478),r(5516),r(9947),function(){var e=n.lib,t=e.WordArray,r=e.BlockCipher,i=n.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],o=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,0x10000000:32768,0x20000000:8421378,0x30000000:2,0x40000000:512,0x50000000:8421890,0x60000000:8389122,0x70000000:8388608,0x80000000:514,0x90000000:8389120,0xa0000000:33280,0xb0000000:8421376,0xc0000000:32770,0xd0000000:8388610,0xe0000000:0,0xf0000000:33282,0x8000000:0,0x18000000:8421890,0x28000000:33282,0x38000000:32768,0x48000000:8421888,0x58000000:512,0x68000000:8421378,0x78000000:2,0x88000000:8389120,0x98000000:33280,0xa8000000:8421376,0xb8000000:8389122,0xc8000000:8388610,0xd8000000:32770,0xe8000000:514,0xf8000000:8388608,1:32768,0x10000001:2,0x20000001:8421888,0x30000001:8388608,0x40000001:8421378,0x50000001:33280,0x60000001:512,0x70000001:8389122,0x80000001:8421890,0x90000001:8421376,0xa0000001:8388610,0xb0000001:33282,0xc0000001:514,0xd0000001:8389120,0xe0000001:32770,0xf0000001:0,0x8000001:8421890,0x18000001:8421376,0x28000001:8388608,0x38000001:512,0x48000001:32768,0x58000001:8388610,0x68000001:2,0x78000001:33282,0x88000001:32770,0x98000001:8389122,0xa8000001:514,0xb8000001:8421888,0xc8000001:8389120,0xd8000001:0,0xe8000001:33280,0xf8000001:8421378},{0:0x40084010,0x1000000:16384,0x2000000:524288,0x3000000:0x40080010,0x4000000:0x40000010,0x5000000:0x40084000,0x6000000:0x40004000,0x7000000:16,0x8000000:540672,0x9000000:0x40004010,0xa000000:0x40000000,0xb000000:540688,0xc000000:524304,0xd000000:0,0xe000000:16400,0xf000000:0x40080000,8388608:0x40004000,0x1800000:540688,0x2800000:16,0x3800000:0x40004010,0x4800000:0x40084010,0x5800000:0x40000000,0x6800000:524288,0x7800000:0x40080010,0x8800000:524304,0x9800000:0,0xa800000:16384,0xb800000:0x40080000,0xc800000:0x40000010,0xd800000:540672,0xe800000:0x40084000,0xf800000:16400,0x10000000:0,0x11000000:0x40080010,0x12000000:0x40004010,0x13000000:0x40084000,0x14000000:0x40080000,0x15000000:16,0x16000000:540688,0x17000000:16384,0x18000000:16400,0x19000000:524288,0x1a000000:524304,0x1b000000:0x40000010,0x1c000000:540672,0x1d000000:0x40004000,0x1e000000:0x40000000,0x1f000000:0x40084010,0x10800000:540688,0x11800000:524288,0x12800000:0x40080000,0x13800000:16384,0x14800000:0x40004000,0x15800000:0x40084010,0x16800000:16,0x17800000:0x40000000,0x18800000:0x40084000,0x19800000:0x40000010,0x1a800000:0x40004010,0x1b800000:524304,0x1c800000:0,0x1d800000:16400,0x1e800000:0x40080010,0x1f800000:540672},{0:260,1048576:0,2097152:0x4000100,3145728:65796,4194304:65540,5242880:0x4000004,6291456:0x4010104,7340032:0x4010000,8388608:0x4000000,9437184:0x4010100,0xa00000:65792,0xb00000:0x4010004,0xc00000:0x4000104,0xd00000:65536,0xe00000:4,0xf00000:256,524288:0x4010100,1572864:0x4010004,2621440:0,3670016:0x4000100,4718592:0x4000004,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,0xa80000:0x4010000,0xb80000:65796,0xc80000:65792,0xd80000:0x4000104,0xe80000:0x4010104,0xf80000:0x4000000,0x1000000:0x4010100,0x1100000:65540,0x1200000:65536,0x1300000:0x4000100,0x1400000:256,0x1500000:0x4010104,0x1600000:0x4000004,0x1700000:0,0x1800000:0x4000104,0x1900000:0x4000000,0x1a00000:4,0x1b00000:65792,0x1c00000:0x4010000,0x1d00000:260,0x1e00000:65796,0x1f00000:0x4010004,0x1080000:0x4000000,0x1180000:260,0x1280000:0x4010100,0x1380000:0,0x1480000:65540,0x1580000:0x4000100,0x1680000:256,0x1780000:0x4010004,0x1880000:65536,0x1980000:0x4010104,0x1a80000:65796,0x1b80000:0x4000004,0x1c80000:0x4000104,0x1d80000:0x4010000,0x1e80000:4,0x1f80000:65792},{0:0x80401000,65536:0x80001040,131072:4198464,196608:0x80400000,262144:0,327680:4198400,393216:0x80000040,458752:4194368,524288:0x80000000,589824:4194304,655360:64,720896:0x80001000,786432:0x80400040,851968:4160,917504:4096,983040:0x80401040,32768:0x80001040,98304:64,163840:0x80400040,229376:0x80001000,294912:4198400,360448:0x80401040,425984:0,491520:0x80400000,557056:4096,622592:0x80401000,688128:4194304,753664:4160,819200:0x80000000,884736:4194368,950272:4198464,1015808:0x80000040,1048576:4194368,1114112:4198400,1179648:0x80000040,1245184:0,1310720:4160,1376256:0x80400040,1441792:0x80401000,1507328:0x80001040,1572864:0x80401040,1638400:0x80000000,1703936:0x80400000,1769472:4198464,1835008:0x80001000,1900544:4194304,1966080:64,2031616:4096,1081344:0x80400000,1146880:0x80401040,1212416:0,1277952:4198400,1343488:4194368,1409024:0x80000000,1474560:0x80001040,1540096:64,1605632:0x80000040,1671168:4096,1736704:0x80001000,1802240:0x80400040,1867776:4160,1933312:0x80401000,1998848:4194304,2064384:4198464},{0:128,4096:0x1040000,8192:262144,12288:0x20000000,16384:0x20040080,20480:0x1000080,24576:0x21000080,28672:262272,32768:0x1000000,36864:0x20040000,40960:0x20000080,45056:0x21040080,49152:0x21040000,53248:0,57344:0x1040080,61440:0x21000000,2048:0x1040080,6144:0x21000080,10240:128,14336:0x1040000,18432:262144,22528:0x20040080,26624:0x21040000,30720:0x20000000,34816:0x20040000,38912:0,43008:0x21040080,47104:0x1000080,51200:0x20000080,55296:0x21000000,59392:0x1000000,63488:262272,65536:262144,69632:128,73728:0x20000000,77824:0x21000080,81920:0x1000080,86016:0x21040000,90112:0x20040080,94208:0x1000000,98304:0x21040080,102400:0x21000000,106496:0x1040000,110592:0x20040000,114688:262272,118784:0x20000080,122880:0,126976:0x1040080,67584:0x21000080,71680:0x1000000,75776:0x1040000,79872:0x20040080,83968:0x20000000,88064:0x1040080,92160:128,96256:0x21040000,100352:262272,104448:0x21040080,108544:0,112640:0x21000000,116736:0x1000080,120832:262144,124928:0x20040000,129024:0x20000080},{0:0x10000008,256:8192,512:0x10200000,768:0x10202008,1024:0x10002000,1280:2097152,1536:2097160,1792:0x10000000,2048:0,2304:0x10002008,2560:2105344,2816:8,3072:0x10200008,3328:2105352,3584:8200,3840:0x10202000,128:0x10200000,384:0x10202008,640:8,896:2097152,1152:2105352,1408:0x10000008,1664:0x10002000,1920:8200,2176:2097160,2432:8192,2688:0x10002008,2944:0x10200008,3200:0,3456:0x10202000,3712:2105344,3968:0x10000000,4096:0x10002000,4352:0x10200008,4608:0x10202008,4864:8200,5120:2097152,5376:0x10000000,5632:0x10000008,5888:2105344,6144:2105352,6400:0,6656:8,6912:0x10200000,7168:8192,7424:0x10002008,7680:0x10202000,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:0x10000008,5248:0x10002000,5504:8200,5760:0x10202008,6016:0x10200000,6272:0x10202000,6528:0x10200008,6784:8192,7040:2105352,7296:2097160,7552:0,7808:0x10000000,8064:0x10002008},{0:1048576,16:0x2000401,32:1024,48:1049601,64:0x2100401,80:0,96:1,112:0x2100001,128:0x2000400,144:1048577,160:0x2000001,176:0x2100400,192:0x2100000,208:1025,224:1049600,240:0x2000000,8:0x2100001,24:0,40:0x2000401,56:0x2100400,72:1048576,88:0x2000001,104:0x2000000,120:1025,136:1049601,152:0x2000400,168:0x2100000,184:1048577,200:1024,216:0x2100401,232:1,248:1049600,256:0x2000000,272:1048576,288:0x2000401,304:0x2100001,320:1048577,336:0x2000400,352:0x2100400,368:1049601,384:1025,400:0x2100401,416:1049600,432:1,448:0,464:0x2100000,480:0x2000001,496:1024,264:1049600,280:0x2000401,296:0x2100001,312:1,328:0x2000000,344:1048576,360:1025,376:0x2100400,392:0x2000001,408:0x2100000,424:0,440:0x2100401,456:1049601,472:1024,488:0x2000400,504:1048577},{0:0x8000820,1:131072,2:0x8000000,3:32,4:131104,5:0x8020820,6:0x8020800,7:2048,8:0x8020000,9:0x8000800,10:133120,11:0x8020020,12:2080,13:0,14:0x8000020,15:133152,0x80000000:2048,0x80000001:0x8020820,0x80000002:0x8000820,0x80000003:0x8000000,0x80000004:0x8020000,0x80000005:133120,0x80000006:133152,0x80000007:32,0x80000008:0x8000020,0x80000009:2080,0x8000000a:131104,0x8000000b:0x8020800,0x8000000c:0,0x8000000d:0x8020020,0x8000000e:0x8000800,0x8000000f:131072,16:133152,17:0x8020800,18:32,19:2048,20:0x8000800,21:0x8000020,22:0x8020020,23:131072,24:0,25:131104,26:0x8020000,27:0x8000820,28:0x8020820,29:133120,30:2080,31:0x8000000,0x80000010:131072,0x80000011:2048,0x80000012:0x8020020,0x80000013:133152,0x80000014:32,0x80000015:0x8020000,0x80000016:0x8000000,0x80000017:0x8000820,0x80000018:0x8020820,0x80000019:0x8000020,0x8000001a:0x8000800,0x8000001b:0,0x8000001c:133120,0x8000001d:2080,0x8000001e:131104,0x8000001f:0x8020800}],c=[0xf8000001,0x1f800000,0x1f80000,2064384,129024,8064,504,0x8000001f],u=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=a[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],l=0;l<16;l++){var c=i[l]=[],u=o[l];for(r=0;r<24;r++)c[r/6|0]|=t[(s[r]-1+u)%28]<<31-r%6,c[4+(r/6|0)]|=t[28+(s[r+24]-1+u)%28]<<31-r%6;for(c[0]=c[0]<<1|c[0]>>>31,r=1;r<7;r++)c[r]=c[r]>>>4*(r-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,0xf0f0f0f),d.call(this,16,65535),f.call(this,2,0x33333333),f.call(this,8,0xff00ff),d.call(this,1,0x55555555);for(var n=0;n<16;n++){for(var i=r[n],a=this._lBlock,s=this._rBlock,o=0,u=0;u<8;u++)o|=l[u][((s^i[u])&c[u])>>>0];this._lBlock=s,this._rBlock=a^o}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,0x55555555),f.call(this,8,0xff00ff),f.call(this,2,0x33333333),d.call(this,16,65535),d.call(this,4,0xf0f0f0f),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}n.DES=r._createHelper(u);var p=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var r=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(t.create(r)),this._des2=u.createEncryptor(t.create(n)),this._des3=u.createEncryptor(t.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=r._createHelper(p)}(),e.exports=n.TripleDES},2478:function(e,t,r){var n,i,a,s,o;a=(i=(n=r(2476)).lib).Base,s=i.WordArray,(o=n.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return s.create(r,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}}),e.exports=n},9300:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",i="week",a="month",s="quarter",o="year",l="date",c="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p="en",h={};h[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}};var x="$isDayjsObject",b=function(e){return e instanceof v||!(!e||!e[x])},g=function e(t,r,n){var i;if(!t)return p;if("string"==typeof t){var a=t.toLowerCase();h[a]&&(i=a),r&&(h[a]=r,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;h[o]=t,i=o}return!n&&i&&(p=i),i||!n&&p},m=function(e,t){if(b(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new v(r)},y={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,a),s=r-i<0,o=t.clone().add(n+(s?-1:1),a);return+(-(n+(r-i)/(s?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return({M:a,y:o,w:i,d:"day",D:l,h:n,m:r,s:t,ms:e,Q:s})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};y.l=g,y.i=b,y.w=function(e,t){return m(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var v=function(){function f(e){this.$L=g(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[x]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(u);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return y},p.isValid=function(){return this.$d.toString()!==c},p.isSame=function(e,t){var r=m(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return m(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<m(e)},p.$g=function(e,t,r){return y.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var c=this,u=!!y.u(s)||s,d=y.p(e),f=function(e,t){var r=y.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return u?r:r.endOf("day")},p=function(e,t){return y.w(c.toDate()[e].apply(c.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},h=this.$W,x=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case o:return u?f(1,0):f(31,11);case a:return u?f(1,x):f(0,x+1);case i:var m=this.$locale().weekStart||0,v=(h<m?h+7:h)-m;return f(u?b-v:b+(6-v),x);case"day":case l:return p(g+"Hours",0);case n:return p(g+"Minutes",1);case r:return p(g+"Seconds",2);case t:return p(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(i,s){var c,u=y.p(i),d="set"+(this.$u?"UTC":""),f=((c={}).day=d+"Date",c[l]=d+"Date",c[a]=d+"Month",c[o]=d+"FullYear",c[n]=d+"Hours",c[r]=d+"Minutes",c[t]=d+"Seconds",c[e]=d+"Milliseconds",c)[u],p="day"===u?this.$D+(s-this.$W):s;if(u===a||u===o){var h=this.clone().set(l,1);h.$d[f](p),h.init(),this.$d=h.set(l,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[y.p(e)]()},p.add=function(e,s){var l,c=this;e=Number(e);var u=y.p(s),d=function(t){var r=m(c);return y.w(r.date(r.date()+Math.round(t*e)),c)};if(u===a)return this.set(a,this.$M+e);if(u===o)return this.set(o,this.$y+e);if("day"===u)return d(1);if(u===i)return d(7);var f=((l={})[r]=6e4,l[n]=36e5,l[t]=1e3,l)[u]||1,p=this.$d.getTime()+e*f;return y.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||c;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=y.z(this),a=this.$H,s=this.$m,o=this.$M,l=r.weekdays,u=r.months,f=r.meridiem,p=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},h=function(e){return y.s(a%12||12,e,"0")},x=f||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return y.s(t.$y,4,"0");case"M":return o+1;case"MM":return y.s(o+1,2,"0");case"MMM":return p(r.monthsShort,o,u,3);case"MMMM":return p(u,o);case"D":return t.$D;case"DD":return y.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(r.weekdaysMin,t.$W,l,2);case"ddd":return p(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(a);case"HH":return y.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return x(a,s,!0);case"A":return x(a,s,!1);case"m":return String(s);case"mm":return y.s(s,2,"0");case"s":return String(t.$s);case"ss":return y.s(t.$s,2,"0");case"SSS":return y.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,l,c){var u,d=this,f=y.p(l),p=m(e),h=(p.utcOffset()-this.utcOffset())*6e4,x=this-p,b=function(){return y.m(d,p)};switch(f){case o:u=b()/12;break;case a:u=b();break;case s:u=b()/3;break;case i:u=(x-h)/6048e5;break;case"day":u=(x-h)/864e5;break;case n:u=x/36e5;break;case r:u=x/6e4;break;case t:u=x/1e3;break;default:u=x}return c?u:y.a(u)},p.daysInMonth=function(){return this.endOf(a).$D},p.$locale=function(){return h[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=g(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return y.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),w=v.prototype;return m.prototype=w,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",a],["$y",o],["$D",l]].forEach(function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),m.extend=function(e,t){return e.$i||(e(t,v,m),e.$i=!0),m},m.locale=g,m.isDayjs=b,m.unix=function(e){return m(1e3*e)},m.en=h[p],m.Ls=h,m.p={},m}()},8989:function(e,t,r){let n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),n=!1,t.destroy=()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(5228)(t);let{formatters:a}=e.exports;a.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},5228:function(e,t,r){e.exports=function(e){function t(e){let r,i,a,s=null;function o(...e){if(!o.enabled)return;let n=Number(new Date);o.diff=n-(r||n),o.prev=r,o.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";i++;let a=t.formatters[n];if("function"==typeof a){let t=e[i];r=a.call(o,t),e.splice(i,1),i--}return r}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a),set:e=>{s=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,a=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,a=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++a}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let r of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(let r of t.skips)if(i(e,r))return!1;for(let r of t.names)if(i(e,r))return!0;return!1},t.humanize=r(3866),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},2579:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,s),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},6171:function(e,t,r){e.exports=r(4671)(r(714),"DataView")},6766:function(e,t,r){var n=r(2405),i=r(8341),a=r(9644),s=r(3784),o=r(6264);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},1022:function(e,t,r){var n=r(6821),i=r(7221),a=r(1596),s=r(1992),o=r(552);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},5870:function(e,t,r){e.exports=r(4671)(r(714),"Map")},8910:function(e,t,r){var n=r(4069),i=r(7477),a=r(476),s=r(984),o=r(4136);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},4665:function(e,t,r){e.exports=r(4671)(r(714),"Promise")},9612:function(e,t,r){e.exports=r(4671)(r(714),"Set")},2312:function(e,t,r){var n=r(8910),i=r(1945),a=r(4874);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=a,e.exports=s},7216:function(e,t,r){var n=r(1022),i=r(5331),a=r(7063),s=r(134),o=r(9842),l=r(9850);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=l,e.exports=c},9006:function(e,t,r){e.exports=r(714).Symbol},8851:function(e,t,r){e.exports=r(714).Uint8Array},8154:function(e,t,r){e.exports=r(4671)(r(714),"WeakMap")},7156:function(e){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},8152:function(e){e.exports=function(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var s=e[i];t(n,s,r(s),e)}return n}},7012:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},2995:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}},128:function(e,t,r){var n=r(8506);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},6184:function(e){e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},9754:function(e,t,r){var n=r(9605),i=r(79),a=r(5874),s=r(3601),o=r(1908),l=r(9046),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&i(e),d=!r&&!u&&s(e),f=!r&&!u&&!d&&l(e),p=r||u||d||f,h=p?n(e.length,String):[],x=h.length;for(var b in e)!t&&!c.call(e,b)||p&&("length"==b||d&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||o(b,x))||h.push(b);return h}},2275:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},2525:function(e){e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},3525:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2430:function(e,t,r){var n=r(3077),i=r(5097);e.exports=function(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},5802:function(e,t,r){var n=r(3077),i=r(5097),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var s=e[t];a.call(e,t)&&i(s,r)&&(void 0!==r||t in e)||n(e,t,r)}},9438:function(e,t,r){var n=r(5097);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},2110:function(e,t,r){var n=r(830);e.exports=function(e,t,r,i){return n(e,function(e,n,a){t(i,e,r(e),a)}),i}},6902:function(e,t,r){var n=r(5532),i=r(3511);e.exports=function(e,t){return e&&n(t,i(t),e)}},5873:function(e,t,r){var n=r(5532),i=r(2844);e.exports=function(e,t){return e&&n(t,i(t),e)}},3077:function(e,t,r){var n=r(4856);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},9018:function(e,t,r){var n=r(7216),i=r(7012),a=r(5802),s=r(6902),o=r(5873),l=r(6743),c=r(310),u=r(5590),d=r(2209),f=r(2573),p=r(3918),h=r(9778),x=r(5290),b=r(4028),g=r(9168),m=r(5874),y=r(3601),v=r(4725),w=r(9400),P=r(7363),C=r(3511),S=r(2844),_="[object Arguments]",k="[object Function]",A="[object Object]",E={};E[_]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[A]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[k]=E["[object WeakMap]"]=!1,e.exports=function e(t,r,T,D,R,M){var B,$=1&r,F=2&r,I=4&r;if(T&&(B=R?T(t,D,R,M):T(t)),void 0!==B)return B;if(!w(t))return t;var O=m(t);if(O){if(B=x(t),!$)return c(t,B)}else{var L=h(t),U=L==k||"[object GeneratorFunction]"==L;if(y(t))return l(t,$);if(L==A||L==_||U&&!R){if(B=F||U?{}:g(t),!$)return F?d(t,o(B,t)):u(t,s(B,t))}else{if(!E[L])return R?t:{};B=b(t,L,$)}}M||(M=new n);var N=M.get(t);if(N)return N;M.set(t,B),P(t)?t.forEach(function(n){B.add(e(n,r,T,n,t,M))}):v(t)&&t.forEach(function(n,i){B.set(i,e(n,r,T,i,t,M))});var j=O?void 0:(I?F?p:f:F?S:C)(t);return i(j||t,function(n,i){j&&(n=t[i=n]),a(B,i,e(n,r,T,i,t,M))}),B}},1095:function(e,t,r){var n=r(9400),i=Object.create;e.exports=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}()},6612:function(e,t,r){var n=r(2312),i=r(128),a=r(6184),s=r(2275),o=r(8232),l=r(5420);e.exports=function(e,t,r,c){var u=-1,d=i,f=!0,p=e.length,h=[],x=t.length;if(!p)return h;r&&(t=s(t,o(r))),c?(d=a,f=!1):t.length>=200&&(d=l,f=!1,t=new n(t));e:for(;++u<p;){var b=e[u],g=null==r?b:r(b);if(b=c||0!==b?b:0,f&&g==g){for(var m=x;m--;)if(t[m]===g)continue e;h.push(b)}else d(t,g,c)||h.push(b)}return h}},830:function(e,t,r){var n=r(7702);e.exports=r(8678)(n)},1329:function(e,t,r){var n=r(830);e.exports=function(e,t){var r=[];return n(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}},166:function(e){e.exports=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return -1}},9821:function(e,t,r){var n=r(2525),i=r(3542);e.exports=function e(t,r,a,s,o){var l=-1,c=t.length;for(a||(a=i),o||(o=[]);++l<c;){var u=t[l];r>0&&a(u)?r>1?e(u,r-1,a,s,o):n(o,u):s||(o[o.length]=u)}return o}},9128:function(e,t,r){e.exports=r(3600)()},7702:function(e,t,r){var n=r(9128),i=r(3511);e.exports=function(e,t){return e&&n(e,t,i)}},1855:function(e,t,r){var n=r(330),i=r(9628);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[i(t[r++])];return r&&r==a?e:void 0}},5920:function(e,t,r){var n=r(2525),i=r(5874);e.exports=function(e,t,r){var a=t(e);return i(e)?a:n(a,r(e))}},5271:function(e,t,r){var n=r(9006),i=r(9650),a=r(6881),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},5088:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},8506:function(e,t,r){var n=r(166),i=r(8306),a=r(638);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,i,r)}},4047:function(e,t,r){var n=r(5271),i=r(7583);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},3899:function(e,t,r){var n=r(8309),i=r(7583);e.exports=function e(t,r,a,s,o){return t===r||(null!=t&&null!=r&&(i(t)||i(r))?n(t,r,a,s,e,o):t!=t&&r!=r)}},8309:function(e,t,r){var n=r(7216),i=r(3522),a=r(9481),s=r(8370),o=r(9778),l=r(5874),c=r(3601),u=r(9046),d="[object Arguments]",f="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,x,b,g){var m=l(e),y=l(t),v=m?f:o(e),w=y?f:o(t),P=(v=v==d?p:v)==p,C=(w=w==d?p:w)==p,S=v==w;if(S&&c(e)){if(!c(t))return!1;m=!0,P=!1}if(S&&!P)return g||(g=new n),m||u(e)?i(e,t,r,x,b,g):a(e,t,v,r,x,b,g);if(!(1&r)){var _=P&&h.call(e,"__wrapped__"),k=C&&h.call(t,"__wrapped__");if(_||k){var A=_?e.value():e,E=k?t.value():t;return g||(g=new n),b(A,E,r,x,g)}}return!!S&&(g||(g=new n),s(e,t,r,x,b,g))}},4965:function(e,t,r){var n=r(9778),i=r(7583);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},4014:function(e,t,r){var n=r(7216),i=r(3899);e.exports=function(e,t,r,a){var s=r.length,o=s,l=!a;if(null==e)return!o;for(e=Object(e);s--;){var c=r[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var u=(c=r[s])[0],d=e[u],f=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new n;if(a)var h=a(d,f,u,e,t,p);if(!(void 0===h?i(f,d,3,a,p):h))return!1}}return!0}},8306:function(e){e.exports=function(e){return e!=e}},4228:function(e,t,r){var n=r(7787),i=r(7827),a=r(9400),s=r(462),o=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(n(e)?d:o).test(s(e))}},6499:function(e,t,r){var n=r(9778),i=r(7583);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},550:function(e,t,r){var n=r(5271),i=r(4583),a=r(7583),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!s[n(e)]}},4506:function(e,t,r){var n=r(6330),i=r(2363),a=r(9169),s=r(5874),o=r(6830);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):n(e):o(e)}},5351:function(e,t,r){var n=r(7894),i=r(2325),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},1500:function(e,t,r){var n=r(9400),i=r(7894),a=r(5382),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=i(e),r=[];for(var o in e)("constructor"!=o||!t&&s.call(e,o))&&r.push(o);return r}},4733:function(e,t,r){var n=r(830),i=r(3069);e.exports=function(e,t){var r=-1,a=i(e)?Array(e.length):[];return n(e,function(e,n,i){a[++r]=t(e,n,i)}),a}},6330:function(e,t,r){var n=r(4014),i=r(6539),a=r(7316);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},2363:function(e,t,r){var n=r(3899),i=r(5887),a=r(4016),s=r(759),o=r(7223),l=r(7316),c=r(9628);e.exports=function(e,t){return s(e)&&o(t)?l(c(e),t):function(r){var s=i(r,e);return void 0===s&&s===t?a(r,e):n(t,s,3)}}},4479:function(e,t,r){var n=r(7216),i=r(2430),a=r(9128),s=r(3857),o=r(9400),l=r(2844),c=r(6127);e.exports=function e(t,r,u,d,f){t!==r&&a(r,function(a,l){if(f||(f=new n),o(a))s(t,r,l,u,e,d,f);else{var p=d?d(c(t,l),a,l+"",t,r,f):void 0;void 0===p&&(p=a),i(t,l,p)}},l)}},3857:function(e,t,r){var n=r(2430),i=r(6743),a=r(1532),s=r(310),o=r(9168),l=r(79),c=r(5874),u=r(6882),d=r(3601),f=r(7787),p=r(9400),h=r(4108),x=r(9046),b=r(6127),g=r(339);e.exports=function(e,t,r,m,y,v,w){var P=b(e,r),C=b(t,r),S=w.get(C);if(S)n(e,r,S);else{var _=v?v(P,C,r+"",e,t,w):void 0,k=void 0===_;if(k){var A=c(C),E=!A&&d(C),T=!A&&!E&&x(C);_=C,A||E||T?c(P)?_=P:u(P)?_=s(P):E?(k=!1,_=i(C,!0)):T?(k=!1,_=a(C,!0)):_=[]:h(C)||l(C)?(_=P,l(P)?_=g(P):p(P)&&!f(P)||(_=o(C))):k=!1}k&&(w.set(C,_),y(_,C,m,v,w),w.delete(C)),n(e,r,_)}}},4286:function(e,t,r){var n=r(8499),i=r(4016);e.exports=function(e,t){return n(e,t,function(t,r){return i(e,r)})}},8499:function(e,t,r){var n=r(1855),i=r(9435),a=r(330);e.exports=function(e,t,r){for(var s=-1,o=t.length,l={};++s<o;){var c=t[s],u=n(e,c);r(u,c)&&i(l,a(c,e),u)}return l}},8494:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},3644:function(e,t,r){var n=r(1855);e.exports=function(e){return function(t){return n(t,e)}}},6965:function(e,t,r){var n=r(9169),i=r(5390),a=r(3232);e.exports=function(e,t){return a(i(e,t,n),e+"")}},9435:function(e,t,r){var n=r(5802),i=r(330),a=r(1908),s=r(9400),o=r(9628);e.exports=function(e,t,r,l){if(!s(e))return e;for(var c=-1,u=(t=i(t,e)).length,d=u-1,f=e;null!=f&&++c<u;){var p=o(t[c]),h=r;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(c!=d){var x=f[p];void 0===(h=l?l(x,p,f):void 0)&&(h=s(x)?x:a(t[c+1])?[]:{})}n(f,p,h),f=f[p]}return e}},3431:function(e,t,r){var n=r(8295),i=r(4856),a=r(9169);e.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a},9605:function(e){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},8071:function(e,t,r){var n=r(9006),i=r(2275),a=r(5874),s=r(975),o=n?n.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(s(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},8232:function(e){e.exports=function(e){return function(t){return e(t)}}},3434:function(e,t,r){var n=r(2312),i=r(128),a=r(6184),s=r(5420),o=r(2196),l=r(6968);e.exports=function(e,t,r){var c=-1,u=i,d=e.length,f=!0,p=[],h=p;if(r)f=!1,u=a;else if(d>=200){var x=t?null:o(e);if(x)return l(x);f=!1,u=s,h=new n}else h=t?[]:p;e:for(;++c<d;){var b=e[c],g=t?t(b):b;if(b=r||0!==b?b:0,f&&g==g){for(var m=h.length;m--;)if(h[m]===g)continue e;t&&h.push(g),p.push(b)}else u(h,g,r)||(h!==p&&h.push(g),p.push(b))}return p}},989:function(e,t,r){var n=r(2275);e.exports=function(e,t){return n(t,function(t){return e[t]})}},5420:function(e){e.exports=function(e,t){return e.has(t)}},4041:function(e,t,r){var n=r(9169);e.exports=function(e){return"function"==typeof e?e:n}},330:function(e,t,r){var n=r(5874),i=r(759),a=r(9505),s=r(983);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(s(e))}},9270:function(e,t,r){var n=r(8851);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},6743:function(e,t,r){e=r.nmd(e);var n=r(714),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}},5940:function(e,t,r){var n=r(9270);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},5320:function(e){var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},4937:function(e,t,r){var n=r(9006),i=n?n.prototype:void 0,a=i?i.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},1532:function(e,t,r){var n=r(9270);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},310:function(e){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},5532:function(e,t,r){var n=r(5802),i=r(3077);e.exports=function(e,t,r,a){var s=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var c=t[o],u=a?a(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),s?i(r,c,u):n(r,c,u)}return r}},5590:function(e,t,r){var n=r(5532),i=r(9183);e.exports=function(e,t){return n(e,i(e),t)}},2209:function(e,t,r){var n=r(5532),i=r(596);e.exports=function(e,t){return n(e,i(e),t)}},6450:function(e,t,r){e.exports=r(714)["__core-js_shared__"]},2863:function(e,t,r){var n=r(8152),i=r(2110),a=r(4506),s=r(5874);e.exports=function(e,t){return function(r,o){var l=s(r)?n:i,c=t?t():{};return l(r,e,a(o,2),c)}}},1292:function(e,t,r){var n=r(6965),i=r(8819);e.exports=function(e){return n(function(t,r){var n=-1,a=r.length,s=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(a--,s):void 0,o&&i(r[0],r[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,s)}return t})}},8678:function(e,t,r){var n=r(3069);e.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&!1!==i(o[s],s,o););return r}}},3600:function(e){e.exports=function(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var l=s[e?o:++i];if(!1===r(a[l],l,a))break}return t}}},2196:function(e,t,r){var n=r(9612),i=r(3883),a=r(6968);e.exports=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i},4856:function(e,t,r){var n=r(4671);e.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},3522:function(e,t,r){var n=r(2312),i=r(3525),a=r(5420);e.exports=function(e,t,r,s,o,l){var c=1&r,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var f=l.get(e),p=l.get(t);if(f&&p)return f==t&&p==e;var h=-1,x=!0,b=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++h<u;){var g=e[h],m=t[h];if(s)var y=c?s(m,g,h,t,e,l):s(g,m,h,e,t,l);if(void 0!==y){if(y)continue;x=!1;break}if(b){if(!i(t,function(e,t){if(!a(b,t)&&(g===e||o(g,e,r,s,l)))return b.push(t)})){x=!1;break}}else if(g!==m&&!o(g,m,r,s,l)){x=!1;break}}return l.delete(e),l.delete(t),x}},9481:function(e,t,r){var n=r(9006),i=r(8851),a=r(5097),s=r(3522),o=r(8866),l=r(6968),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,d,f){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var h=1&n;if(p||(p=l),e.size!=t.size&&!h)break;var x=f.get(e);if(x)return x==t;n|=2,f.set(e,t);var b=s(p(e),p(t),n,c,d,f);return f.delete(e),b;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},8370:function(e,t,r){var n=r(2573),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,s,o){var l=1&r,c=n(e),u=c.length;if(u!=n(t).length&&!l)return!1;for(var d=u;d--;){var f=c[d];if(!(l?f in t:i.call(t,f)))return!1}var p=o.get(e),h=o.get(t);if(p&&h)return p==t&&h==e;var x=!0;o.set(e,t),o.set(t,e);for(var b=l;++d<u;){var g=e[f=c[d]],m=t[f];if(a)var y=l?a(m,g,f,t,e,o):a(g,m,f,e,t,o);if(!(void 0===y?g===m||s(g,m,r,a,o):y)){x=!1;break}b||(b="constructor"==f)}if(x&&!b){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(x=!1)}return o.delete(e),o.delete(t),x}},4139:function(e,t,r){var n=r(7469),i=r(5390),a=r(3232);e.exports=function(e){return a(i(e,void 0,n),e+"")}},1603:function(e,t,r){e.exports="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g},2573:function(e,t,r){var n=r(5920),i=r(9183),a=r(3511);e.exports=function(e){return n(e,a,i)}},3918:function(e,t,r){var n=r(5920),i=r(596),a=r(2844);e.exports=function(e){return n(e,a,i)}},1200:function(e,t,r){var n=r(95);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},6539:function(e,t,r){var n=r(7223),i=r(3511);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,n(s)]}return t}},4671:function(e,t,r){var n=r(4228),i=r(7559);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},7556:function(e,t,r){e.exports=r(8546)(Object.getPrototypeOf,Object)},9650:function(e,t,r){var n=r(9006),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[o]=r:delete e[o]),i}},9183:function(e,t,r){var n=r(2995),i=r(2982),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;e.exports=s?function(e){return null==e?[]:n(s(e=Object(e)),function(t){return a.call(e,t)})}:i},596:function(e,t,r){var n=r(2525),i=r(7556),a=r(9183),s=r(2982);e.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=i(e);return t}:s},9778:function(e,t,r){var n=r(6171),i=r(5870),a=r(4665),s=r(9612),o=r(8154),l=r(5271),c=r(462),u="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",x=c(n),b=c(i),g=c(a),m=c(s),y=c(o),v=l;(n&&v(new n(new ArrayBuffer(1)))!=h||i&&v(new i)!=u||a&&v(a.resolve())!=d||s&&v(new s)!=f||o&&v(new o)!=p)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case x:return h;case b:return u;case g:return d;case m:return f;case y:return p}return t}),e.exports=v},7559:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},9663:function(e,t,r){var n=r(330),i=r(79),a=r(5874),s=r(1908),o=r(4583),l=r(9628);e.exports=function(e,t,r){for(var c=-1,u=(t=n(t,e)).length,d=!1;++c<u;){var f=l(t[c]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&o(u)&&s(f,u)&&(a(e)||i(e))}},2405:function(e,t,r){var n=r(8637);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},8341:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},9644:function(e,t,r){var n=r(8637),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},3784:function(e,t,r){var n=r(8637),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},6264:function(e,t,r){var n=r(8637);e.exports=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},5290:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},4028:function(e,t,r){var n=r(9270),i=r(5940),a=r(5320),s=r(4937),o=r(1532);e.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(e,r);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return a(e);case"[object Symbol]":return s(e)}}},9168:function(e,t,r){var n=r(1095),i=r(7556),a=r(7894);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(i(e))}},3542:function(e,t,r){var n=r(9006),i=r(79),a=r(5874),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(s&&e&&e[s])}},1908:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?0x1fffffffffffff:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},8819:function(e,t,r){var n=r(5097),i=r(3069),a=r(1908),s=r(9400);e.exports=function(e,t,r){if(!s(r))return!1;var o=typeof t;return!!("number"==o?i(r)&&a(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},759:function(e,t,r){var n=r(5874),i=r(975),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||s.test(e)||!a.test(e)||null!=t&&e in Object(t)}},95:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7827:function(e,t,r){var n,i=r(6450),a=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},7894:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},7223:function(e,t,r){var n=r(9400);e.exports=function(e){return e==e&&!n(e)}},6821:function(e){e.exports=function(){this.__data__=[],this.size=0}},7221:function(e,t,r){var n=r(9438),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},1596:function(e,t,r){var n=r(9438);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},1992:function(e,t,r){var n=r(9438);e.exports=function(e){return n(this.__data__,e)>-1}},552:function(e,t,r){var n=r(9438);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},4069:function(e,t,r){var n=r(6766),i=r(1022),a=r(5870);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},7477:function(e,t,r){var n=r(1200);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=!!t,t}},476:function(e,t,r){var n=r(1200);e.exports=function(e){return n(this,e).get(e)}},984:function(e,t,r){var n=r(1200);e.exports=function(e){return n(this,e).has(e)}},4136:function(e,t,r){var n=r(1200);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this}},8866:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},7316:function(e){e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},2121:function(e,t,r){var n=r(8487);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},8637:function(e,t,r){e.exports=r(4671)(Object,"create")},2325:function(e,t,r){e.exports=r(8546)(Object.keys,Object)},5382:function(e){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},6574:function(e,t,r){e=r.nmd(e);var n=r(1603),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i&&n.process,o=function(){try{return a&&a.require&&a.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=o},6881:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8546:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},5390:function(e,t,r){var n=r(7156),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,s=-1,o=i(a.length-t,0),l=Array(o);++s<o;)l[s]=a[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=a[s];return c[t]=r(l),n(e,this,c)}}},714:function(e,t,r){var n=r(1603),i="object"==typeof self&&self&&self.Object===Object&&self;e.exports=n||i||Function("return this")()},6127:function(e){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},1945:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},4874:function(e){e.exports=function(e){return this.__data__.has(e)}},6968:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},3232:function(e,t,r){var n=r(3431);e.exports=r(1824)(n)},1824:function(e){var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var i=t(),a=16-(i-n);if(n=i,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},5331:function(e,t,r){var n=r(1022);e.exports=function(){this.__data__=new n,this.size=0}},7063:function(e){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},134:function(e){e.exports=function(e){return this.__data__.get(e)}},9842:function(e){e.exports=function(e){return this.__data__.has(e)}},9850:function(e,t,r){var n=r(1022),i=r(5870),a=r(8910);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(s)}return r.set(e,t),this.size=r.size,this}},638:function(e){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}},9505:function(e,t,r){var n=r(2121),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;e.exports=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)}),t})},9628:function(e,t,r){var n=r(975);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},462:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},9136:function(e,t,r){var n=r(9018);e.exports=function(e){return n(e,5)}},8295:function(e){e.exports=function(e){return function(){return e}}},5956:function(e,t,r){var n=r(6612),i=r(9821),a=r(6965),s=r(6882);e.exports=a(function(e,t){return s(e)?n(e,i(t,1,s,!0)):[]})},5097:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9969:function(e,t,r){var n=r(2995),i=r(1329),a=r(4506),s=r(5874);e.exports=function(e,t){return(s(e)?n:i)(e,a(t,3))}},7469:function(e,t,r){var n=r(9821);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},5695:function(e,t,r){var n=r(9821),i=1/0;e.exports=function(e){return null!=e&&e.length?n(e,i):[]}},1117:function(e,t,r){var n=r(7012),i=r(830),a=r(4041),s=r(5874);e.exports=function(e,t){return(s(e)?n:i)(e,a(t))}},5887:function(e,t,r){var n=r(1855);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},4016:function(e,t,r){var n=r(5088),i=r(9663);e.exports=function(e,t){return null!=e&&i(e,t,n)}},849:function(e){e.exports=function(e){return e&&e.length?e[0]:void 0}},9169:function(e){e.exports=function(e){return e}},79:function(e,t,r){var n=r(4047),i=r(7583),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable;e.exports=n(function(){return arguments}())?n:function(e){return i(e)&&s.call(e,"callee")&&!o.call(e,"callee")}},5874:function(e){e.exports=Array.isArray},3069:function(e,t,r){var n=r(7787),i=r(4583);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},6882:function(e,t,r){var n=r(3069),i=r(7583);e.exports=function(e){return i(e)&&n(e)}},3601:function(e,t,r){e=r.nmd(e);var n=r(714),i=r(6408),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,o=s&&s.exports===a?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||i;e.exports=l},2046:function(e,t,r){var n=r(5351),i=r(9778),a=r(79),s=r(5874),o=r(3069),l=r(3601),c=r(7894),u=r(9046),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||a(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},7787:function(e,t,r){var n=r(5271),i=r(9400);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4583:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},4725:function(e,t,r){var n=r(4965),i=r(8232),a=r(6574),s=a&&a.isMap;e.exports=s?i(s):n},7168:function(e){e.exports=function(e){return null==e}},9400:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7583:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4108:function(e,t,r){var n=r(5271),i=r(7556),a=r(7583),s=Object.prototype,o=Function.prototype.toString,l=s.hasOwnProperty,c=o.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==c}},7363:function(e,t,r){var n=r(6499),i=r(8232),a=r(6574),s=a&&a.isSet;e.exports=s?i(s):n},7462:function(e,t,r){var n=r(5271),i=r(5874),a=r(7583);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==n(e)}},975:function(e,t,r){var n=r(5271),i=r(7583);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},9046:function(e,t,r){var n=r(550),i=r(8232),a=r(6574),s=a&&a.isTypedArray;e.exports=s?i(s):n},3511:function(e,t,r){var n=r(9754),i=r(5351),a=r(3069);e.exports=function(e){return a(e)?n(e):i(e)}},2844:function(e,t,r){var n=r(9754),i=r(1500),a=r(3069);e.exports=function(e){return a(e)?n(e,!0):i(e)}},5179:function(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},9629:function(e,t,r){var n=r(2275),i=r(4506),a=r(4733),s=r(5874);e.exports=function(e,t){return(s(e)?n:a)(e,i(t,3))}},8487:function(e,t,r){var n=r(8910);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},2495:function(e,t,r){var n=r(4479);e.exports=r(1292)(function(e,t,r){n(e,t,r)})},3883:function(e){e.exports=function(){}},5645:function(e,t,r){e.exports=r(2863)(function(e,t,r){e[+!r].push(t)},function(){return[[],[]]})},222:function(e,t,r){var n=r(4286);e.exports=r(4139)(function(e,t){return null==e?{}:n(e,t)})},6830:function(e,t,r){var n=r(8494),i=r(3644),a=r(759),s=r(9628);e.exports=function(e){return a(e)?n(s(e)):i(e)}},7579:function(e,t,r){var n=r(9435);e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},2982:function(e){e.exports=function(){return[]}},6408:function(e){e.exports=function(){return!1}},339:function(e,t,r){var n=r(5532),i=r(2844);e.exports=function(e){return n(e,i(e))}},983:function(e,t,r){var n=r(8071);e.exports=function(e){return null==e?"":n(e)}},3344:function(e,t,r){var n=r(9821),i=r(6965),a=r(3434),s=r(6882);e.exports=i(function(e){return a(n(e,1,s,!0))})},4058:function(e,t,r){var n=r(3434);e.exports=function(e){return e&&e.length?n(e):[]}},3005:function(e,t,r){var n=r(989),i=r(3511);e.exports=function(e){return null==e?[]:n(e,i(e))}},3866:function(e){function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,a=typeof e;if("string"===a&&e.length>0){var s=e;if(!((s=String(s)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(o){var l=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return 864e5*l;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*l;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*l;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l}}}return}if("number"===a&&isFinite(e))return r.long?(i=Math.abs(e))>=864e5?t(e,i,864e5,"day"):i>=36e5?t(e,i,36e5,"hour"):i>=6e4?t(e,i,6e4,"minute"):i>=1e3?t(e,i,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2742:function(t){"use strict";t.exports=e},7167:function(){}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var a={};return function(){"use strict";n.r(a),n.d(a,{AbTest:function(){return b},Campaign:function(){return y},Channel:function(){return s},Checkout:function(){return r},CrossProduct:function(){return v},ForbiddenPromotions:function(){return i},Lts:function(){return g},Offers:function(){return m},Paywall:function(){return S},PianoScriptLoadError:function(){return au},Plan:function(){return x},ScmpLiteCoreGeos:function(){return P},ScmpLiteNonCoreGeos:function(){return w},Term:function(){return af},bundlePlusRackPlans:function(){return iK},consolidatePlans:function(){return iJ},convertLocationToCurrency:function(){return nM},default:function(){return ad},findMostRecommendedPlan:function(){return ao},formatBillingCycle:function(){return tF},get2024JanPreChurnPlans:function(){return n4},getStandardDigitalTerms:function(){return iY},getStandardPreChurnPlans:function(){return n5},mapPlanChangeOptionToPlan:function(){return n2},mergePlanTerms:function(){return n1},plusIntroPlans:function(){return iz},plusRackPlans:function(){return iG},plusStandardPlans:function(){return iV},trackGA4Event:function(){return tA},winbackPlans:function(){return nA}});var e,t={};n.r(t),n.d(t,{BILLING_PERIOD:function(){return ed},CACHE_KEYS:function(){return eu},FIX_TERM_IDS:function(){return es},SUBSCRIBER_PHASES:function(){return ec},WAIT_KEY_PIANO:function(){return eo},WAIT_KEY_WINDOW:function(){return el}});var r={};n.r(r),n.d(r,{CHECKOUT_EVENT_TYPES:function(){return eG},SDK_TO_TEMPLATE_CHANNEL:function(){return eW},TEMPLATE_TO_SDK_CHANNEL:function(){return eY},dispatchSDKEvent:function(){return ez},dispatchTemplateEvent:function(){return eV},listenToSDKEvents:function(){return eq},listenToTemplateEvents:function(){return eK},notifyTemplateReady:function(){return eJ},showAlreadyHaveAccessPopup:function(){return eZ},showAuthenticationPopup:function(){return eQ},showErrorPopup:function(){return e0},showThankYouPopup:function(){return eX}});var i={};n.r(i),n.d(i,{fetchAndCacheForbiddenCodePromotions:function(){return tt},service:function(){return e3}});var s={};n.r(s),n.d(s,{internalChannelName:function(){return ts},registerListener:function(){return th},removeListener:function(){return tx},sendMessage:function(){return tf}});var o={};n.r(o),n.d(o,{getGeo:function(){return rs}});var l={};n.r(l),n.d(l,{getTierInfo:function(){return rc}});var c={};n.r(c),n.d(c,{getPianoUserInfo:function(){return rp},updatePianoUserHasShownSCMPPlusWelcomePopUpField:function(){return rx},updatePianoUserHasShownSwGLinkingFlowField:function(){return rh}});var u={};n.r(u),n.d(u,{getPianoPublisherConversions:function(){return rm}});var d={};n.r(d),n.d(d,{addOnboardingScript:function(){return rC},removeOnboardingScript:function(){return rS}});var f={};n.r(f),n.d(f,{addAbandonerScript:function(){return rD},cartAbandonerOfferShown:function(){return rj},cleanupCookies:function(){return rH},placeTrigger:function(){return rW},registerOfferShown:function(){return rN},showCartAbandonerOffer:function(){return rU},showCartAbandonerOfferOnNextVisit:function(){return rI},showRegisterOffer:function(){return rL},showRegisterOfferOnNextVisit:function(){return rF},trySignUpOfferByUserType:function(){return rO}});var p={};n.r(p),n.d(p,{addMastheadRenewPopUpScript:function(){return rG}});var h={};n.r(h),n.d(h,{addCampaignPopUpScript:function(){return rV},showCampaignPopUp:function(){return rq}});var x={};n.r(x),n.d(x,{computePlanCardPropsFromConsolidatedBillingTable:function(){return nX},consolidateBillingTable:function(){return nJ},formatBillingPeriod:function(){return nZ}});var b={};n.r(b),n.d(b,{getABTestVariantsPianoCustomVariable:function(){return io},setABTestVariablePianoCustomVariable:function(){return is}});var g={};n.r(g),n.d(g,{LTS_AB_TEST_NAME:function(){return iT},buildLTSVariant:function(){return iF},checkIsLtsActive:function(){return iB},getLtsBucket:function(){return iR},getLtsBucketFromLocalStorage:function(){return iM},getLtsTerms:function(){return i$},setupPianoLtsEventListeners:function(){return iD}});var m={};n.r(m),n.d(m,{checkDoesConversionsContainPreChurnPromoCodes:function(){return n0},checkHasUserUsedPreChurnPromotion:function(){return nQ},computeWinbackContext:function(){return nE},consolidatePlans:function(){return iJ},get2024JanPreChurnPlans:function(){return n4},getEligiblePlans:function(){return it},getStandardDigitalTerms:function(){return iY},getStandardPreChurnPlans:function(){return n5},winbackPlans:function(){return nA}});var y={};n.r(y),n.d(y,{getActiveCampaignPlans:function(){return i1},getActiveCampaignSettings:function(){return i4},getCampaignPlans:function(){return i2},getCampaignPopupSettings:function(){return i0},mergeCampaignConfigs:function(){return i8}});var v={};n.r(v),n.d(v,{service:function(){return i5}});var w={};n.r(w),n.d(w,{SCMP_LITE_TEST_NAME:function(){return i7},computeScmpLiteNonCoreGeosState:function(){return i9}});var P={};n.r(P),n.d(P,{SCMP_LITE_CORE_GEOS_TEST_NAME:function(){return ae},computeScmpLiteCoreGeosState:function(){return an}});var C={};n.r(C),n.d(C,{getApplicablePaywallStrategy:function(){return ai}});var S={};n.r(S),n.d(S,{strategies:function(){return C}});var _=n(5887),k=n.n(_),A=n(2046),E=n.n(A),T=()=>"undefined"==typeof window,D=n(1117),R=n.n(D),M=n(5695),B=n.n(M),$=n(7168),F=n.n($),I=n(3511),O=n.n(I),L=n(9629),U=n.n(L),N=n(3344),j=n.n(N),H=n(2742),W=n.n(H);function Y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var G=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=Y({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var a=r[i].split("="),s=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(n[o]=t.read(s,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",Y({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Y({},this.attributes,t))},withConverter:function(t){return e(Y({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),z=n(5133),V=n.n(z);function q(e){this.message=e}q.prototype=Error(),q.prototype.name="InvalidCharacterError";var K="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new q("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,a=0,s="";n=t.charAt(a++);~n&&(r=i%4?64*r+n:n,i++%4)&&(s+=String.fromCharCode(255&r>>(-2*i&6))))n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function J(e){this.message=e}J.prototype=Error(),J.prototype.name="InvalidTokenError";var X=function(e,t){if("string"!=typeof e)throw new J("Invalid token specified");var r=+(!0!==(t=t||{}).header);try{return JSON.parse(function(e){var t,r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return t=r,decodeURIComponent(K(t).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return K(r)}}(e.split(".")[r]))}catch(e){throw new J("Invalid token specified: "+e.message)}},Z=e=>!(F()(e)||E()(e));let Q=n(8989)("@product/rosetta-sdk"),ee=e=>function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];Q.extend(e)(...r.map(e=>"object"==typeof e?JSON.stringify(e):e))},et=e=>({debug:ee(`debug:${e}`),info:ee(`info:${e}`),error:ee(`error:${e}`)}),er=Q.extend("utils/cache"),en={},ei=(e,t)=>{T()?er("setCache() is client side only"):Z(t)?Z(en[e])?er(`setCache(): key [${e}] already exists, will not overwrite`):(er(`setCache(): setting cache for key [${e}]`),en[e]=t):er("setCache(): value is empty")},ea=e=>{if(T())er("getCache is client side only");else{if(Z(en[e]))return en[e];er(`getCache(): key [${e}] does not exists`)}},es=["TMPKDW7DW2F7","TMQUKCLWNAF4","TMKM4W55X891","TMS4536VXPO9","TMQNWRE0VDJK","TMLF1MZG4SGY","TMBFSJASEZWE","TMTTJZ3V2WFM","TM9KDFOKM3VI","TMT0CYJOOAV1","TMEUARRDGAHU","TMV8NG1EWOK3","TM4B3B5C3Q98","TMUBR23FAIX8","TMK3NEIOS5YB","TMX36JEWSO5S","TMR589AD3H7B","TM6AEZH2NL6S"],eo="pianoExperience",el="windowObject",ec={NONSUBSCRIBER:"non subscriber",PRECHURNING:"pre-churn(point of disable - l31d)",FIRSTCHURNING:"pre-churn(30-8 days before expiry)",SECONDCHURNING:"pre-churn(last 7 days before expiry)",FIRSTGRACE:"grace period(1st phase)",SECONDGRACE:"grace period(2nd phase)",WINBACK:"winback",DEFAULT:"subscription & upgrade"},eu={APP_CONFIG:"appConfig",CS_CONFIG:"csConfig",PIANO_CONFIG:"pianoConfig",ROSETTA_CONFIG:"rosettaConfig"},ed={MONTHLY:"1 month",ANNUAL:"1 year",BIANNUAL:"2 years"};var ef=e=>{let{src:t,element:r=""}=e;return new Promise((e,n)=>{let i=document.createElement("script");if(i.type="text/javascript",i.async=!0,i.src=t,i.onload=()=>e(),i.onerror=()=>n(Error(`loadScript(): ${t} failed.`)),"head"===r.toLowerCase())document.getElementsByTagName("head")[0].prepend(i);else if("script"===r.toLowerCase()){let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(i,e)}})};let ep=["DIGITIMES","2024JAN","BOGOF","IntroABTest(B)","AddInk","Upgrade(Intro)","Upgrade(50%)","Downgrade(50%)","Downgrade(Intro)","PlusSoftLaunch(1M)","PlusSoftLaunch(2M)","Rack","Intro","Trial","USElection2024","DIGITIMES","FreeTrial(3M)","Upgrade(Lite-Dgt)",...function(){let e=["0","1","2"];return["N","L","M","H"].flatMap(t=>e.map(e=>`LTS(${t}-${e})`))}(),...["50%","70%","85%"].map(e=>`LiteABTest(${e})`),...["70%","85%"].map(e=>`LiteCoreGeosABTest(${e})`)],eh=["HKD","MYR","SGD","USD-H","USD","PHP","AUD","CAD","EUR","GBP"],ex=["scmpPlusDailyPrintBundle","scmpPlusWeekdayPrintBundle","scmpPlusWeekendPrintBundle"],eb=["scmpAndScmpPlusEPaper"],eg=Object.fromEntries(["digital","digitalFree","digitalLite","digitalB2B","digitalAccessGranted","plus","ePaper","print","yp","ypPrint","ypEpaper","ypSparkDigital","ypSparkEpaper","ypSparkPrint","postiesDigital","postiesEPaper","v1WeekendPrint","v1FriToSunPrint","v1MonToFriPrint","v1MonToSatPrint","v1DailyPrint","dailyEPaperBundle","weekendPrintBundle","weekdayPrintBundle","dailyPrintBundle","scmpPlusYp","postiesEPaperAndDigital","postiesPrintAndDigital","scmpAndYpSparkDigital","scmpPrintAndYpSparkDigitalAndPrint","scmpEpaperAndYpSparkDigitalAndPrint","scmpEpaperAndYpSparkDigitalAndEpaper","ypOnlineScmpBundle",...eb,...ex,"b2bScmpDigital","b2bScmpEpaper","b2bScmpDigitalAndPlus","b2bScmpDigitalAndEpaper","b2bScmpDigitalAndEpaperAndPlus","b2bScmpDigitalAndPrint","b2bScmpDigitalAndPrintAndEPaper","b2bScmpDigitalAndPrintAndEPaperAndPlus","accessGrantedScmpDigital","accessGrantedScmpEpaper","accessGrantedScmpPlus",...ex].map(e=>[e,e])),em={digital:{type:"standard",name:"SCMP Digital",family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite]},digitalFree:{type:"standard",name:"SCMP Digital - Free",family:["scmp"],additionalImpliedAccessibleResources:[eg.digital,eg.digitalLite]},digitalLite:{type:"standard",name:"SCMP Digital - Lite",family:["scmp"]},digitalB2B:{type:"standard",name:"SCMP Digital - B2B",family:["scmp"],additionalImpliedAccessibleResources:[eg.digital,eg.digitalLite]},digitalAccessGranted:{type:"standard",name:"SCMP Digital - Access Granted",family:["scmp"],additionalImpliedAccessibleResources:[eg.digital,eg.digitalLite]},ePaper:{type:"standard",name:"SCMP ePaper",family:["scmp"]},plus:{type:"standard",name:"SCMP Plus",family:["scmp"]},print:{type:"standard",name:"Print Bundle",isAddressRequired:!0,family:["scmp"]},v1WeekendPrint:{type:"standard",name:"SCMP Digital",isAddressRequired:!0,family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite,eg.digital,eg.print]},v1FriToSunPrint:{type:"standard",name:"SCMP Digital",isAddressRequired:!0,family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite,eg.digital,eg.print]},v1MonToFriPrint:{type:"standard",name:"SCMP Digital",isAddressRequired:!0,family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite,eg.digital,eg.print]},v1MonToSatPrint:{type:"standard",name:"SCMP Digital",isAddressRequired:!0,family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite,eg.digital,eg.print]},v1DailyPrint:{type:"standard",name:"SCMP Digital",isAddressRequired:!0,family:["scmp"],additionalImpliedAccessibleResources:[eg.digitalLite,eg.digital,eg.print]}},ey={yp:{type:"standard",name:"YP",family:["yp"]},ypPrint:{type:"standard",name:"YP Print",family:["yp"],isAddressRequired:!0},ypEpaper:{type:"standard",name:"YP ePaper",family:["yp"]},ypSparkDigital:{type:"standard",name:"YP Spark Digital",family:["yp"]},ypSparkEpaper:{type:"standard",name:"YP Spark ePaper",family:["yp"]},ypSparkPrint:{type:"standard",name:"YP Spark Print",family:["yp"]}},ev={postiesDigital:{type:"standard",name:"Posties Digital",family:["posties"]},postiesEPaper:{type:"standard",name:"Posties ePaper",family:["posties"]},postiesPrintAndDigital:{type:"standard",name:"Posties Digital",legacyName:"Posties Print + Digital",isAddressRequired:!0,family:["posties"]}},ew={...em,...ey,...ev},eP={scmpAndScmpPlusEPaper:{type:"bundle",name:"SCMP Digital + Plus + Daily ePaper",standardResources:[ew.digital,ew.plus,ew.ePaper],family:["scmp"]},scmpPlusDailyPrintBundle:{type:"bundle",name:"SCMP Digital + Plus + Daily Print + Daily ePaper",standardResources:[ew.digital,ew.plus,ew.ePaper,ew.print],family:["scmp"]},scmpPlusWeekdayPrintBundle:{type:"bundle",name:"SCMP Digital + Plus + Weekday Print + Weekday ePaper",standardResources:[ew.digital,ew.plus,ew.ePaper,ew.print],family:["scmp"]},scmpPlusWeekendPrintBundle:{type:"bundle",name:"SCMP Digital + Plus + Weekend Print + Weekend ePaper",standardResources:[ew.digital,ew.plus,ew.ePaper,ew.print],family:["scmp"]},dailyEPaperBundle:{type:"bundle",name:"SCMP Digital + Daily ePaper",standardResources:[ew.digital,ew.ePaper],family:["scmp"]},weekendPrintBundle:{type:"bundle",name:"SCMP Digital + Weekend Print + Weekend ePaper",standardResources:[ew.digital,ew.ePaper,ew.print],family:["scmp"]},weekdayPrintBundle:{type:"bundle",name:"SCMP Digital + Weekday Print + Weekday ePaper",standardResources:[ew.digital,ew.ePaper,ew.print],family:["scmp"]},dailyPrintBundle:{type:"bundle",name:"SCMP Digital + Daily Print + Daily ePaper",standardResources:[ew.digital,ew.ePaper,ew.print],family:["scmp"]}},eC={scmpPlusYp:{type:"bundle",name:"SCMP Digital + YP",standardResources:[ew.digital,ew.yp],family:["scmp","yp"]}},eS={postiesEPaperAndDigital:{type:"bundle",name:"Posties: ePaper + Digital",legacyName:"Posties ePaper + Digital",standardResources:[ew.postiesDigital,ew.postiesEPaper],family:["posties"]}},e_={ypOnlineScmpBundle:{type:"bundle",name:"YP Online SCMP Bundle",standardResources:[ew.digitalAccessGranted],family:["scmp"]},scmpAndYpSparkDigital:{type:"bundle",name:"SCMP Digital + YP Spark Digital",standardResources:[ew.digital,ew.yp,ew.ypSparkDigital],family:["scmp","yp"]},scmpPrintAndYpSparkDigitalAndPrint:{type:"bundle",name:"SCMP Print + YP Spark Digital + YP Spark Print",standardResources:[ew.print,ew.yp,ew.ypSparkDigital,ew.ypSparkPrint],family:["scmp","yp"]},scmpEpaperAndYpSparkDigitalAndPrint:{type:"bundle",name:"SCMP ePaper + YP Spark Digital + YP Spark Print",standardResources:[ew.ePaper,ew.yp,ew.ypSparkDigital,ew.ypSparkPrint],family:["scmp","yp"]},scmpEpaperAndYpSparkDigitalAndEpaper:{type:"bundle",name:"SCMP ePaper + YP Spark Digital + YP Spark ePaper",standardResources:[ew.ePaper,ew.yp,ew.ypSparkDigital,ew.ypSparkEpaper],family:["scmp","yp"]},b2bScmpDigital:{type:"bundle",name:"B2B: SCMP (Digital)",standardResources:[ew.digitalB2B],family:["scmp"]},b2bScmpDigitalAndPlus:{type:"bundle",name:"B2B: SCMP (Digital + Plus)",standardResources:[ew.digitalB2B,ew.plus],family:["scmp"]},b2bScmpEpaper:{type:"bundle",name:"B2B: SCMP (ePaper)",standardResources:[ew.ePaper],family:["scmp"]},b2bScmpDigitalAndEpaper:{type:"bundle",name:"B2B: SCMP (Digital + ePaper)",standardResources:[ew.digitalB2B,ew.ePaper],family:["scmp"]},b2bScmpDigitalAndEpaperAndPlus:{type:"bundle",name:"B2B: SCMP (Digital + ePaper + Plus)",standardResources:[ew.digitalB2B,ew.ePaper,ew.plus],family:["scmp"]},b2bScmpDigitalAndPrint:{type:"bundle",name:"B2B: SCMP (Digital + Print)",standardResources:[ew.digitalB2B,ew.print],family:["scmp"]},b2bScmpDigitalAndPrintAndEPaper:{type:"bundle",name:"B2B: SCMP (Digital + Print + ePaper)",standardResources:[ew.digitalB2B,ew.print,ew.ePaper],family:["scmp"]},b2bScmpDigitalAndPrintAndEPaperAndPlus:{type:"bundle",name:"B2B: SCMP (Digital + Print + ePaper + Plus)",standardResources:[ew.digitalB2B,ew.print,ew.ePaper,ew.plus],family:["scmp"]}},ek={accessGrantedScmpDigital:{type:"bundle",name:"Access Granted: SCMP (Digital)",standardResources:[ew.digitalAccessGranted],family:["scmp"]},accessGrantedScmpEpaper:{type:"bundle",name:"Access Granted: SCMP (ePaper)",standardResources:[ew.ePaper],family:["scmp"]},accessGrantedScmpPlus:{type:"bundle",name:"Access Granted: SCMP (Plus)",standardResources:[ew.plus],family:["scmp"]}},eA={...em,...ey,...ev,...eP,...eC,...eS,...e_,...ek};function eE(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function eT(e){let t=e.startsWith("Digital")?`SCMP ${e}`:e,r=Object.entries(eA).find(e=>{var r;return e[1].name===t||(null==(r=e[1])?void 0:r.legacyName)===t});return r&&r[0]}function eD(e){let t=RegExp(["Monthly","Yearly","Annual","1-Month","1-Year","2-Year"].map(e=>eE(e)).join("|"),"i");var r,n=(null!=(r=e.match(t))?r:[])[0];return n?({"1-Month":"1m","1-Year":"1y","2-Year":"2y",Monthly:"1m",Annual:"1y",Yearly:"1y"})[n]:void 0}class eR{static decodeTermName(e){return e?{...RegExp("^\\[(iOS|Android)] ","i").test(e)?function(e){return{billingCycle:eD(e),isCrossProduct:!1,isSwG:!1,isLatest:!1,platform:"mobile",resource:/Plus/i.test(e)?"scmpAndScmpPlusEPaper":"digital",resourceFamilies:["scmp"]}}(e):function(e){var t,r;let n=eD(e),i=function(e){var t;let r=RegExp(ep.map(e=>` \\| ${eE(e)}`).join("|"),"i");return(null!=(t=e.match(r))?t:[]).map(e=>e.replaceAll(" | ",""))[0]}(e),a=function(e){let t=(function(e){let t=new RegExp(eh.join("|"));return e.replace(t,"")})((e.includes("|")?e.replace(/^(?:\d|Monthly|Annual).*?\| /,""):"").replace(/ latest/i,"")).replace(new RegExp(/FY\d\d\d\dQ\d/i),"").replace(new RegExp(/CrossProduct/i),"").replace(new RegExp(/SwG \| External|SwG/i),"").replaceAll("|","").replaceAll(" ","");return ep.includes(t)?void 0:t.length>0?t:void 0}(e),s=function(e){var t;let r=RegExp(eh.map(e=>`${eE(e)}(?=)`).join("|"),"i");return(null!=(t=e.match(r))?t:[])[0]}(e),{resource:o,rawResourceName:l}=null!=(r=function(e){var t,r;let n=/\: (.+?)(?: \||$)/.exec(e);if(!n)return;let i=null!=(t=n[1])?t:"";return{resource:null!=(r=eT(i))?r:({AlipayHK:"digital"})[i],rawResourceName:i}}(e))?r:{},c=function(e){var t;let r=e.match(/FY[0-9]{4}Q[0-9]/);return r&&null!=(t=r[0])?t:""}(e),u=function(e){let t=RegExp("FY\\d{4}Q[1-4]\\s\\|\\sLatest+$","i"),r=RegExp("New price+$","i");return t.test(e)||r.test(e)}(e);return{billingCycle:n,currency:s,isCrossProduct:e.includes("CrossProduct"),isSwG:e.includes("SwG"),isLatest:u,platform:"desktop",resource:o,rawResourceName:l,resourceFamilies:o&&o in eA?null==(t=eA[o])?void 0:t.family:void 0,variant:i,unknown:a,version:c}}(e),decoded:!0}:{decoded:!1}}}function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}class eB{constructor(e){var t,r,n;r=[],(n=function(e){if("object"!=eM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=eM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t="filterFunctions"),(t="symbol"==eM(n)?n:n+"")in this)?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.conversions=e}filter(e){return this.filterFunctions.push(e),this}filterByBillingCycles(e){return this.filter(eF.byBillingCycles(e))}filterByResources(e){return this.filter(eF.byResources(e))}filterByResourceFamilies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subset";return this.filter(eF.byResourceFamilies(e,t))}filterByCustom(e){return this.filter(e)}sort(e){return this.sortFunction=e,this}sortByAccessStartDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return this.sort(eI.byUserAccessStartDate(e))}sortByCreateDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return this.sort(eI.byCreateDate(e))}sortByCustom(e){return this.sort(e)}execute(){let e=this.conversions.reduce((e,t)=>{let r=eR.decodeTermName(t.term.name);return!1===r.decoded||this.filterFunctions.every(e=>e(t,r))&&e.push(t),e},[]);return this.sortFunction?e.sort(this.sortFunction):e}}function e$(e){return new eB(e)}let eF={byBillingCycles:e=>(t,r)=>0===e.length||null!=r.billingCycle&&e.map(e=>e.toLowerCase()).includes(r.billingCycle),byResources:e=>(t,r)=>0===e.length||null!=r.resource&&e.includes(r.resource),byResourceFamilies:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subset";return(r,n)=>{var i;if(0===e.length)return!0;let a=null!=(i=n.resourceFamilies)?i:[];switch(t){case"exact":let s=new Set(e),o=new Set(a);return s.size===o.size&&[...s].every(e=>o.has(e));case"subset":return e.every(e=>a.includes(e));default:return!0}}}},eI={byUserAccessStartDate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return(t,r)=>{let n=t.user_access.start_date,i=r.user_access.start_date,a="desc"===e?1:-1;return n>i?-1*a:n<i?+a:0}},byCreateDate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return(t,r)=>{let n=t.create_date,i=r.create_date,a="desc"===e?1:-1;return n>i?-1*a:n<i?+a:0}}},eO=Object.entries(eA).reduce((e,t)=>{let[r,n]=t;return e.set(n,r),e},new Map);function eL(e){var t;try{if(!e)return null;let n=eA[e];if(!n)return null;switch(n.type){case"bundle":return Array.from(new Set(n.standardResources.reduce((e,t)=>{let n=r(t);return null!==n&&e.push(...n),e},[])));case"standard":return null!=(t=r(n))?t:[]}function r(e){var t;let r=eO.get(e);return r?[r,...null!=(t=e.additionalImpliedAccessibleResources)?t:[]]:null}}catch(t){return console.warn(`Failed to decode term name: ${e}`,t),null}}function eU(e){return({digital:`${eN.scmp}-${ej.digital}`,digitalAccessGranted:`${eN.scmp}-${ej.digital}(${eH.accessGranted})`,digitalB2B:`${eN.scmp}-${ej.digital}(${eH.b2b})`,digitalFree:`${eN.scmp}-${ej.digital}(${eH.free})`,digitalLite:`${eN.scmp}-${ej.digital}(${eH.lite})`,plus:`${eN.scmp}-${ej.plus}`,ePaper:`${eN.scmp}-${ej.ePaper}`,print:`${eN.scmp}-${ej.print}`,v1DailyPrint:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.daily}+${eH.v1})`,v1FriToSunPrint:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.friToSun}+${eH.v1})`,v1MonToFriPrint:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.weekday}+${eH.v1})`,v1MonToSatPrint:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.monToSat}+${eH.v1})`,v1WeekendPrint:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.weekend}+${eH.v1})`,dailyEPaperBundle:`${eN.scmp}-${ej.ePaper}${ej.bundle}(${eH.PERIOD.daily})`,weekendPrintBundle:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.weekend})`,weekdayPrintBundle:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.weekday})`,dailyPrintBundle:`${eN.scmp}-${ej.print}${ej.bundle}(${eH.PERIOD.daily})`,scmpAndScmpPlusEPaper:`${eN.scmp}-${ej.plus}${ej.ePaper}${ej.bundle}(${eH.PERIOD.daily})`,scmpPlusDailyPrintBundle:`${eN.scmp}-${ej.plus}${ej.print}${ej.bundle}(${eH.PERIOD.daily})`,scmpPlusWeekdayPrintBundle:`${eN.scmp}-${ej.plus}${ej.print}${ej.bundle}(${eH.PERIOD.weekday})`,scmpPlusWeekendPrintBundle:`${eN.scmp}-${ej.plus}${ej.print}${ej.bundle}(${eH.PERIOD.weekend})`,yp:`${eN.yp}-${ej.digital}`,ypPrint:`${eN.yp}-${ej.print}`,ypEpaper:`${eN.yp}-${ej.ePaper}`,scmpPlusYp:`${eN.scmp}-${ej.digital}+${eN.yp}-${ej.digital}`,ypSparkDigital:`${eN.ypSpark}-${ej.digital}`,ypSparkEpaper:`${eN.ypSpark}-${ej.ePaper}`,ypSparkPrint:`${eN.ypSpark}-${ej.print}`,postiesDigital:`${eN.posties}-${ej.digital}`,postiesEPaper:`${eN.posties}-${ej.ePaper}`,postiesEPaperAndDigital:`${eN.posties}-${ej.ePaper}${ej.bundle}`,postiesPrintAndDigital:`${eN.posties}-${ej.print}${ej.bundle}`,b2bScmpDigital:`${eH.b2b}:${eN.scmp}-${ej.digital}`,b2bScmpDigitalAndPlus:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.plus}`,b2bScmpEpaper:`${eH.b2b}:${eN.scmp}-${ej.ePaper}`,b2bScmpDigitalAndEpaper:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.ePaper}`,b2bScmpDigitalAndEpaperAndPlus:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.ePaper}+${ej.plus}`,b2bScmpDigitalAndPrint:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.print}`,b2bScmpDigitalAndPrintAndEPaper:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.print}+${ej.ePaper}`,b2bScmpDigitalAndPrintAndEPaperAndPlus:`${eH.b2b}:${eN.scmp}-${ej.digital}+${ej.print}+${ej.ePaper}+${ej.plus}`,scmpAndYpSparkDigital:`${eN.scmp}-${ej.digital}+${eN.ypSpark}-${ej.digital}+${eN.ypSpark}-${ej.digital}`,scmpEpaperAndYpSparkDigitalAndEpaper:`${eN.scmp}-${ej.ePaper}+${eN.yp}-${ej.digital}+${eN.ypSpark}-${ej.digital}+${ej.ePaper}`,scmpEpaperAndYpSparkDigitalAndPrint:`${eN.scmp}-${ej.ePaper}+${eN.yp}-${ej.digital}+${eN.ypSpark}-${ej.digital}+${ej.print}`,scmpPrintAndYpSparkDigitalAndPrint:`${eN.scmp}-${ej.print}+${eN.ypSpark}-${ej.digital}+${ej.print}`,ypOnlineScmpBundle:`${eN.scmp}-${ej.bundle}(${eH.ypOnline})`,accessGrantedScmpDigital:`${eH.accessGranted}:${eN.scmp}-${ej.digital}`,accessGrantedScmpEpaper:`${eH.accessGranted}:${eN.scmp}-${ej.ePaper}`,accessGrantedScmpPlus:`${eH.accessGranted}:${eN.scmp}-${ej.plus}`})[e]}let eN={scmp:"s",yp:"y",ypSpark:"ys",posties:"p"},ej={digital:"Dgt",ePaper:"Epr",print:"Prt",plus:"Pus",bundle:"B"},eH={accessGranted:"ag",free:"f",v1:"v1",PERIOD:{daily:"17",weekday:"15",weekend:"67",friToSun:"57",monToSat:"16"},lite:"l",ypOnline:"yo",b2b:"b"},eW="checkout/sdk",eY="checkout/template",eG={TEMPLATE_READY:"template/ready",SHOW_THANK_YOU:"popup/show-thank-you",SHOW_ALREADY_HAVE_ACCESS:"popup/show-already-have-access",SHOW_AUTHENTICATION:"popup/show-authentication",SHOW_ERROR:"popup/show-error"},ez=function(e){if("undefined"==typeof window)return;let t=new CustomEvent(eW,{detail:{eventType:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}});window.dispatchEvent(t)},eV=function(e){if("undefined"==typeof window)return;let t=new CustomEvent(eY,{detail:{eventType:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}});window.dispatchEvent(t)},eq=e=>{if("undefined"==typeof window)return()=>{};let t=t=>{e(t.detail.eventType,t.detail.data)};return window.addEventListener(eW,t),()=>{window.removeEventListener(eW,t)}},eK=e=>{if("undefined"==typeof window)return()=>{};let t=t=>{e(t.detail.eventType,t.detail.data)};return window.addEventListener(eY,t),()=>{window.removeEventListener(eY,t)}},eJ=()=>{eV(eG.TEMPLATE_READY)},eX=e=>{let{isPasswordlessUser:t,isOnboarding:r,email:n,termName:i,tpZone:a,isCloseable:s,resumeLink:o,triggerReloadOnClose:l}=e;ez(eG.SHOW_THANK_YOU,{isPasswordlessUser:t,isOnboarding:r,isCloseable:s,email:n,termName:i,tpZone:a,resumeLink:o,triggerReloadOnClose:l})},eZ=e=>{let{accessItemName:t,isCloseable:r=!0,userAccessStartDateUnixTimestamp:n,resumeLink:i,btnText:a}=e;ez(eG.SHOW_ALREADY_HAVE_ACCESS,{accessItemName:t,isCloseable:r,userAccessStartDateUnixTimestamp:n,resumeLink:i,btnText:a})},eQ=e=>{ez(eG.SHOW_AUTHENTICATION,e)},e0=()=>{ez(eG.SHOW_ERROR)},e1=()=>{document.body.style.overflow="hidden"},e2=()=>{document.body.style.overflow=""},e4=et("utils/rosetta"),e8={getConfig:()=>ea(eu.ROSETTA_CONFIG),setConfig(e){ei(eu.ROSETTA_CONFIG,e)},async fetchOffer(e){let t=e6(),{data:r}=await W().get(`${t}/api/offer/${e}`);return r.offer},async getOfferByName(e){let t=e6();try{var r,n;let i=await W().get(`${t}/api/offer/list`,{params:{q:e}});return 0!==(null==i||null==(r=i.data)?void 0:r.code)?[]:(null==(n=i.data)||null==(n=n.offers)?void 0:n[0])||[]}catch(e){return e4.error("getOfferByName()",e),[]}},async sendActivationEmail(e){let{email:t,destination:r}=e,n=e6(),{data:i}=await W().post(`${n}/api/email/activation`,{email:t,destination:r});return i},async fetchPromotionList(e){let t=e6(),{data:r}=await W().get(`${t}/api/promotion/list?q=${e}`);return r},async getPayment(e){if(!e)return null;let t=e6();try{let{data:r}=await W()({url:`${t}/api/payment/${e}`,method:"GET"});return{transactionId:null==r?void 0:r.transactionId}}catch(e){return null}},async getUserConversionStatusFromWebhook(e,t){try{var r,n;let i=null==(r=X(t))?void 0:r.email,a=e6(e),s=await W().post(`${a}/api/webhooks/user-conversion-status`,{orderBy:"create_date",orderDirection:"desc",userEmail:i});return null!=(n=null==s?void 0:s.data)?n:{}}catch(e){return e4.error("getUserConversionStatusFromWebhook()",e),{}}},logPianoExecution:async e=>{try{await W().post(`${e6()}/api/tracking/piano-execution?url=${encodeURIComponent(window.location.href)}&isTrackingConfigNull=${!0===e}`,{},{withCredentials:!0})}catch(e){return console.error("Error executing piano tracking:",{error:e}),null}},async checkCanSubscriptionUpgrade(e,t){try{var r;let n=e6(e),i=await W().get(`${n}/api/term/change/can?subscriptionId=${t}`);return null!=(r=null==i?void 0:i.data)?r:{}}catch(e){return e4.error("checkCanSubscriptionUpgrade",e),{}}}};function e6(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e8.getConfig();if(!e.uri)throw Error("Rosetta URI not set");return e.uri}let e5=Q.extend("modules/checkout/promotionUserTargeting/forbiddenPromotions"),e3={computeByApplication:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allPublisherConversions:[],targetApplication:"",rawPromotions:[],userTypes:{}},r=e9(t.rawPromotions),n=null!=(e=t.userTypes)?e:{},i={winback:[...r.newSubs,...r.renew],newUser:[...r.winback,...r.renew],default:[...r.winback,...r.newSubs]};switch(t.targetApplication){case ti.scmp:return"NEW_USER"===n.scmp?i.newUser:"DEFAULT"===n.scmp||"PRE_CHURN"===n.scmp?[...i.default,...r.newSCMP]:[...i.winback,...r.newSCMP];case ti.yp:return"NEW_USER"===n.yp?i.newUser:"DEFAULT"===n.yp?[...i.default,...r.newYP]:[...i.winback,...r.newYP];case ti.posties:return"NEW_USER"===n.posties?i.newUser:"DEFAULT"===n.posties?i.default:i.winback;default:return[]}},computeByUsedCodesFromCurrentUser:e=>{var t,r;let n=null!=(t=null==(r=e9(e.rawPromotions))?void 0:r.oneTime)?t:[],i=e7(e.allPublisherConversions),a=n.map(e=>e.code);return e5("usedPromoCodesByUser",i),i?i.filter(e=>a.includes(e)).map(e=>({type:"oneTime",code:e})):[]}},e7=e=>{let t=null!=e?e:[];return t?t.reduce((e,t)=>{var r,n;let i=null!=(r=null==t||null==(n=t.promo_code)?void 0:n.code)?r:null;return null!==i?[...e,i]:e},[]):[]},e9=function(){let e={"new-subs-only":"newSubs","renew-only":"renew","churned-only":"winback","new-scmp-only":"newSCMP","new-yp-only":"newYP","one-time-only":"oneTime"},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((t,r)=>{var n,i,a;let s=null!=(n=null==(i=r.name)?void 0:i.toLowerCase())?n:"",o=null!=(a=null==r?void 0:r.fixed_promotion_code)?a:"",l=Object.keys(e).find(e=>s.includes(e));return l&&o&&!t[e[l]].has(o)&&t[e[l]].set(o,{code:o,type:e[l]}),t},{newSCMP:new Map,newSubs:new Map,newYP:new Map,oneTime:new Map,renew:new Map,winback:new Map});return Object.fromEntries(Object.entries(t).map(e=>{let[t,r]=e;return[t,Array.from(r,e=>{let[t,r]=e;return r})]}))},te="forbiddenPromotion",tt=async()=>{let e=tr.get();if(e)return e5("Using cached forbidden promotions"),e;let{promotions:t=[]}=await e8.fetchPromotionList("-only");return tr.set(t),t},tr={get:()=>{if("undefined"==typeof window)return null;try{let e=localStorage.getItem(te);if(!e)return null;let{forbiddenPromotions:t=[],expiry:r=""}=JSON.parse(e);return new Date(r)<new Date||0===t.length?(localStorage.removeItem(te),null):t}catch(e){return e5("Error fetching forbidden promotion cache:",e.message),null}},set:e=>{let t=new Date;t.setHours(t.getHours()+1);let r=JSON.stringify({forbiddenPromotions:e,expiry:t});localStorage.setItem(te,r)}},tn=Q.extend("modules/checkout/promotionUserTargeting"),ti={scmp:"scmp",yp:"yp",posties:"posties"},ta=Q.extend("utils/channel"),ts="COMM_CHANNEL",to=!1,tl=new Set,tc=()=>"undefined"!=typeof window,tu=e=>{let t,r,n;"message"===k()(e,"type","")?(t="message",r=k()(e,"source",""),n=k()(e,"data","")):(t="custom",r="",n=k()(e,"detail",""));let i={type:t,source:r,message:n};return ta("messageBuilder::output: %o",i),i},td=e=>{if("message"===k()(e,"type","")){let t=k()(e,"data.channel");t&&tl.has(t)&&(ta("messageHandler::received postMessage from %s: %o",t,e),ad.emit(ts,tu(e)))}else ta("messageHandler::received custom event %o",e),ad.emit(ts,tu(e))},tf=(e,t)=>{if(!tc())return void ta("sendMessage::window is undefined");let r=k()(t,"message");if(E()(r))ta("sendMessage::data.message is empty: %o",t);else if("message"===k()(t,"type","")){let n=k()(t,"source");if(!n)return void ta("sendMessage::source can not be empty for postMessage event type: %o",t);ta("sendMessage::using postMessage to send %o",{channel:e,...r}),n.postMessage({channel:e,...r},"*")}else ta("sendMessage::using custom event channel %s to send message %o",e,r),window.dispatchEvent(new CustomEvent(e,{detail:r}))},th=e=>{ta("registerListener::channel: %s",e),tc()?(to||(ta("addMessageListener::added postMessage listener"),window.addEventListener("message",td,!1),to=!0),ta("addMessageListener::listening to channel %s",e),tl.add(e)):ta("addMessageListener::window is undefined"),tc()?(ta("addCustomEventListener::listening to channel: %s",e),window.addEventListener(e,td,!1)):ta("addCustomEventListener::window is undefined")},tx=e=>{ta("removeListener::channel: %s",e),tl.delete(e),window.removeEventListener(e,td,!1)},tb=eR.decodeTermName,tg={digital:"digital"},tm={"digital + daily epaper":"dailyEPaperBundle","digital + weekend print + weekend epaper":"weekendPrintBundle","digital + weekday print + weekday epaper":"weekdayPrintBundle","digital + daily print + daily epaper":"dailyPrintBundle"},ty={"digital + plus + daily epaper":"scmpAndScmpPlusEPaper"},tv={"digital + plus + daily print + daily epaper":"scmpPlusDailyPrintBundle","digital + plus + weekend print + weekend epaper":"scmpPlusWeekendPrintBundle","digital + plus + weekday print + weekday epaper":"scmpPlusWeekdayPrintBundle"},tw={"posties epaper + digital":"postiesEPaperAndDigital","posties print + digital":"postiesPrintAndDigital"},tP={yp:"yp","digital + yp":"scmpPlusYp"};function tC(e){let[t,r]=e.split(" / "),n=(e,t)=>{let r=e.exec(t);if(null==r||!r.groups)return null;let{currency:n,price:i,frequency:a,billingPeriod:s}=r.groups;return{currency:"$"===n?"USD":n,price:"free"===i?0:parseFloat(i.replace(/,/g,"")),frequency:void 0===a?1:parseInt(a.replace(/,/g,"")),billingPeriod:s}},i=n(/^(?<currency>EUR|USD|CAD|AUD|SGD|PHP|MYR|GBP|HKD|\$)?(?<price>[\d,]*\.[\d,]*)?.?(?:every (?<frequency>[\d,]+)|per)?.?(?:(?<billingPeriod>year|month|week|day)s?)$/,t),a=n(/(?<currency>EUR|USD|CAD|AUD|SGD|PHP|MYR|GBP|HKD|\$)?(?<price>[\d,]*\.[\d,]*|free).+(?:for (?<frequency>[\d,]*) (?<billingPeriod>year|month|week|day)s?)$/,r);return{rack:i,trial:{...a,currency:(null==a?void 0:a.currency)||(null==i?void 0:i.currency)}}}function tS(e){let{decodedTerm:t}=e;return null!=t&&t.resource?new Set(Object.values({...tg,...tm,...ty,...tv})).has(t.resource)?"scmp":new Set(Object.values(tP)).has(t.resource)?"yp":new Set(Object.values(tw)).has(t.resource)?"posties":"unknown":"unknown"}function t_(e){let{term:t}=e,{resource:r}=tb(t.name);return r?new Set(Object.values({...tg,...tm})).has(r)?"scmp(standard)":new Set(Object.values(ty)).has(r)?"scmp(plus)":new Set(Object.values(tv)).has(r)?"scmp(bundle-plus)":new Set(Object.values(tP)).has(r)?"yp":new Set(Object.values(tw)).has(r)?"posties":"unknown":"unknown"}let tk=e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({subscribe:e})},tA=(e,t)=>{tE(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{let r=Object.assign({},e.customized_parameters,t.customized_parameters);return{...e,...t,customized_parameters:r}},{})}([{event:"GA4_tracking",category:"subs",customized_parameters:{...t.rulesEngine.getOutcome("tracking.ga4.baseParameters"),trigger_point:"paywall"}},e]))},tE=e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)};function tT(e){let{sdk:t,callToAction:r,billingCountryName:n,paymentTaxRate:i,paymentMethod:a,termId:s}=e;tA({subcategory:"shopping_cart",action:"click",customized_parameters:{payment_method:a,term_offer_selected:s,payment_tax_rate:i,payment_country:n,...r&&{call_to_action:r}}},t)}function tD(e){let{scmpUrl:t,application:r}=e;return({scmp:`${t}`,yp:`${t}/yp`,posties:`${t}/posties`})[r]||""}let tR=Q.extend("modules/checkout/passwordless"),tM={async handleCheckoutComplete(e){let{conversion:t,checkoutTerm:r,scmpUrl:n}=e;if(tB()){let e=t.email;try{tR("sending activation email",{email:e}),await e8.sendActivationEmail({email:t.email,destination:tD({scmpUrl:n,application:tS({decodedTerm:eR.decodeTermName(r.name)})})}),tR("sending activation email completed",{email:e})}catch(t){tR.error("failed to send activation email",{email:e,error:t})}}}};function tB(){let e=G.get("scmp_pat");return!!e&&!!X(e).tmp}let t$=e=>{let[t]=e.split(" | "),[r,n]=t.split(": ");return n?`${r}: ${tI(n)}`:t};function tF(e){return({"14D":"14-Day","1M":"1-Month","2M":"2-Month","3M":"3-Month","1Y":"1-Year","2Y":"2-Year"})[e.toUpperCase()]}let tI=e=>({"digital + daily epaper":"Daily (Mon-Sun) Bundle","digital + weekend print + weekend epaper":"Weekend (Sat-Sun) Bundle","digital + weekday print + weekday epaper":"Weekday (Mon-Fri) Bundle","digital + daily print + daily epaper":"Daily (Mon-Sun) Bundle","digital + scmp plus + daily epaper":"Plus","digital + plus + daily epaper":"Plus","digital + plus + weekend print + weekend epaper":"Bundle Plus (Weekend)","digital + plus + weekday print + weekday epaper":"Bundle Plus (Weekday)","digital + plus + daily print + daily epaper":"Bundle Plus (Daily)"})[e.toLowerCase().replace(/^scmp /,"")]||e,tO=Q.extend("modules/checkout"),tL=(()=>{let e="subscription_checkout_session";return{save:t=>{let{term:r,offerId:n,trackingId:i,paymentMethod:a,hiddenPromoCode:s}=t;sessionStorage.setItem(e,JSON.stringify({term:r,offerId:n,paymentMethod:a,trackingId:i,hiddenPromoCode:s}))},resumeIfSessionExists:t=>{var r;let{sdk:n,setPaymentMethod:i}=t,a=JSON.parse(sessionStorage.getItem(e));if(!a||null==(r=tz())||!r.user.isUserValid())return;let{paymentMethod:s}=a;i(s),sessionStorage.removeItem(e),setTimeout(()=>{try{tO("resuming session",a),tU({...a,sdk:n})}catch(e){tO("error: failed to resume session",e.message)}},0)}}})();function tU(e){let{term:t,sdk:r,offerId:n,paymentMethod:i,trackingId:a,hiddenPromoCode:s}=e;if(function(e){var t,r,n,i,a,s,o,l;let{checkoutTerm:c,sdk:u}=e;if(!c||!u)return!1;let d=u.rulesEngine.getFact("activeConversions")||[],{isAlipaySubscriber:f,isActiveExternalSubscriber:p,isSiteLicenseSubscriber:h,isSCMPSubscriber:x}=u.rulesEngine.getOutcome("user")||{},b=!!x&!!d.find(e=>e.term.type.includes("external")),{isUserHasToBeBlocked:g,isSubscribeRepeatedResource:m,conversionsCoveredTermResources:y}=function(e){let{checkoutTerm:t,subscribeAction:r,activeConversions:n,userInfo:i}=e,a=function(e){let{userInfo:t}=e;if(!t)return!1;let{isExternalSubscriber:r,isAlipaySubscriber:n,isActiveExternalSubscriber:i,isSiteLicenseSubscriber:a,isSCMPSubscriber:s}=t;return r||n||i||a&&s}({userInfo:i}),s=function(e,t){if(null==e||!e.length||null==t||!t.name)return[];let r=eL(eR.decodeTermName(t.name).resource);if(!r||!r.length)return[];let n=e.filter(e=>{var t,n,i,a;if(null==e||null==(t=e.term)||!t.name)return!1;let s="grant_access"===(null==e||null==(n=e.term)?void 0:n.type)?eT(null==e||null==(i=e.term)||null==(i=i.resource)?void 0:i.name):eR.decodeTermName(null==e||null==(a=e.term)?void 0:a.name).resource;if(!s)return!1;let o=eL(s);if(!o||!o.length)return!1;let l=new Set(o);return r.every(e=>null==l?void 0:l.has(e))});return n.length?n.sort((e,t)=>{let r=Number(e.create_date)||0;return(Number(t.create_date)||0)-r}):[]}(n,t);return{isUserHasToBeBlocked:a,isSubscribeRepeatedResource:"UPGRADE"!==r&&"RENEW"!==r&&s.length>0,conversionsCoveredTermResources:s}}({checkoutTerm:c,subscribeAction:c.subscribeAction,activeConversions:d,userInfo:{isExternalSubscriber:b,isAlipaySubscriber:f,isActiveExternalSubscriber:p,isSiteLicenseSubscriber:h,isSCMPSubscriber:x}});if(g){let e=d[0];return eZ({accessItemName:tI(null==(t=c.resource)?void 0:t.name),isCloseable:!0,userAccessStartDateUnixTimestamp:null!=(r=null==e||null==(n=e.user_access)?void 0:n.start_date)?r:0,btnText:"RESUME READING"}),!0}if(m){let e=null==y?void 0:y[0];return eZ({accessItemName:"grant_access"===(null==e||null==(i=e.term)?void 0:i.type)?tI(null==e||null==(a=e.term)||null==(a=a.resource)?void 0:a.name):`${t$(null==e||null==(s=e.term)?void 0:s.name)} Subscription`,isCloseable:!0,userAccessStartDateUnixTimestamp:null!=(o=null==e||null==(l=e.user_access)?void 0:l.start_date)?o:0,btnText:"RESUME READING"}),!0}return!1}({checkoutTerm:t,sdk:r}))return null;let o=tz();o.setCustomVariable("paymentMethod",i),o.setCustomVariable("hiddenPromoCode",s),o.setCustomVariable("checkoutTerm",{subscribeAction:"SUBSCRIBE"}),o.offer.startCheckout({termId:t.termId,offerId:n,showCloseButton:!0,trackingId:a,promoCode:s}),e1(),tN(),tk({currency:t.currency,plan:t.name,price:t.chargePrice}),function(e){var t;let{sdk:r,termName:n,paymentMethod:i,termId:a}=e;tA({subcategory:"shopping_cart",action:"imp",customized_parameters:{payment_method:i,call_to_action:"subscribe",term_offer_selected:a,lts_bucket:null==r||null==(t=r.rulesEngine)?void 0:t.getFact("ltsBucket"),product_type:t_({term:{name:n}})}},r)}({sdk:r,termName:t.name,paymentMethod:i,termId:t.termId,promoCode:s})}let tN=()=>{setTimeout(()=>{let e=[...window.document.getElementsByClassName("tp-modal")].pop(),t=[...window.document.getElementsByClassName("tp-iframe-wrapper")].pop();e.classList.add("checkout"),t.classList.add("checkout");let r=e=>{"block"===e.style.display&&(e.style.display="flex")};r(e),new MutationObserver(e=>{for(let t of e)"attributes"===t.type&&"style"===t.attributeName&&r(t.target)}).observe(e,{attributes:!0})},500)},tj=Q.extend("utils/piano"),tH={tp:null,config:{debug:!1,aid:null,env:"sandbox",apiUri:"https://sandbox.piano.io/api/v3"},token:null},tW=e=>{tj("pianoSetDebug()",{debug:e}),T()||(tH.tp=window.tp||[],tH.tp.push(["setDebug",e]))},tY=()=>ea(eu.PIANO_CONFIG),tG=()=>tH.token,tz=()=>tH.tp,tV=e=>{tH.token=null;let t=e||G.get("scmp_pat");if(Z(t))try{let e=Math.floor(Date.now()/1e3);k()(X(t),"exp",0)>=e?(tH.token=t,T()||(tH.tp=window.tp||[],tH.tp.push(["setExternalJWT",tH.token]))):tj("pianoSetToken()","token expired")}catch(e){tj("pianoSetToken()",e.message)}else tj("pianoSetToken()","token not found")},tq=e=>{tj("pianoSetPageUrl()",{pageUrl:e}),T()||(tH.tp=window.tp||[],tH.tp.push(["setPageURL",e]))},tK=async(e,t)=>{let r=Object.assign({},t,{user_provider:"piano_id_lite"}),n=Object.assign({},{url:`${e}`},T()?{method:"POST",params:r}:{method:"GET",params:r,adapter:V()});return W()(n)},tJ=()=>ea(eu.CS_CONFIG);var tX=n(7579),tZ=n.n(tX),tQ=n(7787),t0=n.n(tQ),t1=n(5874),t2=n.n(t1),t4=n(5956),t8=n.n(t4),t6=n(9136),t5=n.n(t6),t3=n(849),t7=n.n(t3),t9=n(5179),re=n.n(t9);let rt=Q.extend("rulesEngine/index");class rr{constructor(e){this._rule={key:e,waitFor:[],enabled:!0,executed:!1,priority:1,stage:1}}waitFor(e){return t2()(e)&&e.length>0?this._rule.waitFor=e:"string"==typeof e&&""!==e&&(this._rule.waitFor=[e]),this}when(e){return t0()(e)?this._rule.when=e:rt(`[${this._rule.key}]: argument passed to when() must be a function`),this}then(e){return this._rule.then=e,this}fallback(e){return this._rule.fallback=e,this}priority(e){return this._rule.priority=e,this}stage(e){return this._rule.stage=e,this}deprecate(e){return rt(`[${this._rule.key}] is deprecated, reason: ${e}`),this}disable(){return this._rule.enabled=!1,rt(`[${this._rule.key}] disabled`),this}enable(){return this._rule.enabled=!0,rt(`[${this._rule.key}] enabled`),this}reset(){return this._rule.executed=!1,rt(`[${this._rule.key}] reset`),this}async execute(e,t){if(!0===this._rule.enabled)try{if(this._rule.executed=!0,this._rule.when(e,t))return rt(`  [${this._rule.key}] passed the condition test`),t0()(this._rule.then)?await this._rule.then(e,t):this._rule.then;if(rt(`  [${this._rule.key}] failed the condition test`),t0()(this._rule.fallback))return await this._rule.fallback(e,t);if(void 0!==this._rule.fallback)return this._rule.fallback}catch(e){rt(`  error when executing [${this._rule.key}]: ${e.message}`)}else rt(`  [${this._rule.key}] is disabled, skipped`)}get rule(){return this._rule}}class rn{constructor(){this._ruleSet={},this._facts={},this._outcome={},this._ready=[],this._locked=!1}addRule(e){if(void 0!==e&&e instanceof rr){let{key:t,priority:r,stage:n}=e.rule;rt(`adding rule [${t}] (stage: ${n}, priority: ${r})`),this._ruleSet[t]?r>this._ruleSet[t].rule.priority?(rt(`  [${t}] (priority: ${r}) overwrites [${t}] (priority: ${this._ruleSet[t].rule.priority})`),this._ruleSet[t]=e):rt(`  [${t}] (priority: ${r}) dropped because higher priority one exists: [${t}] (priority: ${this._ruleSet[t].rule.priority})`):this._ruleSet[t]=e}else rt(`  ${e} is not a Rule object`)}setReady(e){rt(`[${e}] is ready`),this._ready.push(e)}getRule(e){return t5()(this._ruleSet[e])}getRuleSet(){return t5()(this._ruleSet)}addFact(e,t){let{replace:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rt(`adding fact [${e}]`),!this._facts[e]||r?this._facts[e]=t:rt(`  fact [${e}] already exists, skipped`)}getFact(e){return t5()(this._facts[e])}getAllFacts(){return t5()(this._facts)}prepare(e){if(E()(e))return void rt("  ruleSet is empty, nothing to execute");let t=[];for(let r of Object.values(e)){let{key:e,waitFor:n,executed:i,enabled:a}=r.rule;!0===a?!0!==i?n.length>0&&0!==t8()(n,this._ready).length?rt(`  ${e} is still waiting for [${n}], current ready list [${this._ready}], will not execute`):t.push(r):rt(`  ${e} already executed, will not execute`):rt(`  ${e} is disabled, will not execute`)}return t.sort((e,t)=>e.rule.stage-t.rule.stage),t.reduce((e,t)=>(E()(e)?e.push([t]):t.rule.stage===t7()(re()(e)).rule.stage?re()(e).push(t):e.push([t]),e),[])}async run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._locked&&(rt("warn: run() triggered while executing rules, hold for %d ms",800),await new Promise(e=>setTimeout(e,800))),rt("---------- executing rules -------------"),this._locked=!0;let t=this.prepare(this._ruleSet);if(!E()(t)){let r=t5()(this._facts);for(let[n,i]of t.entries()){rt(`executing group [${Number(n)+1}]: ${i.length} rules`);let t=t5()(this._outcome),a=i.map(e=>e.execute(r,t)),s=await Promise.all(a);for(let[t,r]of i.entries()){let{key:n}=r.rule;rt(`  set outcome [${n}] with result: %o`,s[t]),tZ()(this._outcome,n,s[t]),ad.emit(`outcome.${n}`,s[t],e)}}}ad.emit("onEngineRun",e),this._locked=!1}getOutcome(e){return t5()(k()(this._outcome,e))}getAllOutcome(){return t5()(this._outcome)}}var ri=new rn;let ra=Q.extend("services/geo"),rs=async()=>{try{let e=(()=>{let e=rZ("geo");if(E()(e))return ra("prepareRequestConfig()","empty serviceConfig"),null;let t=k()(e,"apiUri"),r=k()(e,"apiKey");return t&&r?{method:"get",url:t,headers:{apiKey:r,"Access-Control-Allow-Origin":"*"},timeout:2e3,responseType:"json"}:(ra("prepareRequestConfig()","apiUri and apiKey are required"),null)})();if(E()(e))return null;let t=await W().request(e),r=k()(t,"data.CF-IPCountry",null),n=k()(t,"data.IP",null);return ra("getGeo()",{ipCountry:r,ip:n}),{ipCountry:r,ip:n}}catch(e){ra("getGeo()",e.message)}},ro="tierInfo",rl=Q.extend(`services/${ro}`),rc=async()=>{try{let e=JSON.parse(G.get("scmp_user")||"{}"),t=k()(e,"useremail","").toLowerCase();if(E()(t))return rl("getTierInfo()","userEmail is empty"),null;let r=(()=>{let e=rZ(ro);if(E()(e))return rl("prepareRequestConfig()","empty serviceConfig"),null;let t=k()(e,"apiUri"),r=k()(e,"apiKey");if(!t||!r)return rl("prepareRequestConfig()","apiUri and apiKey are required"),null;let n={method:"post",url:t,headers:{apiKey:r},timeout:2e3,responseType:"json"};return rl("prepareRequestConfig()",n),n})();if(E()(r))return null;r.data={email:t};let n=await W().request(r),i=k()(n,"data.Tier");return rl("getTierInfo()",i),i}catch(e){rl("getTierInfo()",e)}},ru="pianoUserInfo",rd=Q.extend(`services/${ru}`),rf=(e,t)=>{let r=JSON.parse(G.get("scmp_user")||"{}"),n=k()(r,"uuid");if(E()(n))return rd("getPianoUserInfo()","userId is empty"),null;let i=rZ(ru);if(E()(i))return rd("getPianoUserInfo()","empty serviceConfig"),null;let a=k()(i,"aid"),s=k()(i,"apiUri");return s&&a?E()(s)?(rd("prepareRequestConfig()","apiUri is required"),null):{method:"post",url:`${s}${e}`,timeout:8e3,responseType:"json",data:{...t,uid:n}}:(rd("getPianoUserInfo()","apiUri and aid are required"),null)},rp=async()=>{try{let e=rf("/get");if(!e)return null;let t=await W().request(e),r=k()(t,"data.user");return rd("getPianoUserInfo()",r),r}catch(e){rd("getPianoUserInfo()",e)}},rh=async e=>{try{let t=rf("/swg/linking",{hasShownSwGLinkingFlow:e});if(E()(t))return null;let r=await W().request(t),n=k()(r,"data.success"),i=k()(r,"data.error");return rd("updatePianoUserHasShownSwGLinkingFlowField()",{success:n,error:i}),n}catch(e){rd("updatePianoUserHasShownSwGLinkingFlowField()",e)}},rx=async e=>{try{let t=rf("/scmp-plus-welcome-popup",{hasShownSCMPPlusWelcomePopUp:e});if(E()(t))return null;let r=await W().request(t),n=k()(r,"data.success"),i=k()(r,"data.error");return rd("updatePianoUserHasShownSCMPPlusWelcomePopUpField()",{success:n,error:i}),n}catch(e){rd("updatePianoUserHasShownSCMPPlusWelcomePopUpField()",e)}},rb="pianoPublisherConversions",rg=Q.extend(`services/${rb}`),rm=async e=>{let{config:t,scmpUserCookie:r}=e;try{let e=null!=t?t:rZ(rb);if(E()(e))return rg("getPianoPublisherConversions()","empty serviceConfig"),null;let n=k()(e,"aid"),i=k()(e,"apiUri");if(!i||!n)return rg("getPianoPublisherConversions()","apiUri and aid are required"),null;let a=JSON.parse((null!=r?r:G.get("scmp_user"))||"{}"),s=k()(a,"uuid");if(E()(s))return rg("getPianoPublisherConversions()","userId is empty"),null;let o=E()(i)?(rg("prepareRequestConfig()","apiUri is required"),null):{method:"post",url:i,timeout:8e3,responseType:"json"};if(E()(o))return null;o.data={uid:s};let l=await W().request(o),c=k()(l,"data.conversions");return rg("getPianoPublisherConversions()",c),c}catch(e){rg("getPianoPublisherConversions()",e.message)}},ry=e=>{let{jsLink:t,tagId:r}=e,n=Q.extend(`addScript() tagId:${r}`);try{if(!t)return void n("jsLink is not available");if(document.getElementById(r))return void n("tagId already exists");let e=document.createElement("script");e.setAttribute("id",r),e.src=t,e.defer=!0,document.head.appendChild(e)}catch(e){n("[Error]",e.message)}},rv=e=>{var t;let{filename:r}=e,n=Q.extend(`getTemplateBuilderLink() filename:${r}`),i=null==(t=tJ())?void 0:t.env;if(!i)return void n("env is not available");let a="production"===i?"https://assets.i-scmp.com/subscription-template":"https://product-web-scmp-pwa-dev.oss-cn-hongkong.aliyuncs.com/subscription-template",s=`${r}?ts=${Math.round(Date.now().valueOf()/1e3/60/60)}`;if("production"===i)return`${a}/${s}`;let o=new URLSearchParams(window.location.search).get("branch");return E()(o)?`${a}/staging/${s}`:"localhost"===o?`http://localhost:6016/dev/${s}`:`${a}/${o}/${s}`},rw=Q.extend("services/onboarding"),rP="onboarding-script",rC=async()=>{try{let e=rv({filename:"subscriberonboarding.js"});ry({jsLink:e,tagId:rP})}catch(e){rw("addOnboardingScript()",e.message)}},rS=()=>{try{document.getElementById(rP).remove()}catch(e){rw("removeOnboardingScript()",e.message)}},r_=async e=>{if(T())return await r2(null==e?void 0:e.contentService);{let t=ea(eu.APP_CONFIG);if(Z(t))return t;let r=await r2(null==e?void 0:e.contentService);return r&&ei(eu.APP_CONFIG,r),r}},rk="cartAbandoner",rA=Q.extend(`services/${rk}`),rE=e=>!(!e||""===e)&&!!G.get(e),rT=()=>{let{cookieDomain:e}=rZ(rk);if(e)return{expires:90,domain:e,secure:!0}},rD=e=>{try{let t=rv({filename:e});ry({jsLink:t,tagId:"cart-abandoner-script"})}catch(e){rA("addAbandonerScript()",e.message)}},rR=e=>{if(rE(e))return void rA(`addCookie(): cookie [${e}] already exists`);let t=rT();t&&(rA(`addCookie(): setting cookie [${e}]`),G.set(e,"i",t))},rM=e=>{let t=G.get(e);return t&&t.startsWith("i")?t:null},rB=e=>{let t=rM(e);if(t){let r=rT();return!!r&&(rA(`updateCookie(): updating cookie [${e}]`),G.set(e,`${t}:${(()=>{let e=new Date;return(e.getMonth()+1).toString().padStart(2,"0")+e.getDate().toString().padStart(2,"0")+e.getHours().toString().padStart(2,"0")})()}`,r),!0)}return!1},r$=e=>{let t=rT();e&&t&&G.remove(e,t)},rF=()=>{rA("showRegisterOfferOnNextVisit(): adding cookie A"),rR("_caA")},rI=()=>{rA("showCartAbandonerOfferOnNextVisit(): adding cookie B"),rR("_caB"),rA("showCartAbandonerOfferOnNextVisit(): removing cookie A"),r$("_caA")},rO=async()=>{await (async()=>{var e,t;let{userTypeApiUri:r}=rZ(rk);if(!r)return void rA("isCartAbandonerUserType(): no userTypeApiUri");if(!rE("scmp_pat"))return void rA("isCartAbandonerUserType(): not a registered user, skip calling api");if(rE("_caB"))return void rA("isCartAbandonerUserType(): cookie B exists, skip calling api");let n=null==(e=window)||null==(e=e.ga)||null==(e=e.getAll())||null==(e=e[0])?void 0:e.get("clientId");if(!n)return void rA("isCartAbandonerUserType(): no gaId, skip calling api");let i=await W().get(`${r}/${n}`);return!!(null==i||null==(t=i.data)||null==(t=t.data)||null==(t=t.user_types)?void 0:t.find(e=>e&&e.id&&"009"===e.id))})()&&rI()},rL=async()=>{var e;let t=await r_({piano:tY(),contentService:tJ(),rosetta:e8.getConfig()});null!=t&&null!=(e=t.cartAbandoner)&&e.showRegisterOffer&&(rM("_caA")?(rA("showRegisterOffer(): adding cartabandonerregister.js"),rD("cartabandonerregister.js"),rA("pause the abandon plan experience (1-m free trial)")):rA("showRegisterOffer(): cookie check failed, will not show offer"))},rU=async()=>{var e;let t=await r_({piano:tY(),contentService:tJ(),rosetta:e8.getConfig()});null!=t&&null!=(e=t.cartAbandoner)&&e.showAbandonOffer&&(rM("_caB")?(rA("showCartAbandonerOffer(): adding cartabandoner.js"),rD("cartabandoner.js")):rA("showCartAbandonerOffer(): cookie check failed, will not show offer"))},rN=()=>{rA("registerOfferShown(): update cookie counter"),rB("_caA")},rj=()=>{rA("cartAbandonerOfferShown(): update cookie counter"),rB("_caB")},rH=()=>{r$("_caA"),r$("_caB")},rW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isSCMPSubscriber:t,hasToken:r,isRosetta:n}=e;if((()=>{if(!window||!window.localStorage)return!1;try{let e=localStorage.getItem("_cartAbandoner_claim_flag");return e&&"yes"===e}catch(e){return rA.error("hasCartAbandonerClaimFlag: ",e.message),!1}})())r&&rL();else{if(t)return void rH();if(r){let e=rM("_caB");e&&e.split(":").length<2&&rU()}else{let e=rM("_caA");e&&e.split(":").length<2&&rL()}n?r?rI():rF():rO()}},rY=Q.extend("services/masthead"),rG=async()=>{try{if(!document.getElementById("template-builder-container--mastheadrenewpopup")){let e=document.createElement("div");e.setAttribute("id","template-builder-container--mastheadrenewpopup"),document.body.appendChild(e)}let e=rv({filename:"mastheadrenewpopup.js"});ry({jsLink:e,tagId:"masthead-renew-pop-up-script"})}catch(e){rY("addMastheadScript()",e.message)}},rz=Q.extend("services/campaign-pop-up"),rV=async()=>{try{let e=rv({filename:"campaignPopup.js"});ry({jsLink:e,tagId:"campaign-pop-up-script"})}catch(e){rz("addCampaignPopUpScript()",e.message)}},rq=e=>{let{tracking:t}=e;tf("sdk/response-from-sdk",{message:{requestType:"popup/show-campaign-popup",responseData:{...t}}})},rK=Q.extend("services"),rJ={geo:o,tierInfo:l,pianoUserInfo:c,pianoPublisherConversions:u,onboarding:d,cartAbandoner:f,mastheadRenewPopUp:p,campaignPopUp:h},rX={config:{},service:{}},rZ=e=>{if(!E()(e))return k()(rX.config,e,null);rK("servicesGetConfig()","serviceName not provided")},rQ=Q.extend("rulesEngine/apiCalls"),r0=async e=>{let{apiUri:t,aid:r,token:n}=e;if(!t||!r)return rQ("getConversions(): apiUri and aid are required"),[];let i=null!=n?n:tG();rQ("getConversions(): getting conversions from piano");let a=await tK(`${t}/conversion/list`,{aid:r,user_token:i,offset:0});return 200===a.status&&0===a.data.code?k()(a,"data.conversions",[]):(rQ("getConversions()::error:%s",k()(a,"data.message")),[])},r1=async e=>{let{apiUri:t,aid:r,token:n}=e;if(!t||!r)return rQ("getSubscriptions(): apiUri and aid are required"),[];let i=null!=n?n:tG();rQ("getSubscriptions(): getting subscriptions from piano");let a=await tK(`${t}/subscription/list`,{aid:r,user_token:i,offset:0});return 200===a.status&&0===a.data.code?k()(a,"data.subscriptions",[]):(rQ("getSubscriptions()::error:%s",k()(a,"data.message")),[])},r2=async e=>{let{env:t,apiUri:r,apiKey:n}=e;if(r&&n&&t)try{rQ("getAppConfig(): getting app config from graphql");let e=await W()({url:r,method:"POST",data:{query:'{ appConfig(filter: {entityId: "rosetta"}) { json } }'},headers:{apikey:n,"Access-Control-Allow-Origin":"*"}});if(200===e.status)return k()(e,`data.data.appConfig.json.${"production"===t?"production":"dev"}`,{});rQ("getAppConfig()::error:%s",`status code ${e.status}`)}catch(e){rQ("getAppConfig()::error:%s",e.message)}else rQ("getAppConfig(): apiUri, apiKey and env are required")},r4=e8.getUserConversionStatusFromWebhook,r8=e8.checkCanSubscriptionUpgrade,r6=Q.extend("rulesEngine/facts/guest"),r5=async function(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.addFact("unSupportedGeos","IN"),e.addFact("seaCountries","SG, PH, MY, IN, ID, BN, MM, TL, LA, TH, VN"),e.addFact("euCountries","AD, AL, AT, AX, BA, BE, BG, BY, CH, CY, CZ, DE, DK, EE, ES, FI, FO, FR, GB, GG, GI, GR, HR, HU, IE, IM, IS, IT, JE, LI, LT, LU, LV, MC, MD, ME, MK, MT, NL, NO, PL, PT, RO, RS, RU, SE, SI, SJ, SK, SM, UA, VA, XK"),e.addFact("hasToken",!E()(null!=(t=null==n||null==(r=n.piano)?void 0:r.token)?t:tG()));try{let t=await r_(n);E()(t)?r6("error: appConfig is empty"):e.addFact("appConfig",t);let r=await rs(),i=k()(r,"ipCountry");E()(i)&&(r6("error: geo is empty, assigned HK"),i="HK"),e.addFact("geo",i)}catch(e){r6("loadGuestFacts error: %s",e.message)}};var r3=n(5645),r7=n.n(r3),r9=n(222),ne=n.n(r9),nt=n(3005),nr=n.n(nt);let nn=(e,t)=>!t2()(e)||e.length<1?[]:nr()(ne()(t,e)).filter(Boolean),ni=(e,t)=>{if(E()(e))return"";for(let r in t)if(t[r]===e)return r;return e},na=["SCMP+ePaper","SCMP+Daily+ePaper","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper","SCMP+Weekday+ePaper","SCMP+Weekend+ePaper","siteLicenseYP+YPePaper+SCMPePaper","siteLicenseYP+YPPrint+SCMPePaper","siteLicenseSCMPePaper","YPePaper","posties+ePaper","postiesEPaper","SCMPePaper","ypSparkEpaper","scmpEpaper+ypSparkDigital+ypSparkEpaper","b2bScmpEpaper","b2bScmpDigitalAndEpaper","b2bScmpDigitalAndEpaperAndPlus","b2bScmpDigitalAndPrintAndEPaper","b2bScmpDigitalAndPrintAndEPaperAndPlus","accessGrantedScmpEpaper"],ns=["SCMP","SCMP+Lite","SCMP+YP","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper","printBundle","SCMP+ePaper","SCMP+Daily+ePaper","SCMP+Weekday+ePaper","SCMP+Weekend+ePaper"],no=["YP","SCMP+YP"],nl=["posties","posties+ePaper"],nc=["SCMPPlus","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper"],nu=["SCMP","SCMP-B2B","SCMP+YP","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper","corporateBulk","corporateDigital","siteLicenseSCMP","siteLicenseSCMP+YP","free","printBundle","internal","vip","partners","SCMP+ePaper","SCMP+Daily+ePaper","SCMP+Weekday+ePaper","SCMP+Weekend+ePaper","b2bScmpDigital","b2bScmpDigitalAndPlus","b2bScmpDigitalAndEpaper","b2bScmpDigitalAndEpaperAndPlus","b2bScmpDigitalAndPrint","b2bScmpDigitalAndPrintAndEPaper","b2bScmpDigitalAndPrintAndEPaperAndPlus","digitalAccessGranted","accessGrantedScmpDigital","ypOnlineScmpBundle"],nd=["SCMP+Lite"],nf=["SCMP","SCMP-B2B","SCMPePaper","SCMP+Lite","SCMP+YP","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper","corporateBulk","corporateDigital","siteLicenseSCMP","siteLicenseSCMP+YP","free","printBundle","internal","vip","partners","SCMP+ePaper","SCMP+Daily+ePaper","SCMP+Weekday+ePaper","SCMP+Weekend+ePaper","b2bScmpDigital","b2bScmpDigitalAndPlus","b2bScmpEpaper","b2bScmpDigitalAndEpaper","b2bScmpDigitalAndEpaperAndPlus","b2bScmpDigitalAndPrint","b2bScmpDigitalAndPrintAndEPaper","b2bScmpDigitalAndPrintAndEPaperAndPlus","digitalAccessGranted","accessGrantedScmpDigital","accessGrantedScmpPlus","ypOnlineScmpBundle"],np=["YP","SCMP+YP","siteLicenseYP","siteLicenseSCMP+YP","siteLicenseYP+YPePaper+SCMPePaper","siteLicenseYP+YPPrint+SCMPePaper","ypSparkDigital","scmpDigital+ypSparkDigital","scmpEpaper+ypSparkDigital+ypSparkPrint","scmpEpaper+ypSparkDigital+ypSparkEpaper","scmpPrint+ypSparkDigital+ypSparkPrint","YPPrint","YPePaper"],nh=["ypSparkDigital","scmpDigital+ypSparkDigital","scmpEpaper+ypSparkDigital+ypSparkPrint","scmpEpaper+ypSparkDigital+ypSparkEpaper","scmpPrint+ypSparkDigital+ypSparkPrint"],nx=["posties","posties+ePaper","postiesSchool","postiesSchool+ePaper"],nb=["corporateBulk","corporateDigital"],ng=["free"],nm=["partners"],ny=["SCMPPlus","SCMP+SCMPPlus+ePaper","SCMP+SCMPPlus+Daily+ePaper","SCMP+SCMPPlus+Weekday+ePaper","SCMP+SCMPPlus+Weekend+ePaper","b2bScmpDigitalAndPlus","b2bScmpDigitalAndEpaperAndPlus","b2bScmpDigitalAndPrintAndEPaperAndPlus"];function nv(e){return nw(e).length>0}function nw(e){return e$(e).filterByResourceFamilies(["scmp"],"exact").filterByCustom((e,t)=>(function(e,t){let r=nP(e),n="true"!==e.user_access.granted.toString(),{platform:i,isSwG:a}=t;return r&&n&&"mobile"!==i&&!a})(e,t)).execute()}function nP(e){switch(e.term.type){case"payment":return!0;case"custom":return e.term.name.toLowerCase().includes("alipay");default:return!1}}function nC(e,t){switch(t){case"scmp":case"yp":case"posties":let r=nS({subscriptions:e.user.subscriptions,isSubscriptionActive:!0,targetResourceByFamilies:[t]});return 0!==r.length&&r.every(e=>!0===e.auto_renew)}}let nS=function(e){let{subscriptions:t,isSubscriptionActive:r,targetResourceByFamilies:n}=e;return t.filter(e=>{let t=r?"active"===e.status:"active"!==e.status,{resourceFamilies:i}=eR.decodeTermName(e.term.name),a=n.some(e=>null==i?void 0:i.includes(e));return t&&a})};function n_(e){return t=>t.user_access.granted===e.granted}function nk(e){return t=>new Set(e.targetTypes).has(t.term.type)}let nA=[{resourceKeys:["digital"],parameters:[{sourceTerm:{billingCycle:"1M"},targetTerm:{billingCycle:"1M"}},{sourceTerm:{billingCycle:"1M"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"2Y"}},{sourceTerm:{billingCycle:"2Y"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"2Y"},targetTerm:{billingCycle:"2Y"}}]},{resourceKeys:["scmpAndScmpPlusEPaper"],parameters:[{sourceTerm:{billingCycle:"1M"},targetTerm:{billingCycle:"1M"}},{sourceTerm:{billingCycle:"1M"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"2Y"}},{sourceTerm:{billingCycle:"2Y"},targetTerm:{billingCycle:"2Y"}}]},{resourceKeys:["scmpPlusDailyPrintBundle","scmpPlusWeekdayPrintBundle","scmpPlusWeekendPrintBundle"],parameters:[{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"1Y"}},{sourceTerm:{billingCycle:"1Y"},targetTerm:{billingCycle:"2Y"}},{sourceTerm:{billingCycle:"2Y"},targetTerm:{billingCycle:"2Y"}}]}].flatMap(e=>e.resourceKeys.flatMap(t=>e.parameters.map(e=>(function(e){let{sourceTerm:t,targetTerm:r}=e,n=function(e){let{sourceTerm:t,targetTerm:r}=e;return`WB[${t.billingCycle}${eU(t.resourceKey)}][${r.billingCycle}${eU(r.resourceKey)}]`}(e);return{name:`Winback: Source (${t.resourceKey} | ${t.billingCycle}) Target (${r.resourceKey} | ${r.billingCycle})`,offer:"winback",action:"subscribe",getPromotionName:e=>"USD-H"===e.user.currency?`PT-winback-usdh-${n}`:`PT-winback-${n}`,term:{billingCycle:r.billingCycle,resource:r.resourceKey},isEligible(e){var r,i,a;let s=null==(r=e.user.winback)?void 0:r.latestExpiredScmpB2CConversion;if(!s)return{isEligible:!1};let o=eR.decodeTermName(s.term.name),l=t.resourceKey===(null==o?void 0:o.resource),c=t.billingCycle.toLowerCase()===(null==o||null==(i=o.billingCycle)?void 0:i.toLowerCase());return l&&c?(null==(a=e.user.redeemedPromoCodes)?void 0:a.includes(n))?{isEligible:!1}:{isEligible:!0,source:{termId:s.term.term_id}}:{isEligible:!1}},selectTerm:e=>e.terms.find(t=>{var n;let i=eR.decodeTermName(t.name),a=r.resourceKey===i.resource&&r.billingCycle.toLowerCase()===(null==(n=i.billingCycle)?void 0:n.toLowerCase()),s=e.user.currency===i.currency,o="Rack"===i.variant,l=!i.isCrossProduct;return a&&s&&o&&l})||null}})({sourceTerm:{billingCycle:e.sourceTerm.billingCycle,resourceKey:t},targetTerm:{billingCycle:e.targetTerm.billingCycle,resourceKey:t}}))));function nE(e){let{conversions:t}=e;if(!t||0===t.length)return{latestExpiredScmpB2CConversion:null};let r=e$(t).filterByResourceFamilies(["scmp"],"exact").filterByCustom(e=>{let t="true"===e.user_access.granted.toString(),r=nP(e);return t&&r}).execute();if(null!=r&&r.length)return{latestExpiredScmpB2CConversion:null};let n=nw(t);return{latestExpiredScmpB2CConversion:n.reduce((e,t)=>{let r=n(e);return n(t)>r?t:e;function n(e){var t,r;let{user_access:n,subscription:i}=e;return null!=(t=null!=(r=n.expire_date)?r:null==i?void 0:i.end_date)?t:0}},n[0])}}let nT=Q.extend("rulesEngine/facts/user"),nD=et("rulesEngine/facts/user"),nR=async function(e){var t,r,n,i,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e.addFact("userCookie",(()=>{try{return G.get("scmp_user")?JSON.parse(G.get("scmp_user")):null}catch(e){return rQ.error("getUserCookie error:",e.message),null}})());let[o=[],l=[],c={}]=await Promise.all([r0(null==s?void 0:s.piano),r1(null==s?void 0:s.piano),r4(null==s?void 0:s.rosetta,null==s||null==(t=s.piano)?void 0:t.token)]),u=e.getFact("appConfig");E()(u)&&(nT("appConfig is empty, trying to get data from api again"),u=await r2(null==s?void 0:s.contentService),ei(eu.APP_CONFIG,u));let d=k()(u,"pianoResourceIds");e.addFact("pianoResourceIds",d);let f=e=>nn(e,d);e.addFact("hasConversions",o.length>0);let p=o.map(e=>k()(e,"term.name",""));e.addFact("allConversionTermNames",p);let h=o.map(e=>k()(e,"term.type","").toLowerCase());e.addFact("allConversionTermTypes",h);let x=o.map(e=>k()(e,"type","").toLowerCase());e.addFact("allConversionTypes",x);let b=o.map(e=>ni(k()(e,"term.resource.rid",""),d));e.addFact("allConversionResources",b);let[g,m]=r7()(o,e=>k()(e,"user_access.granted"))||[[]],y=g.filter(e=>!(e.term.term_id in c)||"revoked"!==c[e.term.term_id]);null!=s&&null!=(r=s.piano)&&r.token&&nD.info("activeConversions: ",{activeConversions:y,activeConversionsBeforeFilter:g,userConversionStatusMap:c,userEmail:null==(n=X(null==s||null==(i=s.piano)?void 0:i.token))?void 0:n.email});let v=(a={user:{conversions:[...g.map(e=>(e.term.term_id in c&&(e.user_access.granted="revoked"!==c[e.term.term_id]),e)),...m],subscriptions:l}},["scmp","yp","posties"].reduce((e,t)=>(!function(e,t){let r=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["payment","custom"]})).filterByCustom(n_({granted:!0})).filterByCustom(e=>"scmp"!==t||nP(e)).execute().length>0,n=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["payment","custom"]})).filterByCustom(n_({granted:!1})).filterByCustom(e=>"scmp"!==t||nP(e)).execute().length>0;return!r&&!n}(a,t)?!function(e,t){switch(t){case"scmp":case"yp":case"posties":let r=nS({subscriptions:e.user.subscriptions,isSubscriptionActive:!0,targetResourceByFamilies:[t]});return 0!==r.length&&r.every(e=>!1===e.auto_renew)}}(a,t)?!function(e,t){switch(t){case"scmp":let r=nv(e.user.conversions),n=nC(e,t);return r&&!n;case"yp":case"posties":let i=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["payment"]})).filterByCustom(n_({granted:!0})).execute().length>0,a=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["payment"]})).filterByCustom(n_({granted:!1})).execute().length>0,s=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["custom"]})).filterByCustom(n_({granted:!0})).execute().length>0,o=e$(e.user.conversions).filterByResourceFamilies([t],"subset").filterByCustom(nk({targetTypes:["custom"]})).filterByCustom(n_({granted:!1})).execute().length>0;return!i&&!s&&(a||o)}}(a,t)?nC(a,t)&&(e[t]="DEFAULT"):e[t]="CHURN":e[t]="PRE_CHURN":e[t]="NEW_USER",e),{posties:null,scmp:null,yp:null}));e.addFact("userTypes",v),e.addFact("activeConversions",y),e.addFact("hasActiveConversions",y.length>0);let[w]=r7()(l,e=>["active","completed"].includes(k()(e,"status","")))||[[]];e.addFact("hasActiveSubscriptions",w.length>0);let P=y.map(e=>k()(e,"term.name",""));e.addFact("activeConversionTermNames",P);let C=y.map(e=>k()(e,"term.type","").toLowerCase());e.addFact("activeConversionTermTypes",C);let S=y.map(e=>k()(e,"type","").toLowerCase());e.addFact("activeConversionTypes",S);let _=y.map(e=>ni(k()(e,"term.resource.rid",""),d));e.addFact("activeConversionResources",_);let A=nv(o);e.addFact("hasSCMPB2CChurnedConversions",A);let T=f(ns),D=o.filter(e=>T.includes(k()(e,"term.resource.rid")));e.addFact("hasIndividualSCMPConversions",D.length>0);let R=e=>{let{variant:t}=eR.decodeTermName(e.term.name);return"Trial"===t},M=o.filter(e=>T.includes(k()(e,"term.resource.rid"))&&!R(e));e.addFact("hasIndividualPaidSCMPConversions",M.length>0);let B=f(no),$=o.filter(e=>B.includes(k()(e,"term.resource.rid")));e.addFact("hasIndividualYPConversions",$.length>0);let F=f(nl),I=o.filter(e=>F.includes(k()(e,"term.resource.rid")));e.addFact("hasIndividualPostiesConversions",I.length>0);let O=f(nc),L=o.filter(e=>O.includes(k()(e,"term.resource.rid")));e.addFact("hasIndividualSCMPPlusConversions",L.length>0);let U=D.filter(e=>"payment"===k()(e,"term.type")),N=I.filter(e=>"payment"===k()(e,"term.type")),j=$.filter(e=>"payment"===k()(e,"term.type"));e.addFact("allIndividualPaymentSCMPConversions",U),e.addFact("hasIndividualPaymentSCMPConversions",U.length>0),e.addFact("hasIndividualPaymentPostiesConversions",N.length>0),e.addFact("allIndividualPaymentYPConversions",j.length>0);let H=D.filter(e=>k()(e,"user_access.granted")).length>0;e.addFact("hasActiveIndividualSCMPConversions",H);let W=$.filter(e=>k()(e,"user_access.granted")).length>0;e.addFact("hasActiveIndividualYPConversions",W);let Y=f(nf),z=e=>Y.includes(k()(e,"user_access.resource.rid")),V=y.filter(z);e.addFact("activeSCMPConversions",V),e.addFact("hasActiveScmpConversions",V.length>0);let q=f(nd),K=y.filter(e=>q.includes(k()(e,"user_access.resource.rid")));e.addFact("activeSCMPLiteConversions",K),e.addFact("hasActiveScmpLiteConversions",K.length>0);let J=f(nu),Z=y.filter(e=>J.includes(k()(e,"user_access.resource.rid")));e.addFact("activeSCMPDigitalConversions",Z),e.addFact("hasActiveScmpDigitalConversions",Z.length>0);let Q=y.filter(e=>Y.includes(k()(e,"user_access.resource.rid"))&&!R(e));e.addFact("hasActivePaidSCMPConversions",Q.length>0);let ee=f(np),et=y.filter(e=>ee.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveYpConversions",et.length>0);let er=f(nh),en=y.filter(e=>er.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveYpSparkConversions",en.length>0);let ea=f(nx),es=y.filter(e=>ea.includes(k()(e,"term.resource.rid")));e.addFact("hasActivePostiesConversions",es.length>0);let eo=f(nb),el=y.filter(e=>eo.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveCorpConversions",el.length>0);let ec=f(ng),ed=y.filter(e=>ec.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveFreeConversions",ed.length>0);let ef=Array.isArray(b)&&b.every(e=>"free"===e);e.addFact("hasOnlySCMPDigitalFreeResourceConversion",ef);let ep=f(nm),eh=y.filter(e=>ep.includes(k()(e,"term.resource.rid")));e.addFact("hasActivePartnersConversions",eh.length>0);let ex=f(ny),eb=y.filter(e=>ex.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveSCMPPlusConversions",eb.length>0);let eg=y.filter(e=>"licensee contract redemption"===k()(e,"type","").toLowerCase());e.addFact("hasActiveSiteLicenseConversions",eg.length>0);let em=f(na),ey=y.filter(e=>em.includes(k()(e,"term.resource.rid")));e.addFact("hasActiveEpaperConversions",ey.length>0),e.addFact("activeSiteLicenseTermName",k()(eg,"0.term.name","")),e.addFact("activeSiteLicenseTermIds",eg.map(e=>e.term.term_id).join(","));let ev=w[0];e.addFact("latestActiveSubscription",ev);let ew=w.find(e=>["payment","external"].includes(k()(e,"term.type",""))&&f(ns).includes(k()(e,"term.resource.rid"))),eP=async()=>{if(!ew)return void e.addFact("hasScmpChangeOptionsAvailable",!1);let t=await r8(null==s?void 0:s.rosetta,ew.subscription_id);e.addFact("hasScmpChangeOptionsAvailable",t.data)};await eP(),e.addFact("activeScmpSubscription",ew),e.addFact("hasActiveScmpSubscription",!E()(ew));let eC=w.find(e=>"payment"===k()(e,"term.type","")&&f(no).includes(k()(e,"term.resource.rid")));e.addFact("hasActiveYpSubscription",!E()(eC));let eS=async(e,t)=>{try{let r=[];t>0&&(r=await rm({config:null==s?void 0:s.pianoPublisherConversionsService,scmpUserCookie:null==s?void 0:s.scmpUserCookie}));let n=r.map(e=>{let{term:t,user_payment:r,user_payment_info:n,...i}=e;return i});e.addFact("allPublisherConversions",n),e.addFact("hasPublisherConversions",n.length>0);let i=n.filter(e=>{var t;return(null==e||null==(t=e.user_access)?void 0:t.granted)&&(null==e?void 0:e.subscription)});e.addFact("activePublisherSubscriptionConversions",i),e.addFact("hasActivePublisherSubscriptionConversions",i.length>0),e.addFact("latestActivePublisherSubscriptionConversion",null==i?void 0:i[0]);let a=n.filter(z);return e.addFact("activeSCMPPublisherConversions",a),{allPublisherConversions:r}}catch(e){nT("loadUserFacts error: %s",e.message)}},{allPublisherConversions:e_}=await eS(e,U.length||N.length||j.length);e.addFact("winback",nE({conversions:e_}))}catch(e){nT("loadUserFacts error: %s",e.message)}};function nM(e){var t;let{userGeolocation:r}=e;return null!=(t=({HK:"HKD",SG:"SGD",MY:"MYR",PH:"USD-H",MO:"HKD"})[r])?t:"USD"}let nB=async e=>{e.addRule(new rr("guest.userGeolocation").waitFor(el).stage(0).when(()=>!0).then(e=>{let{geo:t}=e;return t||"HK"})),e.addRule(new rr("guest.isShowVelocityWall").deprecate("should use new name guest.supportVelocityWall").disable()),e.addRule(new rr("guest.isShowRosetta").deprecate("should use new name guest.supportPiano").disable()),e.addRule(new rr("guest.supportPiano").waitFor(el).when((e,t)=>{let{unSupportedGeos:r}=e,{guest:{userGeolocation:n}}=t;return!r.includes(n)}).then(!0).fallback(!1)),e.addRule(new rr("guest.geoZone").waitFor(el).when(()=>!0).then((e,t)=>{let{seaCountries:r,euCountries:n}=e,{guest:{userGeolocation:i}}=t;return"HK"===i?"HK":"US"===i?"US":n.includes(i)?"EU":r.includes(i)?"SEA":"INT"})),e.addRule(new rr("guest.currency").waitFor(el).when(()=>!0).then((e,t)=>{let{}=e,{guest:{userGeolocation:r}}=t;return nM({userGeolocation:r})}))};var n$=n(4058),nF=n.n(n$),nI=n(9969),nO=n.n(nI),nL=n(9300),nU=n.n(nL);let nN={isActive:!1,daysLeft:0,isWithinHalf:!1,expiryDate:null,halfExpiryDate:null,startDate:null},nj=e=>{var t,r,n,i,a;let s=null!=(t=null==e||null==(r=e.subscription)||null==(r=r.term)?void 0:r.term_id)?t:"",o=t$(null==e||null==(n=e.subscription)||null==(n=n.term)?void 0:n.name);return{termId:s,expireDate:null!=(i=null==e||null==(a=e.user_access)?void 0:a.expire_date)?i:null,name:o}};var nH=n(7462),nW=n.n(nH);let nY={expireDate:0,dayLeft:0,termPeriod:"",isFirstChurning:!1,isSecondChurning:!1},nG=e=>{let{subscriptions:t}=e;return t.find(e=>{let t=k()(e,"term.name",""),r="external"===k()(e,"term.type"),{resource:n}=eR.decodeTermName(t);return((null!=n?n:"").toLowerCase().includes("scmpplus")||!!(e=>{if(!nW()(e))return null;let t=e.toLowerCase();return[{name:"monthly: digital |",period:"1 month"},{name:"1-month: digital |",period:"1 month"},{name:"annual: digital |",period:"1 year"},{name:"1-year: digital |",period:"1 year"},{name:"2-year: digital |",period:"2 years"}].find(e=>t.includes(null==e?void 0:e.name))})(t))&&!r})},nz={SUBSCRIBE:"SUBSCRIBE",UPGRADE:"UPGRADE",RENEW:"RENEW",DOWNGRADE:"DOWNGRADE"},nV="PRECHURN";function nq(e){return Object.hasOwn(e,"taxRate")?{templateBillingTableEntry:e}:{apiBillingTableEntry:e}}let nK=new Set(["Rack","2024JAN","IntroABTest(B)","LiteABTest(50%)","LiteABTest(70%)","LiteABTest(85%)","AddInk","PlusSoftLaunch(1M)","PlusSoftLaunch(2M)","Upgrade(Intro)","Upgrade(50%)","Downgrade(50%)","Downgrade(Intro)","Intro","DIGITIMES","FreeTrial(3M)","LTS(N-0)","LTS(N-1)","LTS(N-2)","LTS(L-0)","LTS(L-1)","LTS(L-2)","LTS(M-0)","LTS(M-1)","LTS(M-2)","LTS(H-0)","LTS(H-1)","LTS(H-2)","USElection2024"]),nJ=e=>{var t,r;let{term:n,promotion:i,action:a=nz.SUBSCRIBE,isNewPianoCustomer:s}=e,{apiTerm:o,templateTerm:l}=Object.hasOwn(n,"payment_billing_plan_table")?{apiTerm:n}:{templateTerm:n},c=function(e){if(!e)return;let{isCrossProduct:t,resource:r="",variant:n=""}=tb(e.name);return t||nK.has(n)||["scmpAndScmpPlusEPaper","scmpPlusDailyPrintBundle","scmpPlusWeekdayPrintBundle","scmpPlusWeekendPrintBundle"].includes(r)?{...e,trialNewCustomersOnly:!1}:{...e,trialNewCustomersOnly:!0}}(l);if(!n)return[];let u=(null!=(t=null!=(r=null==o?void 0:o.payment_billing_plan_table)?r:null==c?void 0:c.billingPlanTable)?t:[]).filter(e=>(function(e){let{action:t,billingPlan:r}=e;return t!==nz.RENEW||"2147483647"===r.cycles.toString()})({action:a,billingPlan:e})).filter(e=>(function(e){var t;let{billingPlan:r,isNewPianoCustomer:n,apiTerm:i,templateTerm:a}=e,{apiBillingTableEntry:s,templateBillingTableEntry:o}=nq(r),l=null!=(t=null==i?void 0:i.payment_trial_new_customers_only)?t:null==a?void 0:a.trialNewCustomersOnly,c=s?"true"===(null==s?void 0:s.isTrial):null==o?void 0:o.isTrial;return!l||!c||n})({billingPlan:e,isNewPianoCustomer:s,apiTerm:o,templateTerm:c})).map(e=>{var t,r;let{billingPeriodValue:n,billingPeriodUnit:i}=null!=(t=null==(r=/(?<billingPeriodValue>\d+) (?<billingPeriodUnit>year|month|week|day)s?/.exec(e.billingPeriod))?void 0:r.groups)?t:{},{apiBillingTableEntry:a,templateBillingTableEntry:s}=nq(e);return{billingPeriod:{value:parseInt(n,10),unit:i},cycles:a?Number.parseInt(a.cycles,10):s.cycles,currency:e.currency,price:e.priceValue,tax:a?0:s.taxValue,taxRate:a?0:s.taxRate,total:e.priceAndTax,isTrial:"true"===e.isTrial,isFree:"true"===e.isFree,isPayWhatYouWant:"true"===e.isPayWhatYouWant}});if(!i)return u;switch(i.discount_type){case"fixed":{let e=i.fixed_discount_list.find(e=>{var t;return e.currency===(null!=(t=null==o?void 0:o.payment_currency)?t:null==c?void 0:c.chargeCurrency)});if(!e)return u;let t=t=>{let r=e.amount_value,n=(100*t.price-100*r)/100,i=n*t.taxRate;return{...t,originalPrice:t.price,price:n,tax:i,total:n+i,isFree:n<=0}};return i.apply_to_all_billing_periods?u.map(e=>e.isFree?e:t(e)):d({consolidatedBillingTable:u,calculateDiscountedBillingPlan:t})}case"percentage":{let e=e=>{var t;let r=null!=(t=i.percentage_discount)?t:0,n=e.price*(1-r/100),a=n*e.taxRate;return{...e,originalPrice:e.price,price:n,tax:a,total:n+a,isFree:n<=0}};return i.apply_to_all_billing_periods?u.map(e):d({consolidatedBillingTable:u,calculateDiscountedBillingPlan:e})}}function d(e){var t;let{consolidatedBillingTable:r,calculateDiscountedBillingPlan:n}=e;return r.reduce((e,t)=>{if(e.remainingDiscountBillingPeriod<=0||t.isFree)return e.consolidatedBillingTable.push(t),e;let r=Math.min(e.remainingDiscountBillingPeriod,t.cycles);return e.remainingDiscountBillingPeriod-=r,e.consolidatedBillingTable.push({...n(t),cycles:r}),t.cycles-r>0&&e.consolidatedBillingTable.push({...t,cycles:0x7fffffff===t.cycles?0x7fffffff:t.cycles-r}),e},{consolidatedBillingTable:[],remainingDiscountBillingPeriod:null!=(t=null==i?void 0:i.billing_period_limit)?t:0}).consolidatedBillingTable}};function nX(e){var t;if(!e||!e.length)return null;let r=e=>{let{fromBillingPeriod:t,toBillingPeriod:r,price:n}=e,i={year:12,month:1,week:1/4,day:1/30};if(!i[t.unit]||!i[r.unit])throw Error("Invalid billing unit");let a=t.value*i[t.unit];return n*(r.value*i[r.unit]/a)},n=e.find(e=>e.isFree),i=e.find(e=>!e.isFree),a=e.at(-1);if(!i||!a)return null;let s=null!=(t=a.originalPrice)?t:a.price,o=i.price,l=n?{value:n.billingPeriod.value*n.cycles,unit:n.billingPeriod.unit}:void 0,c={value:i.billingPeriod.value*i.cycles,unit:i.billingPeriod.unit},u=r({price:o,fromBillingPeriod:i.billingPeriod,toBillingPeriod:c}),d=r({price:s,fromBillingPeriod:a.billingPeriod,toBillingPeriod:c}),f=Math.round(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.pow(10,t);return Math.round(parseFloat((e*r).toFixed(11)))/r}((d-u)/d*100,2)),p=f>0,h=i.cycles,x=i.billingPeriod.unit!==a.billingPeriod.unit,b=i.billingPeriod.value>1,g=1===i.billingPeriod.value;return{currency:i.currency,isDiscounted:p,discountPercentage:f,monthlyChargePrice:r({price:o,fromBillingPeriod:i.billingPeriod,toBillingPeriod:{value:1,unit:"month"}}),monthlyOriginalPrice:r({price:s,fromBillingPeriod:a.billingPeriod,toBillingPeriod:{value:1,unit:"month"}}),hasFreeTrial:!!n,totalFreePeriod:l,totalChargePeriod:c,totalChargePeriodText:nZ(c),chargePriceDuringTotalChargePeriod:u,originalPriceDuringTotalChargePeriod:d,originalPrice:s,originalBillingPeriod:a.billingPeriod,originalBillingPeriodText:nZ(a.billingPeriod),chargeCycle:h,chargePrice:o,chargeBillingPeriod:i.billingPeriod,chargeBillingPeriodText:nZ(i.billingPeriod),isSinglePaymentMultiPeriodDiscountWithVariedBillingPeriods:p&&1===h&&b&&x,isMultiplePaymentSinglePeriodDiscount:p&&h>1&&g}}let nZ=(e,t)=>{let{useExplicitValue:r=!1}=null!=t?t:{},{value:n,unit:i}=e;return 1===n?r?`${n} ${i}`:`${i}`:`${n} ${i}s`};function nQ(e){var t,r;let{targetPreChurnSubscription:n,preChurnPromoCodeUsageMap:i={}}=e;if(!n)return!1;let{billingCycle:a,resource:s}=tb(null!=(t=null==n||null==(r=n.term)?void 0:r.name)?t:"");return!!i[`${s}-${a}`]}function n0(e){return(function(e){let{conversions:t,validationFn:r}=e;return t.reduce((e,t)=>(r(t)&&e.push(t),e),[])})({conversions:e,validationFn:e=>{var t,r;return null!=(t=null==(r=e.promo_code)?void 0:r.code.startsWith("prechurn-"))&&t}}).reduce((e,t)=>{let{billingCycle:r,resource:n}=tb(t.subscription.term.name);return e[`${n}-${r}`]=!0,e},{})}let n1=e=>Object.values(e.reduce((e,t)=>{let{resource:r,billingCycle:n}=eR.decodeTermName(t.name),i=`${r}-${n}`;return{...e,[i]:t}},{}));function n2(e){let{offerType:t,payment_trial_new_customers_only:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){let{decodedTargetTermBillingPlan:t}=e;try{let{rack:{price:e,currency:r,frequency:n,billingPeriod:i},trial:{price:a,currency:s,frequency:o,billingPeriod:l}}=t,c=[];return a&&a!==e&&c.push({billingPeriod:`${o} ${l}`,cycles:1,currency:s,priceValue:a,taxValue:0,priceAndTax:a,isTrial:"true",isFree:"false",isPayWhatYouWant:"false"}),c.push({billingPeriod:`${n} ${i}`,cycles:0x7fffffff,currency:r,priceValue:e,taxValue:0,priceAndTax:e,isTrial:"false",isFree:"false",isPayWhatYouWant:"false"}),c}catch(e){console.error(e)}}({decodedTargetTermBillingPlan:tC(e.to_billing_plan)});return{term_id:e.to_term_id,offerType:t,name:e.to_term_name,payment_billing_plan_table:n,payment_trial_new_customers_only:r}}let n4=async e=>{let{conversions:t,overallSubscriptionDaysLeft:r,redeemedPromoCodes:n,searchPromotions:i,user:a,isNewPianoCustomer:s,canUseChangeOptions:o}=e;return i?await it({plansDefinition:n8,conversions:t,overallSubscriptionDaysLeft:r,redeemedPromoCodes:n,searchPromotions:i,user:a,isNewPianoCustomer:s,canUseChangeOptions:o}):[]},n8={oneYearPreChurnPlans:{renewalPlan:{isEligible(e){var t;let{conversions:r,overallSubscriptionDaysLeft:n,redeemedPromoCodes:i}=e,{isEligibleForPromo:a,termCurrency:s,targetConversion:o}=n6(r,n,i);return a&&o?{isEligible:!0,eligibleContext:{subscribeAction:nz.RENEW,term:{...null==o||null==(t=o.subscription)?void 0:t.term,offerType:nV},promotionName:"PT-2024jan-promo-code-subs-annual-renewal-70%-off"+("USD-H"===s?"-"+s:"")}}:{isEligible:!1}}},digital2YIntroUpgradePlan:{isEligible(e){var t;let{conversions:r,overallSubscriptionDaysLeft:n,redeemedPromoCodes:i,canUseChangeOptions:a}=e,{isEligibleForPromo:s,targetConversion:o}=n6(r,n,i);if(!s||!a)return{isEligible:!1};let l=null==o||null==(t=o.subscription)||null==(t=t.term)?void 0:t.change_options,c=l.find(e=>{let{resource:t,billingCycle:r,variant:n}=tb(e.to_term_name);return"2y"===r&&"digital"===t&&"Upgrade(Intro)"===n});return l&&l.length?{isEligible:!0,eligibleContext:{subscribeAction:nz.UPGRADE,term:n2(c,{offerType:nV,subscribeActionName:nz.UPGRADE})}}:{isEligible:!1}}}}};function n6(e,t,r){var n,i,a;let s=e.find(e=>"Subscription"===e.type),o=null==s||null==(n=s.subscription)||null==(n=n.term)?void 0:n.name,l=null==s||null==(i=s.subscription)||null==(i=i.term)?void 0:i.payment_currency,{billingCycle:c,currency:u,resource:d}=tb(o);if(!o||t>90)return{isEligibleForPromo:!1};let f=r.includes("renew2024JanPromoCodeSubs2425q3"),p="2024jan"===(null==s||null==(a=s.promo_code)?void 0:a.code);return{isEligibleForPromo:!f&&p&&"1y"===c&&"HKD"!==l&&"digital"===d,termCurrency:u,targetConversion:s}}let n5=async e=>{let{subscriptions:t,preChurnPromoCodeUsageMap:r,shouldIncludeDowngradePlan:n=!1,searchPromotions:i,user:a,isNewPianoCustomer:s,canUseChangeOptions:o}=e;return i?await it({plansDefinition:n3,searchPromotions:i,user:a,subscriptions:t,preChurnPromoCodeUsageMap:r,shouldIncludeDowngradePlan:n,isNewPianoCustomer:s,canUseChangeOptions:o}):[]},n3={oneMonthPreChurnPlans:{standard1MWith3MIntroPriceRenewalPlan:n7({billingCycle:"1m"}),standard1YWith1MHalfPriceUpgradePlan:{isEligible(e){var t;let{subscriptions:r,canUseChangeOptions:n}=e,i=ie({subscriptions:r,billingCycle:"1m"}),a=null==i||null==(t=i.term)?void 0:t.change_options;if(!a||!a.length||!n)return{isEligible:!1};let s=a.find(e=>{let{resource:t,billingCycle:r,variant:n}=tb(e.to_term_name);return"digital"===t&&"1y"===r&&"Upgrade(50%)"===n});return s?{isEligible:!0,eligibleContext:{subscribeAction:nz.UPGRADE,term:n2(s,{offerType:nV})}}:{isEligible:!1}}},plusOnlyRackPriceDowngradePlan:n9({billingCycle:"1m"})},oneYearPreChurnPlans:{standard1YWith1YSeventyPercentOffPriceRenewalPlan:n7({billingCycle:"1y"}),plusOnlyRackPriceDowngradePlan:n9({billingCycle:"1y"})},twoYearPreChurnPlans:{standard2YWith2YSeventyPercentOffPriceRenewalPlan:n7({billingCycle:"2y"}),standard1YRackPriceDowngradePlan:{isEligible(e){var t;let{subscriptions:r,shouldIncludeDowngradePlan:n,canUseChangeOptions:i}=e,a=ie({subscriptions:r,billingCycle:"2y"}),s=null==a||null==(t=a.term)?void 0:t.change_options;if(!(n&&s&&s.length&&i))return{isEligible:!1};let o=s.find(e=>{let{resource:t,billingCycle:r,variant:n}=tb(e.to_term_name);return"digital"===t&&"1y"===r&&void 0===n});return o?{isEligible:!0,eligibleContext:{subscribeAction:nz.DOWNGRADE,term:n2(o,{offerType:nV,subscribeActionName:nz.DOWNGRADE,payment_trial_new_customers_only:!0})}}:{isEligible:!1}}},plusOnlyRackPriceDowngradePlan:n9({billingCycle:"2y"})}};function n7(e){let{billingCycle:t}=e;return{isEligible(e){let{subscriptions:r}=e,n=ie({subscriptions:r,billingCycle:t}),i=nU().unix(null==n?void 0:n.next_bill_date),a=90>=nU()(i).diff(nU()(),"day"),s=nQ({targetPreChurnSubscription:n,preChurnPromoCodeUsageMap:e.preChurnPromoCodeUsageMap});return n&&a&&!s?{isEligible:!0,eligibleContext:{subscribeAction:nz.RENEW,term:{...n.term,offerType:nV},promotionName:function(e){let{resource:t,billingCycle:r,currency:n,version:i}=tb(e.name),a=function(e){let{billingCycle:t,resource:r}=e;return!function(e){let{billingCycle:t,resource:r}=e;return"1m"===t&&"digital"===r}({billingCycle:t,resource:r})?!function(e){let t=e.toLowerCase().includes("plus"),r=e.toLowerCase().includes("daily")||e.toLowerCase().includes("weekend")||e.toLowerCase().includes("weekday");return t&&r}(r)?o({billingCycle:t,resource:r})?"70%off":"intro":"11.5":"3mFor1mIntro"}({billingCycle:r,resource:t}),s=function(e){let{billingCycle:t,currency:r,resource:n}=e;return o({billingCycle:t,resource:n})?"":n.toLowerCase().includes("scmpplus")?"FY2425Q1"===i?"-2425q2":`-${i.toLowerCase().substring(2)}`:"USD-H"===r?"-2324q1":"1m"===t?"-2223q3":"1y"===t?"-2122q4":"2y"===t?"-2223q1":""}({billingCycle:r,currency:n,resource:t});return`PT-prechurn-${a}-${r}-${t}${"USD-H"===n?"-usdh":""}${s}-prechurn-${r}-${a}-discount`;function o(e){let{billingCycle:t,resource:r}=e;return"digital"===r&&("1y"===t||"2y"===t)}}(n.term)}}:{isEligible:!1}}}}function n9(e){let{billingCycle:t}=e;return{isEligible(e){var r,n,i;let{subscriptions:a,shouldIncludeDowngradePlan:s,canUseChangeOptions:o}=e,l=ie({subscriptions:a,billingCycle:t});if(!s||!l)return{isEligible:!1};let{resource:c}=tb(null==(r=l.term)?void 0:r.name),u=c.toLowerCase().includes("scmpplus"),d=null!=(n=null==l||null==(i=l.term)?void 0:i.change_options)?n:[],f=d.find(e=>{let{resource:r,billingCycle:n,variant:i}=tb(e.to_term_name);return"digital"===r&&n===t&&void 0===i});return u&&f&&0!==d.length&&o?{isEligible:!0,eligibleContext:{subscribeAction:nz.DOWNGRADE,term:n2(f,{offerType:nV,subscribeActionName:nz.DOWNGRADE,payment_trial_new_customers_only:!0})}}:{isEligible:!1}}}}function ie(e){let{subscriptions:t,billingCycle:r}=e;return t.find(e=>{let{resource:t,billingCycle:n}=tb(e.term.name),i="digital"===t,a=t.toLowerCase().includes("scmpplus"),s=!1===e.auto_renew;return(i||a)&&s&&n===r})}let it=async e=>{let{plansDefinition:t,searchPromotions:r,isNewPianoCustomer:n,user:i,...a}=e;try{if(!t||!r||void 0===n)return[];let e=function(e,t){try{return Object.values(e).flatMap(Object.values).reduce((e,r)=>{let{isEligible:n,eligibleContext:i}=r.isEligible(t);return n?[...e,{...i}]:e},[])}catch(e){console.error(e)}}(t,a);if(!e)return[];let s=function(e){let{eligiblePlans:t}=e;return t.map(e=>e.promotionName).filter(e=>e&&""!==e)}({eligiblePlans:e}),o=await r({names:s});return e.map(e=>{let t=o.find(t=>t.name.includes(e.promotionName)),r=nJ({action:e.subscribeAction,promotion:t,term:e.term,user:i,isNewPianoCustomer:n});return{...e,consolidatedBillingTable:r,...t?{promotion:t}:{}}})}catch(e){console.error(e)}},ir=async e=>{e.addRule(new rr("user.isOverallChurned").when(e=>{let{hasConversions:t,hasActiveConversions:r}=e;return t&&!r}).then(!0).fallback(!1)),e.addRule(new rr("user.isActiveExternalSubscriber").when(e=>{let{activeConversionTermTypes:t}=e,r=new Set(t);return 1===r.size&&r.has("external")}).then(!0).fallback(!1)),e.addRule(new rr("user.isHyperActiveSubscriber").when(e=>{let{activeSCMPConversions:t}=e,r=Object.values(t).map(e=>e.term.term_id);return r.length>1&&nF()(nO()(r,(e,t,r)=>r.indexOf(e)!==t)).length>0}).then(!0).fallback(!1)),e.addRule(new rr("user.hasPendingTermChange").when(e=>{let{latestActiveSubscription:t}=e;return t}).then(e=>{let{latestActiveSubscription:t}=e;return"completed"===(null==t?void 0:t.status)}).fallback(!1)),e.addRule(new rr("user.isAlipaySubscriber").when(e=>{let{activeConversionTermNames:t}=e;return t.find(e=>e.includes("AlipayHK"))}).then(!0).fallback(!1)),e.addRule(new rr("user.isSCMPSubscriber").when(e=>{let{hasActiveScmpConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isSCMPLiteSubscriber").when(e=>{let{hasActiveScmpLiteConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isSCMPDigitalSubscriber").when(e=>{let{hasActiveScmpDigitalConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isPaidSCMPSubscriber").when(e=>{let{hasActivePaidSCMPConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isYPSubscriber").when(e=>{let{hasActiveYpConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isPostiesSubscriber").when(e=>{let{hasActivePostiesConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isSCMPPlusSubscriber").when(e=>{let{hasActiveSCMPPlusConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.hasSCMPLiteAccessRight").stage(2).waitFor(eo).when((e,t)=>{let{ipRangeAccess:r}=e,{user:{isSCMPLiteSubscriber:n,isInternalStaff:i}}=t;return n||i||(null==r?void 0:r.hasSCMPLiteAccess)}).then(!0).fallback(!1)),e.addRule(new rr("user.hasSCMPDigitalAccessRight").stage(2).waitFor(eo).when((e,t)=>{let{ipRangeAccess:r}=e,{user:{isSCMPDigitalSubscriber:n,isInternalStaff:i}}=t;return n||i||(null==r?void 0:r.hasSCMPDigitalAccess)}).then(!0).fallback(!1)),e.addRule(new rr("user.hasSCMPPlusAccessRight").stage(2).waitFor(eo).when((e,t)=>{let{ipRangeAccess:r}=e,{user:{isSCMPPlusSubscriber:n,isInternalStaff:i}}=t;return n||i||(null==r?void 0:r.hasSCMPPlusAccess)}).then(!0).fallback(!1)),e.addRule(new rr("user.hasEpaperAccessRight").stage(2).waitFor(eo).when(e=>{let{ipRangeAccess:t,hasActiveEpaperConversions:r}=e;return r||(null==t?void 0:t.hasSCMPEpaperAccess)||(null==t?void 0:t.hasYpEpaperAccess)||(null==t?void 0:t.hasYpSparkEpaperAccess)||(null==t?void 0:t.hasPostiesEpaperAccess)}).then(!0).fallback(!1)),e.addRule(new rr("user.hasPostiesAccessRight").stage(2).waitFor(eo).when((e,t)=>{let{hasActivePartnersConversions:r,ipRangeAccess:n}=e,{user:{isPostiesSubscriber:i,isInternalStaff:a,isVipExclusive:s}}=t;return i||a||s||r||(null==n?void 0:n.hasPostiesDigitalAccess)}).then(!0).fallback(!1)),e.addRule(new rr("user.isCorpSubscriber").when(e=>{let{hasActiveCorpConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isFreeSubscriber").when(e=>{let{hasActiveFreeConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isSiteLicenseSubscriber").when(e=>{let{hasActiveSiteLicenseConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isInternalStaff").when(e=>{let{activeConversions:t,pianoResourceIds:r}=e;return t.filter(e=>nn(["internal"],r).includes(k()(e,"term.resource.rid"))).length>0}).then(!0).fallback(!1)),e.addRule(new rr("user.isVipExclusive").when(e=>{let{activeConversions:t,pianoResourceIds:r}=e;return t.filter(e=>nn(["vip"],r).includes(k()(e,"term.resource.rid"))).length>0}).then(!0).fallback(!1)),e.addRule(new rr("user.isPrintBundle").when(e=>{let{hasActiveConversions:t}=e;return t}).then(e=>{let{activeConversionTermNames:t,activeConversionResources:r}=e;return!!r.includes("printBundle")||!(!r.includes("SCMP")||!t.some(e=>e.startsWith("Annual: Digital +")))||!!(r.includes("SCMP+ePaper")||r.includes("SCMP+Weekday+ePaper")||r.includes("SCMP+Daily+ePaper")||r.includes("SCMP+Weekend+ePaper"))}).fallback(!1)),e.addRule(new rr("user.isAccessGrantedUser").when(e=>{let{activeConversionTermTypes:t}=e;return t.includes("grant_access")}).then(!0).fallback(!1)),e.addRule(new rr("user.isSCMPChurned").when(e=>{let{hasSCMPB2CChurnedConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.isYPChurned").when(e=>{let{hasIndividualYPConversions:t,hasActiveIndividualYPConversions:r}=e;return t&&!r}).then(!0).fallback(!1)),e.addRule(new rr("user.winback").when(e=>!(null==e||!e.winback)).then(e=>null==e?void 0:e.winback).fallback(null).deprecate("should use new rule user.winback")),e.addRule(new rr("user.clientName").stage(2).when((e,t)=>{let{user:{isCorpSubscriber:r,isSiteLicenseSubscriber:n}}=t;return r||n}).then((e,t)=>{let{activeSiteLicenseTermName:r}=e,{user:{isSiteLicenseSubscriber:n}}=t;return n?r:"unknown corporate client"}).fallback("")),e.addRule(new rr("user.isAutoRenewable").when(e=>{let{activeConversionTermTypes:t}=e;return t.includes("payment")}).then(!0).fallback(!1)),e.addRule(new rr("user.packages").when(e=>{let{hasActivePublisherSubscriptionConversions:t}=e;return t}).then(e=>{let{activePublisherSubscriptionConversions:t}=e;return t.map(nj).filter(Boolean)}).fallback([])),e.addRule(new rr("user.isUpgradeable").when(e=>{let{hasActivePublisherSubscriptionConversions:t}=e;return t}).then(e=>{let{activePublisherSubscriptionConversions:t}=e;return t.some(e=>{var t;return null==e||null==(t=e.subscription)||null==(t=t.term)||null==(t=t.change_options)?void 0:t.some(e=>{var t;return null==e||null==(t=e.to_term_name)?void 0:t.toLowerCase().includes("upgrade")})})}).fallback(!1)),e.addRule(new rr("runtime.pianoUserInfo").when(e=>{let{hasConversions:t}=e;return t}).then(async()=>await rp()).fallback({})),e.addRule(new rr("runtime.pianoUserGracePeriodField").stage(2).when((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return!E()(k()(r,"custom_fields"))}).then((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return k()(r,"custom_fields",[]).find(e=>"isGracePeriod"===k()(e,"fieldName",""))||{}}).fallback({})),e.addRule(new rr("runtime.pianoUserShowOnboardingField").stage(2).when((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return!E()(k()(r,"custom_fields"))}).then((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return k()(r,"custom_fields",[]).find(e=>"showOnboarding"===k()(e,"fieldName",""))||{}}).fallback({})),e.addRule(new rr("runtime.pianoUserHasShownSwGLinkingFlowField").stage(2).when((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return!E()(k()(r,"custom_fields"))}).then((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return k()(r,"custom_fields",[]).find(e=>"hasShownSwGLinkingFlow"===k()(e,"fieldName",""))||{}}).fallback({})),e.addRule(new rr("runtime.pianoUserHasShownSCMPPlusWelcomePopUpField").stage(2).when((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return!E()(k()(r,"custom_fields"))}).then((e,t)=>{let{runtime:{pianoUserInfo:r}}=t;return k()(r,"custom_fields",[]).find(e=>"hasShownSCMPPlusWelcomePopUp"===k()(e,"fieldName",""))||{}}).fallback({})),e.addRule(new rr("user.gracePeriod").stage(3).when((e,t)=>{let{hasActivePublisherSubscriptionConversions:r}=e,{runtime:{pianoUserGracePeriodField:n}}=t,i=String(n.value).toLowerCase();return r&&!E()(n)&&"true"===i}).then((e,t)=>{let{hasActivePublisherSubscriptionConversions:r,activePublisherSubscriptionConversions:n}=e,{runtime:{pianoUserGracePeriodField:i}}=t;return r?((e,t)=>{if("true"!==(null==e?void 0:e.value))return null;let r=nU()(),n=t.reduce((e,t)=>{var r,n,i;if("payment subscription renewal with grace period"===t.type.toLowerCase()){let r=nU().unix(null==(i=t.subscription)?void 0:i.next_bill_date);return null!=e&&e.expiryDate.isBefore(r)?e:{targetConversion:t,expiryDate:r}}let a=nU().unix(null==(r=t.subscription)?void 0:r.next_bill_date),s=null==t||null==(n=t.subscription)||null==(n=n.term)?void 0:n.payment_renew_grace_period,o=a.add(s,"day");return null!=e&&e.expiryDate.isBefore(o)?e:{targetConversion:t,expiryDate:o}},null);if(!n)return null;let i=nU()(e.created),a=n.targetConversion.subscription.term.payment_renew_grace_period,s=i.add(a,"day"),o=i.add(a/2,"day"),l=s.diff(r,"day"),c=a/2>=l;return{isActive:l>0,startDate:i.toDate(),daysLeft:l,expiryDate:s.toDate(),halfExpiryDate:o.toDate(),isWithinHalf:c,gracePeriodLength:a}})(i,n):nN}).fallback(nN)),e.addRule(new rr("user.onboardingData").stage(3).when((e,t)=>{let{runtime:{pianoUserShowOnboardingField:r}}=t;return!E()(r)}).then((e,t)=>{let{runtime:{pianoUserShowOnboardingField:r}}=t;return ne()(r,["value","created"])}).fallback({value:null,created:null})),e.addRule(new rr("user.pianoCustomFields.hasShownSCMPPlusWelcomePopUp").stage(3).when((e,t)=>{let{runtime:{pianoUserHasShownSCMPPlusWelcomePopUpField:r}}=t;return!E()(r)}).then((e,t)=>{var r;let{runtime:{pianoUserHasShownSCMPPlusWelcomePopUpField:{value:n}}}=t;return{value:null!=(r=JSON.parse(n))&&r}}).fallback({value:!1})),e.addRule(new rr("user.isAutoRenew").deprecate("should use new name user.autoRenewEnabled").disable()),e.addRule(new rr("user.autoRenewEnabled").when(e=>{let{hasActiveScmpSubscription:t}=e;return t}).then(e=>{let{activeScmpSubscription:t}=e;return k()(t,"auto_renew",!1)&&"payment"===k()(t,"term.type","")}).fallback(!1)),e.addRule(new rr("user.overallAutoRenewEnabled").when(e=>{let{hasActiveSubscriptions:t}=e;return t}).then(e=>{let{latestActiveSubscription:t}=e;return k()(t,"auto_renew",!1)&&"payment"===k()(t,"term.type","")}).fallback(!1)),e.addRule(new rr("user.autoRenewSubscriptionId").stage(2).when((e,t)=>{let{hasActiveScmpSubscription:r}=e,{user:{autoRenewEnabled:n,isAutoRenewable:i}}=t;return r&&i&&!n}).then(e=>{let{activeScmpSubscription:t}=e;return k()(t,"subscription_id","")}).fallback("")),e.addRule(new rr("user.overallAutoRenewSubscriptionId").stage(2).when((e,t)=>{let{hasActiveSubscriptions:r}=e,{user:{overallAutoRenewEnabled:n,isAutoRenewable:i}}=t;return r&&i&&!n}).then(e=>{let{latestActiveSubscription:t}=e;return k()(t,"subscription_id","")}).fallback("")),e.addRule(new rr("user.overallSubscriptionDaysLeft").when(e=>{let{hasActiveSubscriptions:t}=e;return t}).then(e=>{let{latestActiveSubscription:t}=e,r=k()(t,"next_bill_date");return r?Math.round((1e3*r-(new Date).valueOf())/1e3/60/60/24):-1}).fallback(-1)),e.addRule(new rr("user.isActiveSubscriptionInTrialPeriod").when(e=>{let{hasActiveSubscriptions:t}=e;return t}).then(e=>{let{latestActiveSubscription:t}=e;return!!k()(t,"is_in_trial")}).fallback(!1)),e.addRule(new rr("user.expiryReminder").when(e=>{let{hasActiveScmpSubscription:t}=e;return t}).then(e=>{let{activeScmpSubscription:t,appConfig:r}=e,n=nG({subscriptions:[t]});return E()(n)?nY:(e=>{let{subscription:t,appConfig:r}=e;if(k()(t,"auto_renew",!1))return nY;let n=k()(t,"next_bill_date"),i=(e=>{var t;let{resource:r}=tb(e),n=null!=(t=null==r?void 0:r.toLowerCase().includes("scmpplus"))&&t,i="digital"===(null==r?void 0:r.toLowerCase());if(!n&&!i)return;let[a]=e.split(":"),s=a.toLowerCase().replace("-"," ");return s.startsWith("2")?`${s}s`:s})(k()(t,"term.name","")),a=(e=>{let{period:t,appConfig:r}=e,n=k()(r,"expiryReminder",{});return parseInt(k()(n,{"1 month":"monthlySecondChurnDayLeft","1 year":"annualSecondChurnDayLeft","2 years":"biannualSecondChurnDayLeft"}[t],"7"),10)||7})({period:i,appConfig:r}),s=(e=>{let{period:t,appConfig:r}=e,n="1 month"===t?30:90,i=k()(r,"expiryReminder",{});return parseInt(k()(i,{"1 month":"monthlyFirstChurnDayLeft","1 year":"annualFirstChurnDayLeft","2 years":"biannualFirstChurnDayLeft"}[t],`${n}`),10)||n})({period:i,appConfig:r}),o=Math.round((1e3*n-(new Date).valueOf())/1e3/60/60/24),l=o>=0&&o<=a;return{expireDate:n,dayLeft:o,termPeriod:i,isFirstChurning:!l&&o<=s,isSecondChurning:l}})({subscription:n,appConfig:r})}).fallback(nY)),e.addRule(new rr("user.tier").stage(2).when((e,t)=>{let{user:{isSiteLicenseSubscriber:r,isCorpSubscriber:n}}=t;return r||n}).then(async()=>await rc()).fallback("")),e.addRule(new rr("user.activeBillingPeriod").when(e=>{let{hasIndividualPaymentSCMPConversions:t,hasActiveIndividualSCMPConversions:r,hasActivePublisherSubscriptionConversions:n}=e;return t&&r&&n}).then(e=>{var t;let{latestActivePublisherSubscriptionConversion:r}=e;return null==r||null==(t=r.subscription)||null==(t=t.term.payment_billing_plan_table)||null==(t=t[0])?void 0:t.billingPeriod}).fallback("")),e.addRule(new rr("user.myNewsOfferRedeemed").when(e=>{let{hasConversions:t}=e;return t}).then(e=>{let{allConversionTermNames:t}=e;return t.includes("myNEWS 24 hours FREE unlimited access")}).fallback(!1)),e.addRule(new rr("user.isPasswordless").waitFor(el).when(e=>{let{hasToken:t,userCookie:r}=e;return t&&!r}).then(!0).fallback(!1)),e.addRule(new rr("user.isAuthenticated").waitFor(el).when(e=>{let{hasToken:t,userCookie:r}=e;return t&&r}).then(!0).fallback(!1)),e.addRule(new rr("user.hasEverSubscribedToSCMP").when(e=>{let{hasIndividualSCMPConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.hasEverSubscribedToYP").when(e=>{let{hasIndividualYPConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.hasEverSubscribedToPosties").when(e=>{let{hasIndividualPaymentPostiesConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.hasEverConvertedToSCMPPlus").when(e=>{let{hasIndividualSCMPPlusConversions:t}=e;return t}).then(!0).fallback(!1)),e.addRule(new rr("user.types").when(e=>{let{userTypes:t}=e;return!!t}).then(e=>{let{userTypes:t}=e;return t}).fallback({scmp:"NEW_USER",yp:"NEW_USER",posties:"NEW_USER"})),e.addRule(new rr("user.redeemedPromoCodes").when(e=>{let{allPublisherConversions:t}=e;return t}).then(e=>{let{allPublisherConversions:t}=e;return t.reduce((e,t)=>{var r;let n=null==t||null==(r=t.promo_code)?void 0:r.code;return n&&e.push(n),e},[])}).fallback([])),e.addRule(new rr("user.campaign2024JanSubscriberPreChurnOffer").stage(2).when((e,t)=>{let{activeSCMPPublisherConversions:r}=e,{user:{autoRenewEnabled:n}}=t;return r&&!n}).then((e,t)=>{var r,n;let{allPublisherConversions:i,activeSCMPPublisherConversions:a}=e,{user:{redeemedPromoCodes:s,overallSubscriptionDaysLeft:o,isNewPianoCustomer:l}}=t,c=a.find(e=>"Subscription"===e.type),u="renew2024JanPromoCodeSubs2425q3",d=null==(r=c.subscription)||null==(r=r.term)?void 0:r.name,f=null==(n=c.subscription)||null==(n=n.term)?void 0:n.payment_currency,{billingCycle:p,currency:h,resource:x}=eR.decodeTermName(d);return(()=>{var e;if(!d||o>90)return!1;let t=s.includes(u),r="2024jan"===(null==c||null==(e=c.promo_code)?void 0:e.code);return!t&&r&&"1y"===p&&"HKD"!==f&&"digital"===x})()?{isEligible:!0,plans:[(()=>{var e,t,r,n;let[i]=null==(e=c.subscription)||null==(e=e.term)||null==(e=e.change_options)?void 0:e.filter(e=>{let{billingCycle:t,resource:r,variant:n}=eR.decodeTermName(e.to_term_name);return"2y"===t&&"digital"===r&&"Upgrade(Intro)"===n}),a=tC(i.to_billing_plan);return null!=a&&null!=(t=a.rack)&&t.price?{currency:f,rackPrice:a.rack.price,intoPrice:null==a||null==(r=a.trial)?void 0:r.price,chargePrice:(null==a||null==(n=a.trial)?void 0:n.price)||a.rack.price,resource:"digital",subscribeAction:nz.UPGRADE,billingCycle:"2y"}:null})(),(()=>{var e,t;let r=null==(e=nJ({action:nz.RENEW,term:null==(t=c.subscription)?void 0:t.term,isNewPianoCustomer:l}))?void 0:e.pop();if(!r)return null;let n={USD:36,"USD-H":18,MYR:108,SGD:51}[h]||"";return n?{currency:f,rackPrice:r.price,chargePrice:n,resource:"digital",billingCycle:"1y",subscribeAction:nz.RENEW,hiddenPromoCode:u,promotionName:"PT-2024jan-promo-code-subs-annual-renewal-70%-off"+("USD-H"===h?"-"+h:"")}:null})()].filter(Boolean)}:{isEligible:!1}}).fallback({isEligible:!1})),new rr("user.isLikelyToSubscribe").waitFor(eo).when(e=>{let{ltsBucket:t}=e;return void 0!==t}).then(e=>{let{ltsBucket:t}=e;return null!=t&&t}).fallback(!1),e.addRule(new rr("user.promoCodeUsage").when(e=>{let{allPublisherConversions:t}=e;return t.length>0}).then(e=>{let{allPublisherConversions:t}=e;return{preChurn:{...n0(t)}}}).fallback({})),e.addRule(new rr("user.isNewPianoCustomer").when(e=>{let{hasConversions:t,allConversionTermTypes:r}=e;return t&&r}).then(e=>{let{allConversionTermTypes:t}=e,r=new Set(["payment"]);return!1===Array.from(new Set(null!=t?t:[])).some(e=>r.has(e))}).fallback(!0)),e.addRule(new rr("user.hasScmpUpgradeOptions").when(e=>{let{hasScmpChangeOptionsAvailable:t}=e;return void 0!==t}).then(e=>{let{hasScmpChangeOptionsAvailable:t}=e;return t}).fallback(!1)),e.addRule(new rr("user.hasScmpPlusUpgradeOptions").when(e=>{let{latestActivePublisherSubscriptionConversion:t}=e;return null!=t}).then(e=>{var t,r;let{latestActivePublisherSubscriptionConversion:n}=e;return null!=(t=null==n||null==(r=n.subscription)||null==(r=r.term)?void 0:r.change_options.some(e=>{let{resource:t,variant:r}=eR.decodeTermName(e.to_term_name),n=new Set([...eb,...ex]).has(t),i=new Set(["Upgrade(Intro)"]).has(r);return n&&i}))&&t}).fallback(!1))},ii=async e=>{e.addRule(new rr("tracking.registrationPlatform").waitFor(el).stage(8).when(()=>!0).then((e,t)=>{var r;let{userCookie:n}=e,{user:{isPasswordless:i}}=t;if(i)return"passwordless";let a=k()(n,"source");return a?a.includes("nl:")?a.includes("facebook")?"NL-Facebook":a.includes("google")?"NL-Google":"NL-Email":a.includes("facebook")?"Facebook":a.includes("apple")?"Apple":a.includes("google:yolo")?"Google one-tap":a.includes("google:gsuite")||a.includes("google")?"Google":a.includes("email")?"Email":null!=(r=({"piano:swg":"Email"})[a])?r:"":""})),e.addRule(new rr("tracking.subscriberStatus").waitFor(el).stage(8).when(e=>{let{hasToken:t}=e;return t}).then(e=>{let{hasConversions:t,hasActiveConversions:r,activeConversionTermTypes:n,activeConversionTypes:i,allConversionTermTypes:a,activeConversionResources:s}=e;return r?n.some(e=>["payment","custom","external"].includes(e))||s.some(e=>["vip","partners","printBundle"].includes(e))||i.includes("licensee contract redemption")?"active":s.includes("internal")?"staff":"none":t&&a.some(e=>["payment","custom","external"].includes(e))?"churn":"none"}).fallback("none")),e.addRule(new rr("tracking.ga4.userRole").waitFor(el).stage(9).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{var r;let{tracking:{subscriberStatus:n}}=t;return null!=(r=({active:"subscriber",churn:"churn",none:"authenticated user",staff:"staff"})[n])?r:"anonymous user"}).fallback("anonymous user")),e.addRule(new rr("tracking.ga4.subscriberPhase").stage(9).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{user:{winback:r,activeBillingPeriod:n,gracePeriod:{isActive:i,isWithinHalf:a},expiryReminder:{isFirstChurning:s,isSecondChurning:o,expireDate:l}}}=t;return i?a?ec.FIRSTGRACE:ec.SECONDGRACE:null!=r&&r.latestExpiredScmpB2CConversion?ec.WINBACK:n?s?ec.FIRSTCHURNING:o?ec.SECONDCHURNING:l>0?ec.PRECHURNING:ec.DEFAULT:ec.NONSUBSCRIBER}).fallback(ec.NONSUBSCRIBER)),e.addRule(new rr("tracking.userRole").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{var r;let{tracking:{registrationPlatform:n,ga4:{userRole:i}}}=t;return`${null!=(r=({subscriber:"Subscriber",churn:"Churn","authenticated user":"authenticated user - Register",staff:"staff - Register"})[i])?r:"anonymous user"} (${n&&""!==n?n:"Email"})`}).fallback("anonymous user")),e.addRule(new rr("tracking.ga4.siteLicenseContractIds").waitFor(el).stage(8).when((e,t)=>{let{user:{isSiteLicenseSubscriber:r}}=t;return r}).then(e=>{let{activeSiteLicenseTermIds:t}=e;return t}).fallback(null)),e.addRule(new rr("tracking.ga4.ipRangeContractIds").waitFor(eo).stage(8).when(()=>!0).then((e,t)=>{let{ipRangeContractIds:r}=e;return E()(r)?null:r}).fallback(null)),e.addRule(new rr("tracking.ga4.ipAccess").waitFor(eo).stage(8).when(()=>!0).then(()=>{var e,t;let r=null==(t=window)||null==(t=t.tp)||null==(t=t.customVariables)?void 0:t.ip_access_client_id;return E()(r)?null:{id:r,type:!0===(null==(e=window)||null==(e=e.tp)||null==(e=e.customVariables)?void 0:e.ip_ezproxy_user)?"ezproxy":"whitelisting"}})),e.addRule(new rr("tracking.ga4.baseParameters").waitFor([el,eo]).stage(12).when(()=>!0).then((e,t)=>{var r;let{appConfig:n,piano:i,activeConversions:a}=e,{user:s,tracking:{ga4:{subscriberPhase:o}}}=t,l=(null==a?void 0:a.map(e=>e.term.term_id).filter(Boolean).join(","))||null,c="boolean"==typeof(null==s?void 0:s.autoRenewEnabled)?s.autoRenewEnabled?"auto renew on":"auto renew off":null,u=null==s?void 0:s.overallSubscriptionDaysLeft,d=i4({campaigns:null==n?void 0:n.campaigns,user:{currency:null==i?void 0:i.currency,type:null==s||null==(r=s.types)?void 0:r.scmp}});return{...d&&{internal_campaign:d.name},...c&&{auto_renew:c},...u&&u>=0&&{no_of_days_left_expiry:u},...o&&{subscriber_phase:o},...l&&{user_term_ids:l}}}).fallback({}))},ia="abTestVariants";function is(e){let{testName:t,variant:r,experimentId:n}=e;"undefined"==typeof window||window.tp||(window.tp=[]),window.tp.push(["setCustomVariable",`${ia}.${t}`,{experimentId:n,variant:r}])}function io(e){let{customVariables:t={}}=e;return Object.entries(t).reduce((e,t)=>{let[r,n]=t;if(!r.startsWith(`${ia}.`))return e;let i=r.replace(`${ia}.`,"");return{...e,[i]:n}},{})}let il=Q.extend("utils/serverRules"),ic=Q.extend("helpers/swg"),iu=Q.extend("utils/adBlockerDetection"),id=Q.extend("utils/waiter"),ip="ready",ih="error",ix=new class{constructor(){this._waitingList={}}subscribe(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];E()(e)||E()(t)?id("subscribe()::name and channel are required"):E()(this._waitingList[e])?id("subscribe()::no such waiter name: %s",e):(this._waitingList[e].subscribers.push({channel:t,source:r,sent:!1,monitor:n}),id("subscribe()::new [%s] subscriber with source [%o] added for channel [%s]",e,r,t),this.notify(e))}setStatus(e,t){E()(e)||E()(t)?id("setStatus()::name and status are required"):E()(this._waitingList[e])?id("setStatus()::no such waiter name: %s",e):this._waitingList[e].status=t}setData(e,t){E()(e)||E()(t)?id("setData()::name and data are required"):E()(this._waitingList[e])?id("setData()::no such waiter name: %s",e):this._waitingList[e].data=t}setError(e,t){E()(e)||E()(t)?id("setError()::name and reason are required"):E()(this._waitingList[e])?id("setError()::no such waiter name: %s",e):(this._waitingList[e].status=ih,this._waitingList[e].data=null,this._waitingList[e].reason=t)}buildResponse(e,t,r){if(E()(e)||E()(this._waitingList[e]))return void id("buildResponse()::no such waiter name: %s",e);if(E()(t))return void id("buildResponse()::channel is required.");let{data:n}=this._waitingList[e];if(!E()(n))return{type:r?"message":"custom",source:r,message:{channel:t,requestType:e,responseData:n}};id("buildResponse()::waiter %s got no data",e)}buildErrorResponse(e,t,r){if(E()(e)||E()(this._waitingList[e]))return void id("buildErrorResponse()::no such waiter name: %s",e);if(E()(t))return void id("buildErrorResponse()::channel is required.");let{reason:n}=this._waitingList[e];if(!E()(n))return{type:r?"message":"custom",source:r,message:{channel:t,requestType:e,responseData:null,error:!0,errorMessage:n}};id("buildErrorResponse()::waiter [%s] got no error message",e)}register(e){if(E()(this._waitingList[e])){if(E()(e))return void id("register()::waiter name is required");this._waitingList[e]={status:"waiting",subscribers:[],data:null},id("register()::registered new waiter %s",e)}else id("register()::waiter %s already registered, do you mean subscribe?")}notify(e){var t,r;if(E()(e)||E()(this._waitingList[e]))return void id("notify()::no such waiter name: %s",e);let{status:n,data:i,reason:a}=this._waitingList[e];if(n===ip){if(E()(i))return void id("notify()::data is empty");null==(t=this._waitingList[e])||null==(t=t.subscribers)||t.forEach(t=>{let{channel:r,source:n,sent:i,monitor:a}=t;if(!i){let i=this.buildResponse(e,r,n);E()(i)?id("notify()::could not build response message"):(ad.sendMessage(r,i),id("notify()::notified channel %s for waiter %s, with data: %o",r,e,i),!0!==a&&(t.sent=!0))}})}else if(n===ih){if(E()(a))return void id("notify()::reason is empty");null==(r=this._waitingList[e])||null==(r=r.subscribers)||r.forEach(t=>{let{channel:r,source:n,sent:i}=t;if(!i){let i=this.buildErrorResponse(e,r,n);E()(i)?id("notify()::could not build error response message"):(ad.sendMessage(r,i),id("notify()::notified channel %s for waiter %s, with error: %o",r,e,i),t.sent=!0,t.monitor=!1)}})}else id("notify()::waiter [%s] status is [%s], will not notify",e,n)}update(e,t){E()(e)||E()(this._waitingList[e])?id("update()::no such waiter name: %s",e):E()(t)?id("update()::data is empty"):(this.setStatus(e,ip),this.setData(e,t),id("update()::updated waiter %s, data: %o",e,t),this.notify(e))}cancel(e,t){E()(e)||E()(this._waitingList[e])?id("cancel()::no such waiter name: %s",e):(this.setError(e,t),id("cancel()::waiter %s cancelled, reason: %s",e,t),this.notify(e))}};Object.freeze(ix);let ib=Q.extend("checkout/paywallSetup");var ig=n(2495),im=n.n(ig),iy=n(7594),iv=n.n(iy);let iw=et("modules/localStorageCache"),iP="__rosetta_sdk",iC=e=>{try{var t,r;let n=iS({key:e});return null!=(t=null==n||null==(r=n.tp)?void 0:r.customVariables)?t:{}}catch(e){return iw.error("Failed to load tp custom variable from localStorage:",e),{}}},iS=e=>{let{sdk:t,key:r}=e,n=localStorage.getItem(iP);return n?iA(n)?JSON.parse(n):JSON.parse(ik({encryptedData:n,sdk:t,key:r})):null},i_=(e,t)=>iv().AES.encrypt(e,t.getConfig().piano.aid).toString(),ik=e=>{let{encryptedData:t,sdk:r,key:n}=e,i=null!=n?n:r.getConfig().piano.aid;return iv().AES.decrypt(t,i).toString(iv().enc.Utf8)},iA=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},iE="ltsBucket",iT="lts";function iD(e){let{sdk:t}=e,r=tz(),n=e=>{let n=parseInt(function(){if("undefined"!=typeof window)return new URL(window.location.href).searchParams.get(iE)}()||function(e){var n;let i=null==e||null==(n=e.result.events[0].eventExecutionContext.userSegments)||null==(n=n.COMPOSER1X)||null==(n=n.segments)?void 0:n.find(e=>{var t;return"LTs"===(null==(t=e.split(":"))?void 0:t[0])});if(!i)return r.setCustomVariable(iE,void 0),void t.rulesEngine.addFact(iE,void 0);let[,,a]=i.split(":");return a}(e),10),i=isNaN(n)?null:n;r.setCustomVariable(iE,i),t.rulesEngine.addFact(iE,i)};return t.prependListener("experienceExecute",n),{cleanup:()=>{t.off("experienceExecute",n)}}}function iR(e){let{customVariables:t}=e;return null==t?void 0:t[iE]}function iM(e){let t=iC(e);return null==t?void 0:t.ltsBucket}function iB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{currency:void 0,type:void 0},terms:void 0,lts:{bucket:void 0,variant:void 0}},{user:t,terms:r,lts:n}=e;return!("NEW_USER"!==t.type||!r||void 0===n.bucket||void 0===n.variant)}function i$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{currency:void 0,type:void 0},terms:void 0,lts:{bucket:void 0,variant:void 0}},{terms:t,lts:r}=e;if(!iB(e))return[];let n=iF(r);return n?t.reduce((e,t)=>{let{variant:r}=eR.decodeTermName(t.name);return(null==r?void 0:r.toLowerCase())!==n.toLowerCase()||e.push(t),e},[]):[]}let iF=function(e){if(void 0===e.bucket||!e.variant)return;let t={NaN:"N",0:"L",1:"M",2:"H"},r=Math.max(...Object.keys(t).filter(e=>"NaN"!==e).map(Number));return`lts(${t[Math.min(r,Math.floor(parseInt(e.bucket,10)/4))]||t.NaN}-${e.variant})`};var iI=n(2579),iO=n.n(iI);class iL extends iO(){constructor(){super(),this._listeners=new Map,this._postpendListeners=new Map}_validateListener(e){if("function"!=typeof e)throw TypeError("The listener must be a function")}_getEventListeners(e){return this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e)}_getPostpendListeners(e){return this._postpendListeners.has(e)||this._postpendListeners.set(e,[]),this._postpendListeners.get(e)}_updateEventEmitter(e){let t=this._getEventListeners(e),r=this._getPostpendListeners(e);super.removeAllListeners(e),[...t,...r].forEach(t=>super.on(e,t))}off(e,t){let r=this._getEventListeners(e),n=this._getPostpendListeners(e),i=r.indexOf(t),a=n.indexOf(t);return -1!==i&&r.splice(i,1),-1!==a&&n.splice(a,1),-1===i&&-1===a||this._updateEventEmitter(e),this}on(e,t){return this._validateListener(t),this._getEventListeners(e).push(t),this._updateEventEmitter(e),this}removeListener(e,t){return this.off(e,t)}addListener(e,t){return this.on(e,t)}postpendListener(e,t){return this._validateListener(t),this._getPostpendListeners(e).push(t),this._updateEventEmitter(e),this}prependListener(e,t){return this._validateListener(t),this._getEventListeners(e).unshift(t),this._updateEventEmitter(e),this}removeAllListeners(e){return e?(this._listeners.delete(e),this._postpendListeners.delete(e)):(this._listeners.clear(),this._postpendListeners.clear()),super.removeAllListeners(e)}}let iU=Q.extend("rulesEngine/facts/ipRangeAccess"),iN={hasSCMPLiteAccess:new Set(["SCMP+Lite"]),hasSCMPDigitalAccess:new Set(["SCMP","SCMP-B2B"]),hasSCMPPrintAccess:new Set(["printBundle"]),hasSCMPEpaperAccess:new Set(["SCMPePaper"]),hasSCMPPlusAccess:new Set(["SCMPPlus"]),hasYpDigitalAccess:new Set(["YP"]),hasYpPrintAccess:new Set(["YPPrint"]),hasYpEpaperAccess:new Set(["YPePaper"]),hasYpSparkDigitalAccess:new Set(["ypSparkDigital"]),hasYpSparkPrintAccess:new Set(["ypSparkPrint"]),hasYpSparkEpaperAccess:new Set(["ypSparkEpaper"]),hasPostiesDigitalAccess:new Set(["posties"]),hasPostiesEpaperAccess:new Set(["postiesEPaper"])},ij={hasSCMPLiteAccess:!1,hasSCMPDigitalAccess:!1,hasSCMPPrintAccess:!1,hasSCMPEpaperAccess:!1,hasSCMPPlusAccess:!1,hasYpDigitalAccess:!1,hasYpEpaperAccess:!1,hasYpSparkDigitalAccess:!1,hasYpSparkPrintAccess:!1,hasYpSparkEpaperAccess:!1,hasPostiesDigitalAccess:!1,hasPostiesEpaperAccess:!1},iH=Q.extend("modules/checkout/offers/standardDigital"),iW={terms:[],user:{hasEverSubscribedToScmp:!1,hasEverSubscribedToPosties:!1,hasEverSubscribedToYoungPost:!1,hasEverConvertedToSCMPPlus:!1}},iY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iW;if(iH("getStandardDigitalTerms",e),!e.terms)return iH("No terms or user found in context",e),[];let{terms:t,user:{hasEverSubscribedToScmp:r}}=e;return t.filter(e=>(function(e){let{resource:t}=eR.decodeTermName(e);return"digital"===t})(e.name)).filter(e=>(function(e){let{variant:t}=eR.decodeTermName(e);return!t})(e.name)).map(e=>(e=>{let t=(null==e?void 0:e.payment_billing_plan_table)||[],r=(null==e?void 0:e.payment_currency)||"",n=t.find(e=>"true"!==(null==e?void 0:e.isTrial)),i=t.find(e=>"true"===(null==e?void 0:e.isTrial)),a=(null==n?void 0:n.priceValue)||0,s=(null==i?void 0:i.priceValue)||a,o=(null==n?void 0:n.billingPeriod)||"";return{...e,...!(null!=e&&e.termId)&&{termId:null==e?void 0:e.id},...r&&{currency:r},...!(null!=e&&e.rackPrice)&&{rackPrice:a},...!(null!=e&&e.introPrice)&&{introPrice:s},...!(null!=e&&e.billingPeriod)&&{billingPeriod:o}}})(e)).map(e=>({...e,discount:r?0:Math.round(100*(1-e.introPrice/e.rackPrice)),chargePrice:r?e.rackPrice:e.introPrice}))},iG=iq(function(e){let{billingCycle:t}=e,r="scmpAndScmpPlusEPaper";return{name:`Bundle Rack: ${r} | ${t}`,offer:"standard",action:"subscribe",term:{billingCycle:t,resource:r},isEligible:()=>({isEligible:!0}),selectTerm:e=>e.terms.find(n=>{var i;let a=tb(n.name),s=r===a.resource,o=t.toLowerCase()===(null==(i=a.billingCycle)?void 0:i.toLowerCase()),l=e.user.currency===a.currency,c="Rack"===a.variant,u=!a.isCrossProduct;return s&&o&&l&&c&&u})||null}}),iz=iq(function(e){let{billingCycle:t}=e,r="scmpAndScmpPlusEPaper";return{name:`Bundle Intro: ${r} | ${t}`,offer:"standard",action:"subscribe",term:{billingCycle:t,resource:r},isEligible:e=>({isEligible:!e.user.hasEverConvertedToSCMPPlus}),getPromotionName(e){var r;return null==(r=({"1Y":{default:"PT-plus-1-month-free-trial-annual-intro-fix-PLUSINTROFIXANNUAL",usdh:"PT-plus-1-month-free-trial-annual-intro-fix-USD-H-PLUSINTROFIXANNUAL"},"2Y":{default:"PT-plus-1-month-free-trial-biannual-intro-fix-PLUSINTROFIXBIANNUAL",usdh:"PT-plus-1-month-free-trial-biannual-intro-fix-USD-H-PLUSINTROFIXBIANNUAL"}})[t])?void 0:r["USD-H"===e.user.currency?"usdh":"default"]},selectTerm:e=>e.terms.find(n=>{var i;let a=tb(n.name),s=r===a.resource,o=t.toLowerCase()===(null==(i=a.billingCycle)?void 0:i.toLowerCase()),l=e.user.currency===a.currency,c="Intro"===a.variant,u=!a.isCrossProduct;return s&&o&&l&&c&&u})||null}}),iV=[...iG,...iz];function iq(e){return[{billingCycle:"1M"},{billingCycle:"1Y"},{billingCycle:"2Y"}].map(t=>e({billingCycle:t.billingCycle}))}let iK=(e=function(e){let{billingCycle:t,resource:r}=e;return{name:`Bundle Plus Rack: ${r} | ${t}`,offer:"standard",action:"subscribe",term:{billingCycle:t,resource:r},isEligible:()=>({isEligible:!0}),selectTerm:e=>e.terms.find(n=>{var i;let a=tb(n.name),s=r===a.resource,o=t.toLowerCase()===(null==(i=a.billingCycle)?void 0:i.toLowerCase()),l=e.user.currency===a.currency,c="Rack"===a.variant,u=!a.isCrossProduct;return s&&o&&l&&c&&u})||null}},[{billingCycle:"1Y",resource:"scmpPlusDailyPrintBundle"},{billingCycle:"2Y",resource:"scmpPlusDailyPrintBundle"},{billingCycle:"1Y",resource:"scmpPlusWeekdayPrintBundle"},{billingCycle:"2Y",resource:"scmpPlusWeekdayPrintBundle"},{billingCycle:"1Y",resource:"scmpPlusWeekendPrintBundle"},{billingCycle:"2Y",resource:"scmpPlusWeekendPrintBundle"}].map(t=>e({billingCycle:t.billingCycle,resource:t.resource})));async function iJ(e){let{context:t,services:r,plans:n}=e,i=n.reduce((e,r)=>{var n;let{isEligible:i,source:a}=r.isEligible(t);if(!i)return e;let s=r.selectTerm(t);if(!s)return e;let o=null==(n=r.getPromotionName)?void 0:n.call(r,t);return e.plans.push({offer:r.offer,action:r.action,targetTerm:s,targetPromotionName:o,source:a}),o&&e.uniquePlanPromotionNames.add(o),e},{plans:[],uniquePlanPromotionNames:new Set}),a=await r.fetchPromotions(Array.from(i.uniquePlanPromotionNames));return i.plans.reduce((e,r)=>{var n;let i=tb(r.targetTerm.name);if(!1===i.decoded)return e;let s=(()=>{let{targetPromotionName:e}=r;if(e)return a.find(t=>t.name.toLowerCase().startsWith(e.toLowerCase()))})();return r.targetPromotionName&&!s||e.push({offer:r.offer,action:r.action,term:r.targetTerm,decodedTermName:i,promotion:s,consolidatedBillingTable:null!=(n=nJ({term:r.targetTerm,promotion:s,isNewPianoCustomer:t.user.isNewPianoCustomer}))?n:[],source:r.source}),e},[])}let iX=Symbol.for("constructDateFrom");function iZ(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&iX in e?e[iX](t):e instanceof Date?new e.constructor(t):new Date(t)}function iQ(e,t){return iZ(t||e,e)}function i0(e){var t,r,n;let i=null==e||null==(t=e.settings)?void 0:t.popup;if(!i)return{};let a=(null==i||null==(r=i.countDownTimer)?void 0:r.isEnabled)&&(null==e||null==(n=e.activeDate)?void 0:n.end),s=`rosettaCampaignPopUpLastShown_${e.name}`;return{campaignPopupCustomization:i,shouldShowCounterTimer:a,checkShouldShowCampaignPopupByDisplayInterval:()=>{var e;try{let t=null==i?void 0:i.displayInterval;if(!t)return!0;let r=localStorage.getItem(s);if(!r)return!0;let n=function(e,t,r){let{years:n=0,months:i=0,weeks:a=0,days:s=0,hours:o=0,minutes:l=0,seconds:c=0}=t,u=iQ(e,void 0),d=i||n?function(e,t,r){let n=iQ(e,void 0);if(isNaN(t))return iZ(e,NaN);if(!t)return n;let i=n.getDate(),a=iZ(r?.in||e,n.getTime());return a.setMonth(n.getMonth()+t+1,0),i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}(u,i+12*n):u,f=s||a?function(e,t,r){let n=iQ(e,void 0);return isNaN(t)?iZ(e,NaN):(t&&n.setDate(n.getDate()+t),n)}(d,s+7*a):d;return iZ(e,+f+1e3*(c+60*(l+60*o)))}(new Date(parseInt(r,10)),t);return e=new Date,+iQ(e)>+iQ(n)}catch(e){return console.error("Failed to check if campaign popup should be displayed based on interval. Possible issue with localStorage or date calculation.",{error:e}),!1}},updateCampaignPopupLastShownTime:()=>{try{localStorage.setItem(s,Date.now().toString())}catch(e){console.error("Failed to update campaign popup last shown time. Possible issue with localStorage.",{error:e})}}}}async function i1(){let{campaigns:e,activeCampaignSettings:t,user:r,terms:n,services:i,isNewPianoCustomer:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==i||!i.searchPromotions)return[];let s=null!=t?t:i4({campaigns:e,user:r});if(!s)return[];let o=i2({campaign:s,user:r,terms:n}),l=o.map(e=>e.promotionName).filter(Boolean),c=l.length?await i.searchPromotions({names:l}):[];return o.map(e=>{let t=c.find(t=>t.name.includes(e.promotionName)),r=nJ({action:e.subscribeAction,promotion:t,term:e.term,isNewPianoCustomer:a});return{term:e.term,consolidatedBillingTable:r,...t?{promotion:t}:{}}})}function i2(e){let{campaign:t,user:r,terms:n}=e,i=t.settings.plans.reduce((e,t)=>{let n=`${t.billingCycle}-${t.resource}-${r.currency}`.toLowerCase();return{...e,[n]:t}},{}),a=new Set(Object.keys(i));return Object.values(n.reduce((e,r)=>{let{resource:n,billingCycle:s,currency:o,variant:l}=eR.decodeTermName(r.name),c=`${s}-${n}-${o}`.toLowerCase();if(!a.has(c)||e[c]&&l!==t.termVariantName)return e;e[c]={term:r};let u=i[c].promotionName;return u&&(e[c].promotionName=u),e},{}))}function i4(e){let{campaigns:t,user:r,article:n={},paywall:i={}}=e;if(!t||0===t.length||!r)return null;for(let e of t){var a,s;let{name:t,termVariantName:o,configs:l}=e,{settings:c}=i8({configs:l,user:r,article:n,paywall:i});if(null==c||null==(a=c.plans)||!a.length)continue;let u=new Date,d=null==(s=c.dates)?void 0:s.find(e=>{let t=new Date(e.start)<=u,r=!!e.end&&u>=new Date(e.end);return t&&!r});if(d)return{name:t,termVariantName:o,activeDate:d,settings:c}}return null}function i8(e){let{configs:t,user:r,article:n,paywall:i}=e,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.some(e=>t.some(t=>t.toLowerCase()===e.toLowerCase()))};return{settings:t.reduce((e,t)=>{let{filters:s=[],settings:o={}}=t;return null==s||!s.length||(null==s?void 0:s.some(e=>{var t,s,o,l,c,u,d,f,p,h;return!(null!=e&&null!=(t=e.user)&&t.types&&(null==e||null==(s=e.user)||null==(s=s.types)||!s.includes(null==r?void 0:r.type))||null!=e&&null!=(o=e.user)&&o.currencies&&(null==e||null==(l=e.user)||null==(l=l.currencies)||!l.includes(null==r?void 0:r.currency))||null!=e&&null!=(c=e.article)&&c.sections&&!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.some(e=>t.some(t=>t.toLowerCase().startsWith(e.toLowerCase())))}(null==e?void 0:e.article.sections,null==n?void 0:n.sections)||null!=e&&null!=(u=e.article)&&u.topics&&!a(null==e?void 0:e.article.topics,null==n?void 0:n.topics)||null!=e&&null!=(d=e.paywall)&&d.variants&&!a(null==e?void 0:e.paywall.variants,[null!=(f=null==i?void 0:i.variant)?f:""])||null!=e&&null!=(p=e.paywall)&&p.types&&!a(null==e?void 0:e.paywall.types,[null!=(h=null==i?void 0:i.type)?h:""]))}))?im()(e,o):e},{})}}function i6(e){return e.includes("Plus")}let i5={filterTerms:function(e){var t,r,n;return null!=(t=e.user)&&t.checkResource?(t=>{let r=this.isCrossProductRequired(e);return t.reduce((t,n)=>{var i;return t.push(r&&null!=(i=i3({context:e,targetTerm:n}))?i:n),t},[])})(e.terms.filter(e=>!e.name.includes("CrossProduct"))):(r=e.terms,n=e.user,r.filter(e=>{let{variant:t}=eR.decodeTermName(e.name);return!(!["Intro","Rack"].includes(t)||!i6(e.name)&&!e.name.includes("Bundle Plus"))||(!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.includes("Posties"),n=e.includes("YP");return i6(e)&&(t.hasEverSubscribedToScmp||t.hasEverSubscribedToPosties||t.hasEverSubscribedToYoungPost)?!t.hasEverConvertedToSCMPPlus:!n&&!r&&(t.hasEverSubscribedToPosties||t.hasEverSubscribedToYoungPost)?!t.hasEverSubscribedToScmp:r&&(t.hasEverSubscribedToScmp||t.hasEverSubscribedToYoungPost)?!t.hasEverSubscribedToPosties:!(!n||!t.hasEverSubscribedToScmp&&!t.hasEverSubscribedToPosties||t.hasEverSubscribedToYoungPost)}(e.name,n)?!e.name.includes("CrossProduct"):e.name.includes("CrossProduct"))}))},isCrossProductRequired:function(e){return"plus"===e.user.checkResource&&(e.user.hasEverSubscribedToScmp||e.user.hasEverSubscribedToYoungPost||e.user.hasEverSubscribedToPosties)?!e.user.hasEverConvertedToSCMPPlus:"scmp"===e.user.checkResource&&(e.user.hasEverSubscribedToPosties||e.user.hasEverSubscribedToYoungPost)?!e.user.hasEverSubscribedToScmp:"posties"===e.user.checkResource&&(e.user.hasEverSubscribedToScmp||e.user.hasEverSubscribedToYoungPost)?!e.user.hasEverSubscribedToPosties:!("yp"!==e.user.checkResource||!e.user.hasEverSubscribedToScmp&&!e.user.hasEverSubscribedToPosties||e.user.hasEverSubscribedToYoungPost)}},i3=e=>{let{context:t,targetTerm:r}=e,{billingCycle:n,currency:i,resource:a,variant:s}=eR.decodeTermName(r.name);return t.terms.find(e=>{let{billingCycle:t,currency:r,isCrossProduct:o,resource:l,variant:c}=eR.decodeTermName(e.name);return n===t&&i===r&&a===l&&s===c&&o})},i7="SCMP Lite";function i9(e){var t,r,n,i,a;let s=(n=(t=e.user).country,!!t.country&&"US"!==n&&"SG"!==n&&"HK"!==n&&(!(r=t.ltsBucket)||5>r));return{isEligible:s,liteTerms:s?(null!=(a=(i=e).terms)?a:[]).filter(e=>{let{currency:t,variant:r}=eR.decodeTermName(e.name);return"LiteABTest(85%)"===r&&t===i.user.currency}):[]}}let ae="SCMP Lite Core Geos",at=["0","1","2"];function ar(e){return!!e&&at.includes(e)}function an(e){var t,r,n;let{optimizely:i,user:a}=e,s=i.isActive&&"0"!==(null==(n=i.variation)?void 0:n.name)&&["US","SG","HK"].includes(a.country)&&(null!=(r=a.ltsBucket)?r:1/0)<5;return{isEligible:s,liteCoreGeosTerms:s?function(e){var t;let r=((t,r)=>{let n=Array.isArray(null==e?void 0:e.targetSpecificExpVariant)?null==e?void 0:e.targetSpecificExpVariant[0]:null==e?void 0:e.targetSpecificExpVariant,i=ar(n)?n:null,a=ar(null==(t=e.optimizely.variation)?void 0:t.name)?null==(r=e.optimizely.variation)?void 0:r.name:null,s=null!=i?i:a;return s?({1:"LiteCoreGeosABTest(70%)",2:"LiteCoreGeosABTest(85%)"})[s]:null})();return(null!=(t=e.terms)?t:[]).filter(t=>{let{currency:n,variant:i}=tb(t.name);return n===e.user.currency&&i===r})}(e):[],variant:s?null==(t=i.variation)?void 0:t.name:void 0}}function ai(e){let{paywallStrategyConfigs:t,filterContext:r}=e;return null!=t&&t.length?aa.getTargetingPaywallSettings(t,r):null}let aa={getTargetingPaywallSettings:(e,t)=>{let r=e=>{let{configs:t,user:r,article:n}=e;return t.reduce((e,t)=>{let{filters:i=[],settings:a={}}=t;return null==i||!i.length||(null==i?void 0:i.some(e=>{var t,i,a,s,o;return[{filterValues:null==e||null==(t=e.user)?void 0:t.types,actualValues:null==r?void 0:r.type},{filterValues:null==e||null==(i=e.user)?void 0:i.currencies,actualValues:null==r?void 0:r.currency},{filterValues:null==e||null==(a=e.article)?void 0:a.paywalls,actualValues:null==n?void 0:n.paywall},{filterValues:null==e||null==(s=e.article)?void 0:s.flags,actualValues:null==n?void 0:n.flag},{filterValues:null==e||null==(o=e.article)?void 0:o.topicIds,actualValues:null==n?void 0:n.topicIds}].every(as)}))?im()(e,a):e},{})};for(let n of e){let{name:e}=n,{configs:i}=n,a=r({configs:i,user:t.user,article:t.article});if(!(Object.keys(a).length<=0))return{name:e,settings:a}}return null}},as=e=>{let{filterValues:t,actualValues:r}=e;if(null==t)return!0;let n=Array.isArray(t)?t:[t];if(0===n.length)return!0;if(null==r)return!1;let i=Array.isArray(r)?r:[r];if(0===i.length)return!1;let a=n.map(e=>"string"==typeof e?e.toLowerCase():e),s=new Set(i.map(e=>"string"==typeof e?e.toLowerCase():e));return a.some(e=>s.has(e))};function ao(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:al,{highestScorePlan:r}=e.reduce((e,r)=>{let{highestScorePlan:n,highestScores:i}=e,a=t.map(e=>e(r));return n&&"b"!==((e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!==t[r])return t[r]-e[r]>0?"b":"a";return"equal"})(i,a)?{highestScorePlan:n,highestScores:i}:{highestScorePlan:r,highestScores:a}},{highestScorePlan:void 0,highestScores:[]});return r}let al=[function(e){return["winback","campaign"].indexOf(e.offer)},function(e){let{billingCycle:t}=e.decodedTermName;return["1m","2y","1y"].indexOf(t)}],ac=Q.extend("index");class au extends Error{}var ad=new class extends iL{constructor(){super(),this.ready=!1,this.rulesInitialized=!1}setConfig(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ac(`SDK version: ${this.version}`),(e=>{let{aid:t,env:r,apiUri:n,debug:i}=e;if(T())return tj("setConfig is client side only");if(!t||!r||!n)return tj("setConfig: aid, env and apiUri are required");let a={aid:t,env:r,apiUri:n,debug:!0===i};tH.config=a,ei(eu.PIANO_CONFIG,a),tW(a.debug)})(k()(t,"piano",{})),e=k()(t,"contentService",{}),ei(eu.CS_CONFIG,e),e8.setConfig(k()(t,"rosetta",null)),this}getConfig(){return{piano:tY(),contentService:tJ(),rosetta:e8.getConfig()}}getRosettaAppConfig(){return ea("appConfig")}registerService(e,t){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(T())rK("servicesRegister()","service registration is for client side only");else{if(E()(e))return rK("servicesRegister()","missing service name"),rK("servicesRegister()",{serviceName:e,config:t});if(E()(rJ[e]))rK("servicesRegister()",`unknown service: ${e}`);else try{rX.config[e]=t,rX.service[e]=rJ[e]}catch(e){rK("servicesRegister()",e)}}}(e,t),this}getServiceConfig(e){return rZ(e)}getService(e){return E()(e)?void rK("servicesGetService()","serviceName not provided"):k()(rX.service,e,null)}sendMessage(e,t){tf(e,t)}registerChannelListener(e){return th(e),this}removeChannelListener(e){return tx(e),this}registerWaiter(e){return ix.register(e),this}subscribeWaiter(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ix.subscribe(e,t,r,n),this}updateWaiter(e,t){return ix.update(e,t),this}cancelWaiter(e,t){return ix.cancel(e,t),this}setToken(e){return tV(e),this}setPageUrl(e){return ac("setPageUrl()",{pageUrl:e}),tq(e),this}prepareArticleData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ac("prepareArticleData()",{article:e}),(e=>{tj("pianoPrepareArticleData()",{article:e});let t={tags:[],contentAuthor:null,contentSection:null,contentCreated:null,contentIsNative:null,pageUrl:null,customVariables:{}};if(!T()){let r=k()(e,"topics",[]),n=k()(e,"sponsorType",null),i=k()(e,"contentLock",!0),a=k()(e,"types[0][0].name",null),s=k()(e,"__typename",null);t.tags=j()(U()(r,"name"),Z(n)?[`sponsorType/${n}`]:[],Z(a)?[`articleType/${a}`]:[],Z(s)?[`contentType/${s}`]:[],i?[]:["contentUnlocked"]).filter(Boolean),t.customVariables={entityId:k()(e,"entityId",null),entityUuid:k()(e,"entityUuid",null),headline:k()(e,"headline",null)},t.contentCreated=new Date(k()(e,"publishedDate",0)||k()(e,"createdDate",0)||0).toISOString(),t.contentAuthor=k()(e,"authors[0].name",null);let o=B()(k()(e,"sections",[]));E()(o)||(t.contentSection=o.slice(-2).map(e=>e.name).join("/"));let l=k()(e,"sponsor",!0);t.contentIsNative=!F()(l);let{protocol:c,host:u,pathname:d}=location;t.pageUrl=[c,"//",u,k()(e,"urlAlias",d)].join("")}return t})(e)}setArticleData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ac("setArticleData()",{articleData:e}),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(tj("pianoSetArticleData()",{articleData:e}),!T()){tH.tp=window.tp||[];let t=k()(e,"tags",[]);tj("pianoSetArticleData()",{tags:t}),tH.tp.push(["setTags",t]);let r=k()(e,"customVariables",{});tj("pianoSetArticleData()",{customVariables:r}),R()(O()(r),e=>{tH.tp.push(["setCustomVariable",e,r[e]])});let n=k()(e,"contentCreated");Z(n)&&(tj("pianoSetArticleData()",{contentCreated:n}),tH.tp.push(["setContentCreated",n]));let i=k()(e,"contentAuthor");Z(i)&&(tj("pianoSetArticleData()",{contentAuthor:i}),tH.tp.push(["setContentAuthor",i]));let a=k()(e,"contentSection");Z(a)&&(tj("pianoSetArticleData()",{contentSection:a}),tH.tp.push(["setContentSection",a]));let s=k()(e,"contentIsNative",!0);tj("pianoSetArticleData()",{contentIsNative:s}),tH.tp.push(["setContentIsNative",s]);let o=k()(e,"pageUrl");Z(o)&&(tj("pianoSetArticleData()",{pageUrl:o}),tq(o))}}(e),this}isReady(){return this.ready}execute(){ac("execute()"),(()=>{if(tj("pianoExecuteExperience()"),!T()){tH.tp=window.tp||[];let r=ea(eu.APP_CONFIG);if(!F()(tH.tp)){var e,t;let n=void 0===(null==r||null==(e=r.tracking)?void 0:e.shouldTrackPianoExecution);(n||!0===(null==r||null==(t=r.tracking)?void 0:t.shouldTrackPianoExecution))&&e8.logPianoExecution(n),tH.tp.experience.execute()}}})()}async init(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ac("init()",{options:t}),T()){let e="Make sure you call init() on the client side.";throw ac("init()",e),Error(e)}await async function(){try{await Promise.all([(ef({src:"//www.npttech.com/advertising.js",element:"head"}),new Promise(e=>{let t="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",r=new XMLHttpRequest;r.timeout=1e3,r.addEventListener("readystatechange",function(){r.readyState===XMLHttpRequest.DONE&&e(0===r.status||r.responseURL!==t)}),r.open("HEAD",t,!0),r.send(null)}))])}catch{iu("ad block detected");let e=new Date;e.setTime(e.getTime()+3e5),document.cookie=`__adblocker=true; expires="${e.toUTCString()}"; path=/`}}(),await r_(this.getConfig()),(e=>{let{sdk:t}=e;try{var r,n,i;let e=iS({sdk:t});if(!e)return{};(()=>{var t,r;let n=null==e||null==(t=e.tp)||null==(t=t.customVariables)?void 0:t.monthlyRenewNowPromoCodeHasBeingUse,i=null==e||null==(r=e.tp)||null==(r=r.customVariables)?void 0:r.annualRenewNowPromoCodeHasBeingUsed;n&&tp.setCustomVariable("monthlyRenewNowPromoCodeHasBeingUsed",n),i&&tp.setCustomVariable("annualRenewNowPromoCodeHasBeingUsed",i)})(),t.rulesEngine.addFact("hasIpAccess",null==e||null==(r=e.facts)?void 0:r.hasIpAccess),t.rulesEngine.addFact("ipRangeAccess",null==e||null==(n=e.facts)?void 0:n.ipRangeAccess),t.rulesEngine.addFact("ipRangeContractIds",null==e||null==(i=e.facts)?void 0:i.ipRangeContractIds)}catch(e){return iw.error("Failed to load data from localStorage:",e),{}}})({sdk:this});let r=k()(t,"piano.zone");try{await (tj("pianoLoadScript()"),new Promise((e,t)=>{ef({src:"//cdn.tinypass.com/api/tinypass.min.js",element:"script"}).then(()=>e()).catch(e=>t(e))}))}catch(e){throw new au("failed to load piano script",{cause:e})}await (async()=>{tj("pianoSetup()");let e=await (async()=>{tO("checkIfUserHasApplyPay rosettaSDK");try{var e,t;return!("undefined"==typeof window||!window.ApplePaySession)&&null!=(e=await (null==(t=window.ApplePaySession)?void 0:t.canMakePaymentsWithActiveCard(`merchant.${window.location.hostname}.stripe`)))&&e}catch(e){return tO("error: failed to check if user has apple pay",e.message),!1}})();return new Promise((t,r)=>{if(!Z(tH.config.aid)){let e="The fields `piano.aid` is required.";return tj("pianoSetup()",e),r(Error(e))}tH.tp=window.tp||[],tH.tp.push(["setAid",tH.config.aid]),tH.tp.push(["setSandbox","production"!==tH.config.env]),"production"===tH.config.env&&tH.tp.push(["setCxenseSiteId","1138611009236567654"]),tH.tp.push(["setUseTinypassAccounts",!1]),tH.tp.push(["setUsePianoIdUserProvider",!1]),tH.tp.push(["setUsePianoIdLiteUserProvider",!0]),tH.tp.push(["setPageURL",[location.protocol,"//",location.host,location.pathname].join("")]),tH.tp.push(["setCustomVariable","hasApplePayAvailable",e]),tH.tp.push(["setMaxCookieExpirationInDays",60]),window.location.host.includes("scmp-com")&&tH.tp.push(["setComposerHost","https://c2-piano-io"+window.location.host.substring(window.location.host.indexOf("."))]),tH.tp.push(["init",()=>(sessionStorage.setItem("subscribe.google.com:toast","1"),tW(tH.config.debug),tV(),t())])})})(),e=(e,t)=>this.emit(e,...t),tj("pianoAddHandlers()"),T()||(tH.tp=window.tp||[],R()(["completeUpgradePurchase","checkoutComplete","checkoutClose","checkoutError","checkoutSelectTerm","checkoutStateChange","checkoutCustomEvent","showOffer","showTemplate","startCheckout","submitPayment","loginRequired","loginSuccess","experienceExecute","meterActive","meterExpired","beforeBrowserEvent","setResponseVariable","externalCheckoutComplete"],t=>{tH.tp.push(["addHandler",t,function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e(t,n)}])})),(e=>{let{sdk:t}=e;t.on("completeUpgradePurchase",e=>{t.sendMessage("sdk/response-from-sdk",{message:{requestType:"checkout/completeUpgradePurchase",responseData:e}})})})({sdk:this}),iD({sdk:this}),(e=>{let{sdk:t}=e,r=tz();t.prependListener("experienceExecute",()=>{var e;let n=r.customVariables.geoLocation;(window.dataLayer=window.dataLayer||[]).push({_clear:!1,userProperties:{country:n}}),t.rulesEngine.addFact("piano",{...t.rulesEngine.getFact("piano"),currency:null==r||null==(e=r.customVariables)?void 0:e.currency})})})({sdk:this}),(e=>{let{sdk:t}=e;t.postpendListener("experienceExecute",()=>{var e,r;let n=tz();if(!n)return;let i=t.rulesEngine.getFact("ipRangeAccess");((e,t)=>{try{let r=iS({sdk:e}),n=im()(r,t),i=i_(JSON.stringify(n),e);localStorage.setItem(iP,i)}catch(e){localStorage.removeItem(iP),iw.error("Failed to save data to localStorage:",e)}})(t,{facts:{hasIpAccess:null!=(e=null==(r=n.customVariables)?void 0:r.ip_access_user)&&e||Object.values(i).some(Boolean),ipRangeAccess:i},tp:{customVariables:n.customVariables}})})})({sdk:this}),Z(r)&&(tj("pianoSetZone()",{zone:r}),T()||(tH.tp=window.tp||[],tH.tp.push(["setZone",r]))),this.ready=!0,this.emit("onReady")}async callApi(e,t){return ac("callApi()",{apiUri:e,params:t}),tK(e,t)}getSubscriptionStatus(){}get rulesEngine(){return ri}get Rule(){return rr}async initRules(){try{!function(e){let{sdk:t}=e;tz()||iU("tp object not found to set up ip range access listener");let r=e=>{(()=>{try{var r,n;let i=new Set(null!=(r=null==(n=t.rulesEngine.getFact("activeConversions"))?void 0:n.map(e=>e.term.term_id))?r:[]),a=Array.from(new Set(e.result.events.find(e=>"experienceExecute"===e.eventType).eventExecutionContext.accessList.filter(e=>!i.has(e.termId))));if(0===a.length)return void t.rulesEngine.addFact("ipRangeAccess",ij,{replace:!0});t.rulesEngine.addFact("ipRangeContractIds",Array.from(new Set(a.map(e=>e.termId))).join(","),{replace:!0});let s=new Set(a.map(e=>{var r;return ni(e.rid,null==(r=t.rulesEngine.getFact("appConfig"))?void 0:r.pianoResourceIds)})),o=t5()(ij);for(let e in iN)o[e]=[...s].some(t=>iN[e].has(t));t.rulesEngine.addFact("ipRangeAccess",o,{replace:!0})}catch(e){iU("Error setting up ipRangeAccess facts. Using default facts",e),t.rulesEngine.addFact("ipRangeAccess",ij)}})(),t.off("experienceExecute",r)};t.prependListener("experienceExecute",r)}({sdk:this}),await r_(this.getConfig()),T()||ri.setReady(el),await r5(ri,this.getConfig()),await nB(ri),await ri.run("_initGuest"),E()(tG())||await nR(ri,this.getConfig()),await ir(ri),await ri.run("_initUser"),await (async e=>{e.addRule(new rr("abTestVariants").waitFor([el,eo]).stage(8).when(()=>!0).then(()=>{var e;return io({customVariables:null==(e=tz())?void 0:e.customVariables})}).fallback({}))})(ri),await (async e=>{e.addRule(new rr("ui.masthead.buttonType").deprecate("should use new name ui.masthead.button.getDisplayVariant()").disable()),e.addRule(new rr("ui.masthead.buttonTypeWithEpaper").deprecate("should use new name ui.masthead.button.getDisplayVariant()").disable()),e.addRule(new rr("ui.masthead.button").waitFor([el]).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{hasIpAccess:r,hasActiveScmpSubscription:n,hasActiveEpaperConversions:i}=e,{user:{isSCMPSubscriber:a,isSCMPLiteSubscriber:s,isSCMPPlusSubscriber:o,autoRenewEnabled:l,isAutoRenewable:c,isUpgradeable:u,hasScmpUpgradeOptions:d,gracePeriod:f,winback:p,hasPendingTermChange:h,isHyperActiveSubscriber:x,isFreeSubscriber:b,overallSubscriptionDaysLeft:g,isActiveSubscriptionInTrialPeriod:m},guest:{supportPiano:y}}=t;return{getDisplayVariant:e=>{let{shouldIncludeEpaper:t=!1,shouldIncludeScmpPlus:v=!1}=e;if(!y||r)return"";if(k()(f,"isActive",!1))return"GRACEPERIOD";if(s)return"";if(a){if(b&&!n)return"SUBSCRIBE";if(m)return"AUTORENEW";if(c&&!l)return g>90?"AUTORENEW":"RENEW";if(v&&o)return"SCMPPLUS";if(u&&!x&&!h&&d)return"UPGRADE"}return t&&!v&&i&&l?"EPAPER":null!=p&&p.latestExpiredScmpB2CConversion?"REACTIVATE":a?"":"SUBSCRIBE"}}}).fallback((e,t)=>{let{hasIpAccess:r}=e,{guest:{supportPiano:n}}=t;return{getDisplayVariant:()=>!n||r?"":"SUBSCRIBE"}})),e.addRule(new rr("ui.tooltip.usertype").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{user:{isSiteLicenseSubscriber:r,isSCMPSubscriber:n,isInternalStaff:i,activeBillingPeriod:a}}=t;return i?"internal":r?n?"scmpGroupSub":"groupSub":n?a===ed.MONTHLY?"monthly":a===ed.ANNUAL?"annual":a===ed.BIANNUAL?"biannual":"subscriber":"nonSubscriber"}).fallback("anonymous")),e.addRule(new rr("ui.tooltip.impressionUserType").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{user:{isPasswordless:r,isAuthenticated:n,isSCMPSubscriber:i,isInternalStaff:a}}=t;return a?"Authenticated Users":i?"Subscribers":n?"Authenticated Users":r?"Registered Users":""}).fallback("Anonymous")),e.addRule(new rr("ui.tooltip.impressionLabel").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{user:{isSCMPSubscriber:r,isSiteLicenseSubscriber:n,activeBillingPeriod:i}}=t;if(n)return"sitelicense";if(r)switch(i){case ed.MONTHLY:return"Monthly";case ed.ANNUAL:return"Annual";case ed.BIANNUAL:return"Biannual"}return""}).fallback("")),e.addRule(new rr("ui.tooltip.messageObject").waitFor(el).stage(11).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{appConfig:r}=e,{user:{isSCMPSubscriber:n},ui:{tooltip:{usertype:i}}}=t,a=k()(r,`tooltip.${i}`,{});if(!E()(a))return a;let s=k()(r,"tooltip.subscriber",{});return!E()(s)&&n?s:{}}).fallback((e,t)=>{let{appConfig:r}=e,{ui:{tooltip:{usertype:n}}}=t;return k()(r,`tooltip.${n}`,{})})),e.addRule(new rr("ui.article.printable").waitFor([el,eo]).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{hasIpAccess:r}=e,{user:{isSCMPSubscriber:n},guest:{supportPiano:i}}=t;return!!r||!i||!!n}).fallback((e,t)=>{let{hasIpAccess:r}=e,{guest:{supportPiano:n}}=t;return!n||!!r})),e.addRule(new rr("ui.account.showAutoRenewWidget").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{hasActiveSubscriptions:r}=e,{user:{overallAutoRenewEnabled:n,isAutoRenewable:i}}=t;return!(!r||!i||n)}).fallback(!1)),e.addRule(new rr("ui.popup.showSubscriberOnboarding").waitFor(el).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{userCookie:r,hasActiveConversions:n}=e,{user:{onboardingData:i}}=t,a=k()(i,"value","");return!(E()(r)||!n||"show"!==a)}).fallback(!1)),e.addRule(new rr("ui.popup.showSCMPPlusWelcomePopup").waitFor([el,eo]).stage(10).when(e=>{let{hasToken:t}=e;return t}).then((e,t)=>{let{userCookie:r}=e,{user:{hasSCMPPlusAccessRight:n,pianoCustomFields:{hasShownSCMPPlusWelcomePopUp:i}}}=t;return!E()(r)&&n&&!(null!=i&&i.value)}).fallback(!1))})(ri),await ii(ri),await ri.run("_initMisc"),this.rulesInitialized=!0,this.emit("rules:initialized")}catch(e){ac("initRules() error: %s",e.message),this.rulesInitialized=!1}}async serverRules(e){return await (async e=>{var t;let{piano:r,contentService:n}=e;r&&n||il("piano, contentService config are required");let i=null==(t=e.piano)?void 0:t.token,a=new rn;return await r5(a,e),await nB(a),await a.run(),i&&(await nR(a,e),await ir(a),await ii(a),await a.run()),{facts:a.getAllFacts(),outcome:a.getAllOutcome()}})(e)}async anonymousServerRules(e){return await (async e=>{let t=new rn;return await r5(t,e),await (async e=>{e.addRule(new rr("user.isNewPianoCustomer").when(()=>!0).then(!0).fallback(!0)),e.addRule(new rr("user.types").when(()=>!0).then(()=>({scmp:"NEW_USER",yp:"NEW_USER",posties:"NEW_USER"}))),e.addRule(new rr("tracking.ga4").when(()=>!0).then(()=>({})))})(t),await t.run(),{facts:t.getAllFacts(),outcome:t.getAllOutcome()}})(e)}async initiateSwGLinkingFlow(){(async e=>{let t=ic.extend("linking-flow"),r=e.rulesEngine.getOutcome("runtime.pianoUserHasShownSwGLinkingFlowField.value","true");if("true"===r)return t("Skip for user that already be shown");let n=e.rulesEngine.getOutcome("user.isSCMPSubscriber");if(!n)return t("Skip for user that not subscribed");let i=k()(e.rulesEngine.getFact("userCookie"),"scs",[]).includes("google");if(!i)return t("Skip for user without Google login");let a=e.rulesEngine.getOutcome("ui.popup.showSubscriberOnboarding");a?t("Skip for user will see the onboarding flow"):(window.SWG=window.SWG||[],t("Passed the condition check. Push task into SwG task queue",{isSubscribed:n,shouldShowSubscriberOnboarding:a,hasGoogleLogin:i,hasShownSwGLinkingFlow:r}),window.SWG.push(async e=>{try{let{entitlements:r,rn:n}=await e.getEntitlements();if(r.some(e=>e.products.includes(n)))return void t("Skip for user that already linked with SwG")}catch(e){return void t("Failed getting SwG entitlements",{error:e})}let r=new MutationObserver(e=>{for(let r of e)if("attributes"===r.type&&r.target===document.documentElement&&"style"===r.attributeName){let e=r.target.style;if(e&&!e["padding-bottom"])return;t("Prevent SwG linking dialog modification on the root html style"),r.target.style.removeProperty("padding-bottom")}});r.observe(document.documentElement,{attributes:!0});try{t("Starting SwG linking flow"),await e.saveSubscription(()=>({token:window.tp.user.getProvider().getToken()})),await rh("true")}catch(e){t("Failed SwG linking flow with error",{error:e})}finally{t("Finished SwG linking flow"),r.disconnect()}}))})(this)}async getPostiesData(){return await (async e=>{if(!e8.getConfig())throw Error("Rosetta config not set");let t=e.getFact("appConfig");if(!t)throw Error("Rosetta appConfig not loaded");let r=await e8.getOfferByName("Posties Wall Offer"),n=r.terms.reduce((e,r)=>{var n,i,a,s;let o=eR.decodeTermName(r.name);return o.isCrossProduct||(e[o.resource]||(e[o.resource]={}),e[o.resource][o.billingCycle]={...{trialPrice:null==(i=(n=r.payment_billing_plan_table).find(e=>"true"===e.isTrial))?void 0:i.priceValue,rackPrice:n.at(-1).priceValue},isDisabled:null!=(a=null==(s=t.posties.pricing)||null==(s=s[o.resource])||null==(s=s[o.billingCycle])?void 0:s.isDisabled)&&a}),e},{});return{terms:r.terms,pricing:n}})(ri)}get constants(){return t}get version(){return"1.10.7"}setupPaywallCheckoutForPWA(e){return function(e,t){let r;(function(e){let t=e.rulesEngine.getOutcome("tracking.ga4.userRole");window.dataLayer=window.dataLayer||[],window.dataLayer.push({page:{ga4UserRole:t}})})(e),(async()=>{await tt()})();let{checkoutScriptListenerCleanup:n,checkoutScriptReadyPromise:i}=function(){let e=null,t=new Promise(t=>{e=eK(e=>{e===eG.TEMPLATE_READY&&t()})});return{checkoutScriptListenerCleanup:e,checkoutScriptReadyPromise:t}}();ry({jsLink:rv({filename:"subscriptionCheckout.js"}),tagId:"subscription-checkout-script"});let{cleanup:a,setPaymentMethod:s}=(e=>{let{sdk:t,config:r,popup:n}=e,i=null,a="",s="",o="",l=()=>{tz().offer.close(),e0()},c=()=>{e2(),function(e){let{sdk:t,term:r,paymentMethod:n}=e;tA({subcategory:"shopping_cart",action:"close",customized_parameters:{call_to_action:"subscribe",payment_method:n,term_offer_selected:r.termId}},t)}({sdk:t,term:i,paymentMethod:s})},u=e=>{i={...e,name:e.termName}},d=e=>{var r;i=null==e?void 0:e.term,tO("submitPaymentHandler",e),tT({callToAction:"subscribe",sdk:t,paymentTaxRate:null==e||null==(r=e.term)?void 0:r.taxRate,billingCountryName:a,paymentMethod:s,termId:null==e?void 0:e.term.termId})},f=async e=>{var l,c,u,d,f,p,h,x;let b=tz();tM.handleCheckoutComplete({conversion:e,checkoutTerm:i,scmpUrl:r.scmp.url});let g=tB(),m=tS({decodedTerm:eR.decodeTermName(i.name)}),y=tD({scmpUrl:r.scmp.url,application:m});b.offer.close(),e2(),tk({conversionId:null!=(l=null==e?void 0:e.termConversionId)?l:"",plan:null!=(c=null==(u=i)?void 0:u.name)?c:"",price:null!=(d=null==e?void 0:e.chargeAmount)?d:"",currency:null!=(f=null==e?void 0:e.chargeCurrency)?f:"",promoCode:null!=(p=null==(h=i)?void 0:h.hiddenPromoCode)?p:o});let v=await e8.getPayment(null==e?void 0:e.paymentId);!function(e){let{sdk:t,transactionId:r,term:n,paymentCountry:i,paymentMethod:a}=e;tA({subcategory:"result",action:"sys",customized_parameters:{payment_method:a,call_to_action:"subscribe",result:"success",term_offer_selected:n.termId,payment_country:i,transaction_id:r,result_source:"piano"}},t)}({sdk:t,transactionId:null==v?void 0:v.transactionId,term:i,paymentCountry:a,paymentMethod:s}),eX({isPasswordlessUser:g,isOnboarding:!g,email:e.email,termName:t$(null==(x=i)?void 0:x.name),tpZone:b.customVariables.zone,isCloseable:!0,triggerReloadOnClose:n.triggerReloadOnClose,resumeLink:y}),function(e){var t;let{sdk:r,transactionId:n,term:i,paymentCountry:a,paymentMethod:s}=e;tA({subcategory:"result",action:"imp",customized_parameters:{payment_method:s,call_to_action:"subscribe",transaction_id:n,result:"success",term_offer_selected:i.termId,payment_country:a,lts_bucket:null==r||null==(t=r.rulesEngine)?void 0:t.getFact("ltsBucket"),product_type:t_({term:i})}},r)}({sdk:t,transactionId:null==v?void 0:v.transactionId,term:i,paymentCountry:a,paymentMethod:s})},p=e=>{let{message:r}=e;if(null!=r&&r.requestType&&null!=r&&r.channel&&"sdk/request-from-template"===r.channel)switch(r.requestType){case"SYNC_CART_DATA":{let{responseData:e}=r;"billingCountry"===e.key&&(a=e.value),"appliedPromoCode"===e.key&&(o=e.value);break}case"action/trackGA4-thankyou-click-resume-reading":var n,l;!function(e){let{sdk:t,paymentMethod:r,promoCode:n,termId:i}=e;tA({subcategory:"result",action:"click",customized_parameters:{call_to_action:"resume your reading",payment_method:r,term_offer_selected:i,promo_code:n}},t)}({sdk:t,paymentMethod:s,promoCode:null!=(n=null==(l=i)?void 0:l.hiddenPromoCode)?n:o,termId:i.termId});break;case"action/trackGA4-thankyou-start-onboarding-click":tA({category:"onboarding",action:"click",customized_parameters:{user_type:"subscriber",step:1,cta_type:"start",call_to_action:""}},t);break;case"action/trackGA4-select-billing-country":{let{requestData:e}=r;tT({sdk:t,callToAction:"select country",billingCountryName:e.value.name,paymentMethod:s,termId:i.termId});break}default:tO("unknown request type",r.requestType)}};return t.registerChannelListener("sdk/request-from-template"),t.on("submitPayment",d),t.on("checkoutComplete",f),t.on("checkoutSelectTerm",u),t.on("checkoutError",l),t.on("checkoutClose",c),t.on(ts,p),{cleanup:()=>{t.off("submitPayment",d),t.off("checkoutComplete",f),t.off("checkoutSelectTerm",u),t.off("checkoutError",l),t.off("checkoutClose",c),t.off(ts,p)},setPaymentMethod:e=>{s=e}}})({sdk:e,config:t,popup:{triggerReloadOnClose:!0}}),o=function(e,t,r){e.registerChannelListener("pwa/request-from-template");let n=async n=>{let{message:i}=n;if("showOnboardingPopup"!==(null==i?void 0:i.requestType))if("action/samePageRedirect"!==(null==i?void 0:i.requestType))"action/paywallCheckout"===(null==i?void 0:i.requestType)&&await async function(e,t,r,n){let{offerId:i,term:a,paymentMethod:s,trackingId:o,wallType:l}=(null==t?void 0:t.requestData)||{};i&&a&&l&&void 0!==o?(n(s||""),await (async e=>{let{sdk:t,term:r,offerId:n,paymentMethod:i,trackingId:a,config:s,wallType:o}=e;if(tO("pianoCheckout rosettaSDK",{sdk:t,term:r,offerId:n,trackingId:a,config:s,wallType:o}),t&&r&&n&&a&&s&&o)try{var l,c,u;let e=null!=(l=r.hiddenPromoCode)?l:null==(c=r.promotion)?void 0:c.fixed_promotion_code;if(null==(u=tz())||null==(u=u.user)||!u.isUserValid())return tL.save({term:r,offerId:n,paymentMethod:i,trackingId:a,hiddenPromoCode:e}),void eQ({checkoutTerm:r,destination:window.location.href,config:s,wallType:o});let d=tS({decodedTerm:eR.decodeTermName(r.name)});await (async(e,t)=>{var r,n,i,a;if("undefined"==typeof window||!e)return tn("window/sdk is not defined"),[];let s=await tt();if(!s)return tn("allPromotions is empty"),[];let{rulesEngine:o}=e,l=null!=(r=null==o?void 0:o.getFact("userTypes"))?r:{},c={allPublisherConversions:null!=(n=null==e||null==(i=e.rulesEngine)||null==(a=i.getFact)?void 0:a.call(i,"allPublisherConversions"))?n:[],targetApplication:t,rawPromotions:s,userTypes:l},u=e3.computeByApplication(c),d=e3.computeByUsedCodesFromCurrentUser(c),f=[].concat(u,d).filter((e,t,r)=>t===r.findIndex(t=>t.code===e.code));tz().push(["setCustomVariable","forbiddenPromoCodes",f])})(t,d),e1(),tU({sdk:t,offerId:n,paymentMethod:i,term:r,trackingId:a,hiddenPromoCode:e})}catch(e){tO("error: failed to init piano checkout",e.message),e0()}else tO("error: missing required parameters")})({sdk:e,offerId:i,paymentMethod:s,term:a,trackingId:o,config:r,wallType:l})):ib("Missing required parameters for paywall checkout",{offerId:i,term:a,wallType:l,trackingId:o})}(e,i,t,r);else{var a,s;if(null==i||null==(a=i.requestData)||!a.targetUrl)return;window.open(null==i||null==(s=i.requestData)?void 0:s.targetUrl,"_self")}else rC()};return e.on(ts,n),()=>{e.off(ts,n)}}(e,t,s),{rulesInitializationListenerCleanup:l}=(r=null,i.then(()=>{if(e.rulesInitialized)t();else{let n=()=>t();e.on("rules:initialized",n),r=()=>e.off("rules:initialized",n)}function t(){tL.resumeIfSessionExists({sdk:e,setPaymentMethod:s})}}).catch(e=>{ib("Failed to restore session:",e)}),{rulesInitializationListenerCleanup:r});return{cleanup:()=>{null==o||o(),null==a||a(),null==n||n(),null==l||l()}}}(this,e)}};let af={decodeTermName:eR.decodeTermName,determineTermApplication:tS,determineTermProductType:t_}}(),a}(r(52015))}}]);
//# sourceMappingURL=3098521e-4fcba9dc4fb0da7c.js.map